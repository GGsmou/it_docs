<!DOCTYPE html><html lang="en" dir="ltr" data-has-toc data-has-sidebar data-theme="dark" class="astro-bguv2lll"> <head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>JS | IT Docs</title><link rel="canonical"/><link rel="shortcut icon" href="/it_docs/favicon.svg" type="image/svg+xml"/><meta name="generator" content="Astro v4.4.4"/><meta name="generator" content="Starlight v0.19.1"/><meta property="og:title" content="JS"/><meta property="og:type" content="article"/><meta property="og:url"/><meta property="og:locale" content="en"/><meta property="og:description"/><meta property="og:site_name" content="IT Docs"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="JS"/><meta name="twitter:description"/><script>
	window.StarlightThemeProvider = (() => {
		const storedTheme =
			typeof localStorage !== 'undefined' && localStorage.getItem('starlight-theme');
		const theme =
			storedTheme ||
			(window.matchMedia('(prefers-color-scheme: light)').matches ? 'light' : 'dark');
		document.documentElement.dataset.theme = theme === 'light' ? 'light' : 'dark';
		return {
			updatePickers(theme = storedTheme || 'auto') {
				document.querySelectorAll('starlight-theme-select').forEach((picker) => {
					const select = picker.querySelector('select');
					if (select) select.value = theme;
					/** @type {HTMLTemplateElement | null} */
					const tmpl = document.querySelector(`#theme-icons`);
					const newIcon = tmpl && tmpl.content.querySelector('.' + theme);
					if (newIcon) {
						const oldIcon = picker.querySelector('svg.label-icon');
						if (oldIcon) {
							oldIcon.replaceChildren(...newIcon.cloneNode(true).childNodes);
						}
					}
				});
			},
		};
	})();
</script><template id="theme-icons"><svg aria-hidden="true" class="light astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M5 12a1 1 0 0 0-1-1H3a1 1 0 0 0 0 2h1a1 1 0 0 0 1-1Zm.64 5-.71.71a1 1 0 0 0 0 1.41 1 1 0 0 0 1.41 0l.71-.71A1 1 0 0 0 5.64 17ZM12 5a1 1 0 0 0 1-1V3a1 1 0 0 0-2 0v1a1 1 0 0 0 1 1Zm5.66 2.34a1 1 0 0 0 .7-.29l.71-.71a1 1 0 1 0-1.41-1.41l-.66.71a1 1 0 0 0 0 1.41 1 1 0 0 0 .66.29Zm-12-.29a1 1 0 0 0 1.41 0 1 1 0 0 0 0-1.41l-.71-.71a1.004 1.004 0 1 0-1.43 1.41l.73.71ZM21 11h-1a1 1 0 0 0 0 2h1a1 1 0 0 0 0-2Zm-2.64 6A1 1 0 0 0 17 18.36l.71.71a1 1 0 0 0 1.41 0 1 1 0 0 0 0-1.41l-.76-.66ZM12 6.5a5.5 5.5 0 1 0 5.5 5.5A5.51 5.51 0 0 0 12 6.5Zm0 9a3.5 3.5 0 1 1 0-7 3.5 3.5 0 0 1 0 7Zm0 3.5a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1a1 1 0 0 0-1-1Z"/></svg> <svg aria-hidden="true" class="dark astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.64 13a1 1 0 0 0-1.05-.14 8.049 8.049 0 0 1-3.37.73 8.15 8.15 0 0 1-8.14-8.1 8.59 8.59 0 0 1 .25-2A1 1 0 0 0 8 2.36a10.14 10.14 0 1 0 14 11.69 1 1 0 0 0-.36-1.05Zm-9.5 6.69A8.14 8.14 0 0 1 7.08 5.22v.27a10.15 10.15 0 0 0 10.14 10.14 9.784 9.784 0 0 0 2.1-.22 8.11 8.11 0 0 1-7.18 4.32v-.04Z"/></svg> <svg aria-hidden="true" class="auto astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21 14h-1V7a3 3 0 0 0-3-3H7a3 3 0 0 0-3 3v7H3a1 1 0 0 0-1 1v2a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-2a1 1 0 0 0-1-1ZM6 7a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v7H6V7Zm14 10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-1h16v1Z"/></svg> </template><link rel="stylesheet" href="/it_docs/_astro/index.BsC2KTtW.css" /><script type="module" src="/it_docs/_astro/hoisted.fmGBZKzy.js"></script>
<script type="module" src="/it_docs/_astro/page.CZ0TFQCk.js"></script></head> <body class="astro-bguv2lll"> <a href="#_top" class="astro-7q3lir66">Skip to content</a>  <div class="page sl-flex astro-vrdttmbt"> <header class="header astro-vrdttmbt"><div class="header sl-flex astro-kmkmnagf"> <div class="title-wrapper sl-flex astro-kmkmnagf"> <a href="/it_docs/" class="site-title sl-flex astro-m46x6ez3">  <span class="astro-m46x6ez3"> IT Docs </span> </a>  </div> <div class="sl-flex astro-kmkmnagf"> <site-search data-translations="{&#34;placeholder&#34;:&#34;Search&#34;}" class="astro-v37mnknz"> <button data-open-modal disabled class="astro-v37mnknz">  <svg aria-label="Search" class="astro-v37mnknz astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.71 20.29 18 16.61A9 9 0 1 0 16.61 18l3.68 3.68a.999.999 0 0 0 1.42 0 1 1 0 0 0 0-1.39ZM11 18a7 7 0 1 1 0-14 7 7 0 0 1 0 14Z"/></svg>  <span class="sl-hidden md:sl-block astro-v37mnknz" aria-hidden="true">Search</span> <svg aria-label="(Press / to Search)" class="sl-hidden md:sl-block astro-v37mnknz astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M17 2H7a5 5 0 0 0-5 5v10a5 5 0 0 0 5 5h10a5 5 0 0 0 5-5V7a5 5 0 0 0-5-5Zm3 15a3 3 0 0 1-3 3H7a3 3 0 0 1-3-3V7a3 3 0 0 1 3-3h10a3 3 0 0 1 3 3v10Z"/><path d="M15.293 6.707a1 1 0 1 1 1.414 1.414l-8.485 8.486a1 1 0 0 1-1.414-1.415l8.485-8.485Z"/></svg>  </button> <dialog style="padding:0" aria-label="Search" class="astro-v37mnknz"> <div class="dialog-frame sl-flex astro-v37mnknz">  <button data-close-modal class="sl-flex md:sl-hidden astro-v37mnknz"> Cancel </button> <div class="search-container astro-v37mnknz"> <div id="starlight__search" class="astro-v37mnknz"></div> </div> </div> </dialog> </site-search>    </div> <div class="sl-hidden md:sl-flex right-group astro-kmkmnagf"> <div class="sl-flex social-icons astro-kmkmnagf"> <a href="https://github.com/GGsmou" rel="me" class="sl-flex astro-wy4te6ga"><span class="sr-only astro-wy4te6ga">GitHub</span><svg aria-hidden="true" class="astro-wy4te6ga astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg> </a> </div> <starlight-theme-select>  <label style="--sl-select-width: 6.25em" class="astro-4yphtoen"> <span class="sr-only astro-4yphtoen">Select theme</span> <svg aria-hidden="true" class="icon label-icon astro-4yphtoen astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21 14h-1V7a3 3 0 0 0-3-3H7a3 3 0 0 0-3 3v7H3a1 1 0 0 0-1 1v2a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-2a1 1 0 0 0-1-1ZM6 7a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v7H6V7Zm14 10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-1h16v1Z"/></svg>  <select value="auto" class="astro-4yphtoen"> <option value="dark" class="astro-4yphtoen">Dark</option><option value="light" class="astro-4yphtoen">Light</option><option value="auto" selected="true" class="astro-4yphtoen">Auto</option> </select> <svg aria-hidden="true" class="icon caret astro-4yphtoen astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M17 9.17a1 1 0 0 0-1.41 0L12 12.71 8.46 9.17a1 1 0 1 0-1.41 1.42l4.24 4.24a1.002 1.002 0 0 0 1.42 0L17 10.59a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </label>  </starlight-theme-select>  <script>
	StarlightThemeProvider.updatePickers();
</script>   </div> </div> </header> <nav class="sidebar astro-vrdttmbt" aria-label="Main"> <starlight-menu-button class="astro-jif73yzw"> <button aria-expanded="false" aria-label="Menu" aria-controls="starlight__sidebar" class="sl-flex md:sl-hidden astro-jif73yzw"> <svg aria-hidden="true" class="astro-jif73yzw astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M3 8h18a1 1 0 1 0 0-2H3a1 1 0 0 0 0 2Zm18 8H3a1 1 0 0 0 0 2h18a1 1 0 0 0 0-2Zm0-5H3a1 1 0 0 0 0 2h18a1 1 0 0 0 0-2Z"/></svg>  </button> </starlight-menu-button>    <div id="starlight__sidebar" class="sidebar-pane astro-vrdttmbt"> <div class="sidebar-content sl-flex astro-vrdttmbt"> <ul class="top-level astro-3ii7xxms"> <li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <div class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Overview</span>  </div> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </summary> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/it_docs/all/algorithms__data_structures/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Algorithms and Data Structures</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/it_docs/all/architecture/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Architecture</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/it_docs/all/backend/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">BackEnd</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/it_docs/all/cli/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">CLI</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/it_docs/all/code_complete_2-steve_mcconnel/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Notes of &quot;Code Complete 2nd edition&quot; by Steve McConnel</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/it_docs/all/code_snippets/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Code_Snippets</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/it_docs/all/css/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">CSS</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/it_docs/all/design/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Design</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/it_docs/all/fintech/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Fintech</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/it_docs/all/frontend/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">FrontEnd</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/it_docs/all/general/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">General</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/it_docs/all/it/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">IT</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/it_docs/all/js/" aria-current="page" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">JS</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/it_docs/all/optimization/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Optimization</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/it_docs/all/react/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">React</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/it_docs/all/security/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Security</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/it_docs/all/software_engineering_at_google-oreilly/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Notes of &quot;Software Engineering at Google&quot; by O&#39;Reilly</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/it_docs/all/system_design/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">System_Design</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/it_docs/all/testing/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Testing</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/it_docs/all/ts/" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">TS</span>  </a> </li> </ul>  </details> </li> </ul>  <div class="md:sl-hidden"> <div class="mobile-preferences sl-flex astro-wu23bvmt"> <div class="sl-flex social-icons astro-wu23bvmt"> <a href="https://github.com/GGsmou" rel="me" class="sl-flex astro-wy4te6ga"><span class="sr-only astro-wy4te6ga">GitHub</span><svg aria-hidden="true" class="astro-wy4te6ga astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg> </a> </div> <starlight-theme-select>  <label style="--sl-select-width: 6.25em" class="astro-4yphtoen"> <span class="sr-only astro-4yphtoen">Select theme</span> <svg aria-hidden="true" class="icon label-icon astro-4yphtoen astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21 14h-1V7a3 3 0 0 0-3-3H7a3 3 0 0 0-3 3v7H3a1 1 0 0 0-1 1v2a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-2a1 1 0 0 0-1-1ZM6 7a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v7H6V7Zm14 10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-1h16v1Z"/></svg>  <select value="auto" class="astro-4yphtoen"> <option value="dark" class="astro-4yphtoen">Dark</option><option value="light" class="astro-4yphtoen">Light</option><option value="auto" selected="true" class="astro-4yphtoen">Auto</option> </select> <svg aria-hidden="true" class="icon caret astro-4yphtoen astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M17 9.17a1 1 0 0 0-1.41 0L12 12.71 8.46 9.17a1 1 0 1 0-1.41 1.42l4.24 4.24a1.002 1.002 0 0 0 1.42 0L17 10.59a1.002 1.002 0 0 0 0-1.42Z"/></svg>  </label>  </starlight-theme-select>  <script>
	StarlightThemeProvider.updatePickers();
</script>   </div>  </div> </div> </div> </nav> <div class="main-frame astro-vrdttmbt">  <div class="lg:sl-flex astro-67yu43on"> <aside class="right-sidebar-container astro-67yu43on"> <div class="right-sidebar astro-67yu43on"> <div class="lg:sl-hidden astro-pb3aqygn"><mobile-starlight-toc data-min-h="2" data-max-h="6" class="astro-doynk5tl"><nav aria-labelledby="starlight__on-this-page--mobile" class="astro-doynk5tl"><details id="starlight__mobile-toc" class="astro-doynk5tl"><summary id="starlight__on-this-page--mobile" class="sl-flex astro-doynk5tl"><div class="toggle sl-flex astro-doynk5tl">On this page<svg aria-hidden="true" class="caret astro-doynk5tl astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg> </div><span class="display-current astro-doynk5tl"></span></summary><div class="dropdown astro-doynk5tl"><ul class="isMobile astro-g2bywc46" style="--depth: 0;"> <li class="astro-g2bywc46" style="--depth: 0;"> <a href="#_top" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Overview</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#other" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Other</span> </a> <ul class="isMobile astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#node-shortcuts" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Node shortcuts</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#jsdoc" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">JSDoc</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#interesting" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Interesting</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#stop-throwing-errors" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Stop Throwing Errors</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#data-normalizing" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Data normalizing</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#v8" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">V8</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#regex-regular-expression" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Regex (Regular Expression)</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#blob" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Blob</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#service-worker" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Service Worker</span> </a> <ul class="isMobile astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#use-cases" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Use Cases</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#life-cycle" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Life Cycle</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#other-1" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Other</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#lodash" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Lodash</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#requests" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Requests</span> </a> <ul class="isMobile astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#ajax" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Ajax</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#xmlhttp" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">XMLHTTP</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#fetch" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Fetch</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#axios" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Axios</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#eventloop---nodejs" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">EventLoop - Node.js</span> </a> <ul class="isMobile astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#nodejs" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Node.js</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#eventqueue---markrotasks" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">EventQueue - MarkroTasks</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#eventqueue---microtasks" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">EventQueue - MicroTasks</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#eventloop" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">EventLoop</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#esmodules" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">EsModules</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#libuv" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">libuv</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#other-2" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Other</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#eventloop---browser" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">EventLoop - Browser</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#regex-in-js" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Regex In JS</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#general-patterns" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">General Patterns</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#you-dont-know-js-book" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">You don’t know JS book</span> </a> <ul class="isMobile astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#naming-and-spec" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Naming and Spec</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#updates" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Updates</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#interpretation" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Interpretation</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#webassemblywasm" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">WebAssembly(WASM)</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#strict" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Strict</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#files" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Files</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#values" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Values</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#var-let-const" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Var, let, const</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#functions" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Functions</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#comparisons" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Comparisons</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#code-organization" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Code Organization</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#iteration" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Iteration</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#closures" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Closures</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#this" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">This</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#prototype" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Prototype</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#scope" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Scope</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#why-js-uniq" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Why JS Uniq</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#values-and-references" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Values and References</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#function-forms" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Function forms</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#coercive-in-conditionals" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Coercive in conditionals</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#prototypal-classes" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Prototypal “Classes”</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#practice-1" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Practice 1</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#code-compiling" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Code compiling</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#modifying-scope-on-fly" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Modifying scope on-fly</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#lexical-scope" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Lexical scope</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#lookup-failures" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Lookup failures</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#scope-chain" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Scope Chain</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#shadowing" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Shadowing</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#two-files-one-program" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Two files, one program</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#global-scope" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Global Scope</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#hoisting" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Hoisting</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#re-declaration" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Re-Declaration</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#const" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Const</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#tdz" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">TDZ</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#scope-exposure" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Scope Exposure</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#scoping-with-functions" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Scoping with functions</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#scoping-with-blocks" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Scoping with blocks</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#closure" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Closure</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#closure-lifetime" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Closure lifetime</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#module-pattern" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Module pattern</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#scope-deep-dive" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Scope deep dive</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#functions-naming" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Functions naming</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#tdz-origin" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">TDZ origin</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#callbacks" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Callbacks</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#more-about-modules" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">More about Modules</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#objects" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Objects</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#object-apis" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Object APIs</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#property-descriptors" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Property Descriptors</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#sub-types-of-objects" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Sub-types of Objects</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#object-characteristics" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Object characteristics</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#prototype-chaining" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Prototype chaining</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#oop-101" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">OOP 101</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#class" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Class</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#static-properties" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Static properties</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#private-properties" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Private properties</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#this-1" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">This</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#this-in-arrow-function" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">This in arrow function</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#this-corner-cases" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">This corner cases</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#delegation-in-js" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Delegation in JS</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#primitives" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Primitives</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#nullish" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Null’ish</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#boolean" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Boolean</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#string" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">String</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#number" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Number</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#ieee-754-101" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">IEEE-754 101</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#nan" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">NaN</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#bigint" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">BigInt</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#symbol" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Symbol</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#dive-into-primitives" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Dive into primitives</span> </a> <ul class="isMobile astro-g2bywc46" style="--depth: 2;"> <li class="astro-g2bywc46" style="--depth: 2;"> <a href="#strings" class="astro-g2bywc46" style="--depth: 2;"> <span class="astro-g2bywc46" style="--depth: 2;">Strings</span> </a> <ul class="isMobile astro-g2bywc46" style="--depth: 3;"> <li class="astro-g2bywc46" style="--depth: 3;"> <a href="#number-1" class="astro-g2bywc46" style="--depth: 3;"> <span class="astro-g2bywc46" style="--depth: 3;">Number</span> </a>  </li> </ul>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#objects-1" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Objects</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#coercion" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Coercion</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#more-about-types" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">More about types</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#async" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Async</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#callbacks-1" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Callbacks</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#promise" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Promise</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#generators" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Generators</span> </a> <ul class="isMobile astro-g2bywc46" style="--depth: 2;"> <li class="astro-g2bywc46" style="--depth: 2;"> <a href="#generators-with-async" class="astro-g2bywc46" style="--depth: 2;"> <span class="astro-g2bywc46" style="--depth: 2;">Generators with Async</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 2;"> <a href="#generator-delegation" class="astro-g2bywc46" style="--depth: 2;"> <span class="astro-g2bywc46" style="--depth: 2;">Generator delegation</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 2;"> <a href="#thunk" class="astro-g2bywc46" style="--depth: 2;"> <span class="astro-g2bywc46" style="--depth: 2;">Thunk</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 2;"> <a href="#pre-es6-generators" class="astro-g2bywc46" style="--depth: 2;"> <span class="astro-g2bywc46" style="--depth: 2;">Pre-ES6 Generators</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#performance" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Performance</span> </a> <ul class="isMobile astro-g2bywc46" style="--depth: 2;"> <li class="astro-g2bywc46" style="--depth: 2;"> <a href="#webworkers" class="astro-g2bywc46" style="--depth: 2;"> <span class="astro-g2bywc46" style="--depth: 2;">WebWorkers</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 2;"> <a href="#sharedworkers" class="astro-g2bywc46" style="--depth: 2;"> <span class="astro-g2bywc46" style="--depth: 2;">SharedWorkers</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 2;"> <a href="#simd" class="astro-g2bywc46" style="--depth: 2;"> <span class="astro-g2bywc46" style="--depth: 2;">SIMD</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 2;"> <a href="#asmjs" class="astro-g2bywc46" style="--depth: 2;"> <span class="astro-g2bywc46" style="--depth: 2;">Asm.js</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#benchmarking" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Benchmarking</span> </a> <ul class="isMobile astro-g2bywc46" style="--depth: 2;"> <li class="astro-g2bywc46" style="--depth: 2;"> <a href="#tail-call-optimizationtco" class="astro-g2bywc46" style="--depth: 2;"> <span class="astro-g2bywc46" style="--depth: 2;">Tail Call Optimization(TCO)</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#async-patterns" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Async Patterns</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#clean-code-js" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Clean Code JS</span> </a> <ul class="isMobile astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#variables" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Variables</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#functions-1" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Functions</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#objects-and-data-structures" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Objects and Data structures</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#solid" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Solid</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#testing" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Testing</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#error-handling" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Error handling</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#formatting" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Formatting</span> </a>  </li> </ul>  </li> </ul> </div></details></nav></mobile-starlight-toc></div><div class="right-sidebar-panel sl-hidden lg:sl-block astro-pb3aqygn"><div class="sl-container astro-pb3aqygn"><starlight-toc data-min-h="2" data-max-h="6"><nav aria-labelledby="starlight__on-this-page"><h2 id="starlight__on-this-page">On this page</h2><ul class="astro-g2bywc46" style="--depth: 0;"> <li class="astro-g2bywc46" style="--depth: 0;"> <a href="#_top" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Overview</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#other" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Other</span> </a> <ul class="astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#node-shortcuts" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Node shortcuts</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#jsdoc" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">JSDoc</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#interesting" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Interesting</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#stop-throwing-errors" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Stop Throwing Errors</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#data-normalizing" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Data normalizing</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#v8" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">V8</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#regex-regular-expression" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Regex (Regular Expression)</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#blob" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Blob</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#service-worker" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Service Worker</span> </a> <ul class="astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#use-cases" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Use Cases</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#life-cycle" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Life Cycle</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#other-1" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Other</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#lodash" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Lodash</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#requests" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Requests</span> </a> <ul class="astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#ajax" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Ajax</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#xmlhttp" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">XMLHTTP</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#fetch" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Fetch</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#axios" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Axios</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#eventloop---nodejs" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">EventLoop - Node.js</span> </a> <ul class="astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#nodejs" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Node.js</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#eventqueue---markrotasks" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">EventQueue - MarkroTasks</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#eventqueue---microtasks" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">EventQueue - MicroTasks</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#eventloop" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">EventLoop</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#esmodules" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">EsModules</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#libuv" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">libuv</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#other-2" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Other</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#eventloop---browser" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">EventLoop - Browser</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#regex-in-js" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Regex In JS</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#general-patterns" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">General Patterns</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#you-dont-know-js-book" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">You don’t know JS book</span> </a> <ul class="astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#naming-and-spec" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Naming and Spec</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#updates" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Updates</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#interpretation" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Interpretation</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#webassemblywasm" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">WebAssembly(WASM)</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#strict" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Strict</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#files" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Files</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#values" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Values</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#var-let-const" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Var, let, const</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#functions" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Functions</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#comparisons" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Comparisons</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#code-organization" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Code Organization</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#iteration" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Iteration</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#closures" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Closures</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#this" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">This</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#prototype" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Prototype</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#scope" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Scope</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#why-js-uniq" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Why JS Uniq</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#values-and-references" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Values and References</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#function-forms" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Function forms</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#coercive-in-conditionals" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Coercive in conditionals</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#prototypal-classes" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Prototypal “Classes”</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#practice-1" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Practice 1</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#code-compiling" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Code compiling</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#modifying-scope-on-fly" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Modifying scope on-fly</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#lexical-scope" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Lexical scope</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#lookup-failures" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Lookup failures</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#scope-chain" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Scope Chain</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#shadowing" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Shadowing</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#two-files-one-program" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Two files, one program</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#global-scope" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Global Scope</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#hoisting" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Hoisting</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#re-declaration" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Re-Declaration</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#const" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Const</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#tdz" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">TDZ</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#scope-exposure" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Scope Exposure</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#scoping-with-functions" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Scoping with functions</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#scoping-with-blocks" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Scoping with blocks</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#closure" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Closure</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#closure-lifetime" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Closure lifetime</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#module-pattern" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Module pattern</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#scope-deep-dive" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Scope deep dive</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#functions-naming" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Functions naming</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#tdz-origin" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">TDZ origin</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#callbacks" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Callbacks</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#more-about-modules" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">More about Modules</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#objects" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Objects</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#object-apis" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Object APIs</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#property-descriptors" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Property Descriptors</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#sub-types-of-objects" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Sub-types of Objects</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#object-characteristics" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Object characteristics</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#prototype-chaining" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Prototype chaining</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#oop-101" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">OOP 101</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#class" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Class</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#static-properties" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Static properties</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#private-properties" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Private properties</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#this-1" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">This</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#this-in-arrow-function" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">This in arrow function</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#this-corner-cases" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">This corner cases</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#delegation-in-js" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Delegation in JS</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#primitives" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Primitives</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#nullish" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Null’ish</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#boolean" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Boolean</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#string" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">String</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#number" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Number</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#ieee-754-101" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">IEEE-754 101</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#nan" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">NaN</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#bigint" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">BigInt</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#symbol" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Symbol</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#dive-into-primitives" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Dive into primitives</span> </a> <ul class="astro-g2bywc46" style="--depth: 2;"> <li class="astro-g2bywc46" style="--depth: 2;"> <a href="#strings" class="astro-g2bywc46" style="--depth: 2;"> <span class="astro-g2bywc46" style="--depth: 2;">Strings</span> </a> <ul class="astro-g2bywc46" style="--depth: 3;"> <li class="astro-g2bywc46" style="--depth: 3;"> <a href="#number-1" class="astro-g2bywc46" style="--depth: 3;"> <span class="astro-g2bywc46" style="--depth: 3;">Number</span> </a>  </li> </ul>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#objects-1" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Objects</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#coercion" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Coercion</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#more-about-types" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">More about types</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#async" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Async</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#callbacks-1" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Callbacks</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#promise" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Promise</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#generators" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Generators</span> </a> <ul class="astro-g2bywc46" style="--depth: 2;"> <li class="astro-g2bywc46" style="--depth: 2;"> <a href="#generators-with-async" class="astro-g2bywc46" style="--depth: 2;"> <span class="astro-g2bywc46" style="--depth: 2;">Generators with Async</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 2;"> <a href="#generator-delegation" class="astro-g2bywc46" style="--depth: 2;"> <span class="astro-g2bywc46" style="--depth: 2;">Generator delegation</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 2;"> <a href="#thunk" class="astro-g2bywc46" style="--depth: 2;"> <span class="astro-g2bywc46" style="--depth: 2;">Thunk</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 2;"> <a href="#pre-es6-generators" class="astro-g2bywc46" style="--depth: 2;"> <span class="astro-g2bywc46" style="--depth: 2;">Pre-ES6 Generators</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#performance" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Performance</span> </a> <ul class="astro-g2bywc46" style="--depth: 2;"> <li class="astro-g2bywc46" style="--depth: 2;"> <a href="#webworkers" class="astro-g2bywc46" style="--depth: 2;"> <span class="astro-g2bywc46" style="--depth: 2;">WebWorkers</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 2;"> <a href="#sharedworkers" class="astro-g2bywc46" style="--depth: 2;"> <span class="astro-g2bywc46" style="--depth: 2;">SharedWorkers</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 2;"> <a href="#simd" class="astro-g2bywc46" style="--depth: 2;"> <span class="astro-g2bywc46" style="--depth: 2;">SIMD</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 2;"> <a href="#asmjs" class="astro-g2bywc46" style="--depth: 2;"> <span class="astro-g2bywc46" style="--depth: 2;">Asm.js</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#benchmarking" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Benchmarking</span> </a> <ul class="astro-g2bywc46" style="--depth: 2;"> <li class="astro-g2bywc46" style="--depth: 2;"> <a href="#tail-call-optimizationtco" class="astro-g2bywc46" style="--depth: 2;"> <span class="astro-g2bywc46" style="--depth: 2;">Tail Call Optimization(TCO)</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#async-patterns" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Async Patterns</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#clean-code-js" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Clean Code JS</span> </a> <ul class="astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#variables" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Variables</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#functions-1" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Functions</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#objects-and-data-structures" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Objects and Data structures</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#solid" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Solid</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#testing" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Testing</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#error-handling" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Error handling</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#formatting" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Formatting</span> </a>  </li> </ul>  </li> </ul> </nav></starlight-toc></div></div> </div> </aside> <div class="main-pane astro-67yu43on">  <main data-pagefind-body lang="en" dir="ltr" class="astro-bguv2lll">    <div class="content-panel astro-7nkwcw3z"> <div class="sl-container astro-7nkwcw3z"> <h1 id="_top" class="astro-j6tvhyss">JS</h1>  </div> </div>  <div class="content-panel astro-7nkwcw3z"> <div class="sl-container astro-7nkwcw3z"> <div class="sl-markdown-content"> <h2 id="other">Other</h2>
<p>By using flag <code dir="auto">--require ./path/toFile.js</code> for <code dir="auto">node</code> we can add some file to be called with main file we call</p>
<ul>
<li>usage: add some global module that is not required in other files</li>
</ul>
<h4 id="node-shortcuts">Node shortcuts</h4>
<p>npm run start -> npm start -> npm s?
npm install -> npm i
npm run test -> npm test -> npm t</p>
<h4 id="jsdoc">JSDoc</h4>
<p>add typing to functions with native JS</p>
<p>to use, add comment before function in this format:</p>
<div class="expressive-code"><link rel="stylesheet" href="/it_docs/_astro/ec.usa2f.css"><script type="module" src="/it_docs/_astro/ec.sgewm.js"></script><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#809191;--1:#616671">/**</span></div><div class="ec-line"><span style="--0:#809191;--1:#616671">* </span><span style="--0:#C792EA;--1:#8D46B4">@param</span><span style="--0:#809191;--1:#616671"> </span><span style="--0:#7690A6;--1:#4F687D">{number}</span><span style="--0:#809191;--1:#616671"> </span><span style="--0:#78CCF0;--1:#406C80">a</span></div><div class="ec-line"><span style="--0:#809191;--1:#616671">* </span><span style="--0:#C792EA;--1:#8D46B4">@param</span><span style="--0:#809191;--1:#616671"> </span><span style="--0:#7690A6;--1:#4F687D">{string}</span><span style="--0:#809191;--1:#616671"> </span><span style="--0:#78CCF0;--1:#406C80">b</span></div><div class="ec-line"><span style="--0:#809191;--1:#616671">*/</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="/*** @param {number} a* @param {string} b*/"><div></div></button></div></figure></div>
<h4 id="interesting">Interesting</h4>
<ul>
<li>if you declare variable inside <code dir="auto">&#x3C;script></code> tag it will become global</li>
</ul>
<h4 id="stop-throwing-errors">Stop Throwing Errors</h4>
<p>JS doesn’t treat errors as values, so we can’t be sure that function won’t throw at runtime without knowing it’s implementation</p>
<ul>
<li>this leads to risk of missing try/catch</li>
</ul>
<p>we can fix it by using explicit return type like this:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">type</span><span style="--0:#D6DEEB;--1:#403F53"> Return </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> {success</span><span style="--0:#7FDBCA;--1:#097174">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">false</span><span style="--0:#D6DEEB;--1:#403F53">; error</span><span style="--0:#7FDBCA;--1:#097174">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#111111">Error</span><span style="--0:#D6DEEB;--1:#403F53">} </span><span style="--0:#7FDBCA;--1:#097174">|</span><span style="--0:#D6DEEB;--1:#403F53"> {success</span><span style="--0:#7FDBCA;--1:#097174">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">true</span><span style="--0:#D6DEEB;--1:#403F53">; data</span><span style="--0:#7FDBCA;--1:#097174">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#111111">SomeDataType</span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="type Return = {success: false; error: Error} | {success: true; data: SomeDataType}"><div></div></button></div></figure></div>
<p>now we can be sure that function might return error, as well as handle it without try/catch</p>
<p>it is not always best solution, because sometimes it is good to throw error, so some middleware or other catcher will catch and handle it, but this strategy is useful</p>
<h2 id="data-normalizing">Data normalizing</h2>
<p>Data normalizing - process of transforming arbitrary list of data to list where we have one entity at a time and in other places we have links to this entity</p>
<h2 id="v8">V8</h2>
<p>JS engine by google</p>
<p>Compiles js into machine code with features like caching, optimizing, garbage collection etc
Used in browsers and Node.js</p>
<p>Code inside <code dir="auto">try {}</code> is not optimized and usually slower</p>
<h2 id="regex-regular-expression">Regex (Regular Expression)</h2>
<p>Regex is used to validate/filter some text data
Works by comparing substr inside str</p>
<p>Regex is heavy operation, so better use simple expressions for small data sets</p>
<ul>
<li>sometimes better use self written solution</li>
</ul>
<h2 id="blob">Blob</h2>
<p>Blob - binary large object, used in JS as basic protocol for working with binary data</p>
<ul>
<li>can be streamed</li>
<li>there is blob->link conversion API, which is useful in cases, where you need to represent in-memory file via HTML element with src(or download via <code dir="auto">a.href</code>)
<ul>
<li>to force download from JS we can create invisible <code dir="auto">a</code> component and <code dir="auto">.click()</code></li>
</ul>
</li>
</ul>
<h2 id="service-worker">Service Worker</h2>
<p>Service worker - browser api</p>
<ul>
<li>
<p>for simplicity we can call it as hybrid of proxy and js(file) between client and browser</p>
</li>
<li>
<p>have ability to cache, work with requests etc</p>
</li>
<li>
<p>async</p>
</li>
<li>
<p>can’t work with DOM directly</p>
</li>
<li>
<p>is some file, that is scoped by page, globaly etc</p>
<ul>
<li>if we have global and scoped sw on page only scoped will work</li>
</ul>
</li>
</ul>
<h4 id="use-cases">Use Cases</h4>
<ul>
<li>usually used with listening fetch event</li>
<li>caching (work with <code dir="auto">caches</code> obj)
<ul>
<li>can make website work offline</li>
<li>usually better to init cache on install</li>
</ul>
</li>
</ul>
<h4 id="life-cycle">Life Cycle</h4>
<ul>
<li>Register. Triggers every time.
<ul>
<li>cases other steps</li>
</ul>
</li>
<li>Download. Can be seen in network, on registration
<ul>
<li>if registered won’t be reregistered later</li>
</ul>
</li>
<li>Install. Goes directly after download and linked to it
<ul>
<li>can be listened as event</li>
</ul>
</li>
<li>Activation. Indicates that service worker is ready to work
<ul>
<li>can be listened as event</li>
<li>not always instantly triggered after install, so we can <code dir="auto">self.skipWaiting()</code> on install stage</li>
</ul>
</li>
<li>Update. Triggered after changes inside js file, after ~24hours of AFK
<ul>
<li>causes downloading, installing and activation again</li>
</ul>
</li>
</ul>
<h4 id="other-1">Other</h4>
<ul>
<li>if we change request we will see old request and changed response</li>
<li>active not working for first time, can be fixed with <code dir="auto">event.waintUntil(clients.claim())</code> on activate</li>
<li>can’t communicate directly, only with messages</li>
<li>external lib: work box</li>
</ul>
<h2 id="lodash">Lodash</h2>
<p>utility library to work with different data structures in compact and clean way</p>
<p>it is good practice to check if some method is present before writing it</p>
<p>popular methods are(by convention lodash is imported as <code dir="auto">_</code>):</p>
<ul>
<li><code dir="auto">.sumBy(arr, () => number)</code> // calculate sum from array</li>
<li><code dir="auto">.get(obj, 'location.to[1].propertie', default)</code> // find some data from nested obj by path</li>
<li><code dir="auto">.groupBy(arr, () => propertie)</code> // group list of data by some field</li>
<li><code dir="auto">.deepClone(obj)</code> // return a deep cope of some obj</li>
<li><code dir="auto">.uniqBy(arr, 'field')</code> // filters array of objects to be unique by some properte
<ul>
<li><code dir="auto">.sortBy</code>, <code dir="auto">.orderBy</code> // same, action is described in name</li>
</ul>
</li>
<li><code dir="auto">.isEmpty(arr)</code> // checks if array is empty or even present
<ul>
<li>native clean way: <code dir="auto">arr?.length > 0</code></li>
</ul>
</li>
<li><code dir="auto">.isEqual(obj1, obj2)</code> // check for deep equality</li>
</ul>
<h2 id="requests">Requests</h2>
<h4 id="ajax">Ajax</h4>
<p>Tool to reload-less client-server communication</p>
<h4 id="xmlhttp">XMLHTTP</h4>
<p>Old, native, everywhere supported method to request some data</p>
<p>pros:</p>
<ul>
<li>you can track downloading progress, so it is great for file upload related stuff</li>
</ul>
<h4 id="fetch">Fetch</h4>
<p>Modern, well supported, native way of doing HTTP requests</p>
<h4 id="axios">Axios</h4>
<p>Similar to Fetch, but it is a lib with some additional features, like middlewares</p>
<h2 id="eventloop---nodejs">EventLoop - Node.js</h2>
<h4 id="nodejs">Node.js</h4>
<p>Node.js - JS runtime build on top of V8 Chrome Engine, with event-driven, non blocking I/O model</p>
<p>I/O - input / output and refers to communication with PC’s CPU</p>
<ul>
<li>libuv lib is handling multiplatform async work with I/O for Node.js</li>
<li><img  src="/it_docs/_astro/it_6.iV9ciTG0_Z2qQU5a.webp" alt="" width="1400" height="1084" loading="lazy" decoding="async"></li>
</ul>
<p>Event-Driven model is based on Reactor pattern</p>
<ul>
<li>make I/O request(fs.read) -> passed to EventLoop -> passed to Event Demultiplexer -> calls C++ function -> result goes back to Event Demultiplexer -> result is wrapped into event and added to Event Queue -> when call stack is empty our callback is executed with data from event</li>
</ul>
<p>Node.js components</p>
<ul>
<li>V8 - engine for parsing and execution of JS</li>
<li>libuv - provider of EventLoop and I/O operations</li>
<li>core modules - non standard JS modules like http, fs etc</li>
<li>c++ bindings - wrapper to require custom compiled C++ modules
<ul>
<li>can be generated with Node.js compiler and required like this: <code dir="auto">require('./my-cpp-module.node');</code></li>
</ul>
</li>
<li>deps - other small utility libs for low level operations</li>
</ul>
<h4 id="eventqueue---markrotasks">EventQueue - MarkroTasks</h4>
<p>EventLoop - mechanism to semi-infinitelly process and handle events</p>
<p>Events are queued into several queues with different priorities and executed after stack is empty</p>









































<table><thead><tr><th>Queue Name</th><th>Description</th><th>Priority</th><th>Is all events need to be executed</th></tr></thead><tbody><tr><td>Timer</td><td>queue for setTimeout, setInterval</td><td>1</td><td>+</td></tr><tr><td>I/O</td><td>most of async operations(network, system)</td><td>2</td><td>+</td></tr><tr><td>Immediate</td><td>queue for setImmediate(registered and executed as soon as JS picked it up)</td><td>3</td><td>+</td></tr><tr><td>Close events</td><td>queue for closing connection events(DB, TCP etc)</td><td>4</td><td>+</td></tr><tr><td>Empty loop ~= few milliseconds</td><td></td><td></td><td></td></tr></tbody></table>
<p>EventLoop is tracking how many ongoing tasks and when they are done, their count is decreased</p>
<ul>
<li>if equal to 0 loop is exited</li>
</ul>
<p><code dir="auto">setTimeout(..., 0)</code> !== <code dir="auto">setImmediate</code>, because EvebtLoop CAN(not always) be so fast, that timeOut won’t be registered at all for this cycle and will appear at next</p>
<h4 id="eventqueue---microtasks">EventQueue - MicroTasks</h4>
<p>I/O Polling</p>
<ul>
<li>I/O events are added to their queue not when they are ready(as other events), but after I/O polling</li>
</ul>
<p>Between each macrotasks we have JS execution period of time(same as before EventLoop), inside which we have micro tasks as process.nextTick(1 priority) Promise(2 priority), with their own dedicated queues</p>
<ul>
<li>there also others microtasks as MutationObserver, queueMicrotask etc</li>
<li>microtasks are checked by V8, after all JS is executed</li>
</ul>
<p>process.nextTick have the highest priority among all of others, BUT can block EventLoop and kill performance</p>
<p>microtask queues block EventLoop and must be cleared</p>
<p>in Node version &#x3C; 11 microtasks was executed between queues and not macrotasks, but for web compatibility it was changed</p>
<h4 id="eventloop">EventLoop</h4>
<p>EventLoop is not fully part of V8, V8 is only parsing and executing JS + microtasks, but macrotasks are done by libuv</p>
<ul>
<li><img  src="/it_docs/_astro/it_7.DQ8LFofS_1kHcbu.webp" alt="" width="1400" height="864" loading="lazy" decoding="async"></li>
</ul>
<h4 id="esmodules">EsModules</h4>
<p>EsModules are async by design, so when we init our program, inside first EventLoop promises will have highest priority</p>
<h4 id="libuv">libuv</h4>
<p>I/O operations can be:</p>
<ul>
<li>blocking: file, dns etc
<ul>
<li>require different thread</li>
</ul>
</li>
<li>non-blocking: network
<ul>
<li>several tasks can execute in simultaneously</li>
</ul>
</li>
</ul>
<p>for blocking tasks libuv uses Thread Pool, so we can simultaneously execute this tasks on different threads(4 by default if any blocking operation is present in code)
on top of that we have threads that occupied by default for garbage collection etc</p>
<p>DNS lookup is blocking, but can by made it non-blocking with some effort</p>
<h4 id="other-2">Other</h4>
<p>Custom promises(Bluebird.js)</p>
<ul>
<li>Can collet all promises into one macrotask to reduce blocking time</li>
<li>Can executer promises on some other phase</li>
</ul>
<h2 id="eventloop---browser">EventLoop - Browser</h2>
<p>Similar to Node.js EventLoop, BUT with addition to some DOM related tasks and with no strict order in macro/micro tasks queues</p>
<p>Most of the time JS engine doing nothing and runs only when some event, script, handler activates</p>
<p>Rendering happens between macrotasks and blocked by their execution</p>
<ul>
<li>some very heavy tasks can block whole browser(not responsive to user events), so browser might suggest to kill this process with page</li>
</ul>
<p>Same as in Node microtasks queue empties in-between each macrotask</p>
<ul>
<li>microtasks are mostly come from promises, but can be also manually queued by <code dir="auto">queueMicrotask(func)</code></li>
</ul>
<p>macrotasks</p>
<ul>
<li>setTimeout</li>
<li>setInterval</li>
<li>setImmediate</li>
<li>requestAnimationFrame</li>
<li>I/O</li>
<li>UI rendering
microtasks</li>
<li>process.nextTick</li>
<li>Promises</li>
<li>queueMicrotask</li>
<li>MutationObserver</li>
</ul>
<p>Other</p>
<ul>
<li>heavy tasks can be split into smaller once and wrapped into zero second setTimeout, that will not block DOM
<ul>
<li>it is better to setTimeout earlier in code, because even zero second timeout has some delay in it</li>
<li>you can show some loading via this split, because otherwise change in DOM will be shown after whole process is finished</li>
</ul>
</li>
</ul>
<h2 id="regex-in-js">Regex In JS</h2>
<p>To create a regex in JS we can use <code dir="auto">new Regxp("pattern", "flags")</code> or with <code dir="auto">/pattern/flags</code>. This will resolve in Regex object</p>
<p>Methods on Regex object:</p>
<ul>
<li><code dir="auto">.test(string) -> boolean</code> check if string has a match</li>
<li><code dir="auto">.exec(string) -> array | null</code> executes regex and returns array of matching groups
<ul>
<li><code dir="auto">array</code> will include:
<ul>
<li>“0” - matched string</li>
<li>”groups"</li>
<li>"index” - matched string index</li>
<li>”input” - original string</li>
</ul>
</li>
<li>it acts as an iterator and, when there is no left matches it return <code dir="auto">null</code></li>
</ul>
</li>
</ul>
<p>regex flags(5 in-total, most important bellow):</p>
<ul>
<li><code dir="auto">g</code> - search for all matches</li>
<li><code dir="auto">i</code> - case insensitive search</li>
</ul>
<h2 id="general-patterns">General Patterns</h2>
<p>Patters provide common solution for different problems and serve as general guidelines
There are list of JS specific or classical(with modifications) patterns</p>
<ul>
<li>Command - don’t execute methods directly, but create command interface with <code dir="auto">execute</code> method and extend from it, by calling specific method with specific command
<ul>
<li>pros: decouple method usage from it’s user, command can be queued and reverted</li>
<li>cons: boilerplate, complication of code</li>
</ul>
</li>
<li>Factory - create a method that will create class instances
<ul>
<li>in JS we can also just create objects from giving parameters</li>
<li>pros: creation of complex object(with backing env state into them), additional logic(caching, additional calculations), creation of objects with similar interface(but avoiding classes)</li>
<li>cons: <code dir="auto">class</code> is mostly sufficient for this task(but class is still can be used with factory for adding additional logic over default constructor)</li>
</ul>
</li>
<li>Flyweight - split class’s data that is static(newer changes) and dynamic(can be changed often) and break into to classes, store “static” class in some cache, to prevent unneeded object creation(aka RAM usage) and reference it in “dynamic” class
<ul>
<li>in JS we can also bind static and dynamic data via prototype inheritance</li>
<li>pros: less RAM usage with large number of objects created</li>
<li>cons: more complex code(in general you should only use it as optimization matter)</li>
</ul>
</li>
<li>Mediator - remove direct object communication and make them communicate(can be uni and bi directional) with mediator, that delegates all the work between objects and only processes request/result
<ul>
<li>similar pattern is Middleware, that takes request, do smth with it and pass along the chain, where it can be taken by other Middleware or by receiver</li>
<li>pros: less coupling between objects(makes many-to-many communication easier)</li>
</ul>
</li>
<li>Mixin - change inheritance with delegation, by passing mixin object with needed functionality to class and delegate tasks to it
<ul>
<li>NOTE: passing functionality into class is more TS way, so to safely do so you need to specify type of this. Other approach is to modify prototype(not safe operation)</li>
<li>mixin, by itself, can use inheritance</li>
<li>only used to add functionality to other object</li>
<li>example: <code dir="auto">window</code> object, that includes large number of different mixins</li>
</ul>
</li>
<li>Module - logically split code into independent, reusable chunks. With keeping parts of module private
<ul>
<li>JS has many variations of modules, with newest and mostly recommended to use ESModules(import/export syntax)</li>
<li>private fields prevent naming collisions
<ul>
<li>other naming collisions can be prevented via <code dir="auto">as</code> renaming, when importing some part of module</li>
</ul>
</li>
<li>ESM won’t pollute global scope(usually <code dir="auto">window</code> object) with exported parts of module</li>
<li>we can export some part of module as <code dir="auto">default</code> export, which may be useful to indicate main functionality of module(for example react Component is default export, while it’s components, as not main part of module, are just exported)</li>
<li>module can be imported like
<ul>
<li><code dir="auto">import someDefault from ""</code></li>
<li><code dir="auto">import {someExp1, someExp2} from ""</code></li>
<li><code dir="auto">import * as fullModule from ""</code>, where:
<ul>
<li><code dir="auto">fullModule.default</code> -> <code dir="auto">someDefault</code></li>
<li><code dir="auto">fullModule.someExp1</code></li>
<li>note that this way is disregarded, because we might import unnecessary parts of module</li>
<li>we still can’t import private parts of module this way</li>
</ul>
</li>
</ul>
</li>
<li>when working with UI framework, it is a good practice to keep 1 module for 1 component</li>
<li>when conditional or deferred import is needed we can use async <code dir="auto">import("") -> Promise&#x3C;module></code> to do so
<ul>
<li>often used as optimization matter</li>
<li>unlike default imports, we can use template literals here</li>
</ul>
</li>
<li>transpiling is needed, to use modules in pre ES2015 envs
<ul>
<li>basically the will merge modules into one file, with adding scopes via function wrapper</li>
</ul>
</li>
</ul>
</li>
<li>observer - observer object is subscribed to observable object and notified each time, when some event in observable occurs
<ul>
<li>great for working with events and async operations</li>
<li>example: RxJS</li>
<li>pros: separation of concerns(observable monitors events, observer handle function execution)</li>
<li>cons: performance with too many subscribers</li>
</ul>
</li>
<li>prototype - share properties between objects(a way to do inheritance)
<ul>
<li>native to JS(in pre classes we were basically managing prototypes by hand, now we have sugar syntax with classes)
<ul>
<li>basically, when accessing an object method, JS will check object, if it has one, that it’s prototype and on and on and on
<ul>
<li>as an example, <code dir="auto">Object.create(proto)</code> will create object, with assigning passed prototype to it</li>
</ul>
</li>
<li>it is possible, but disregarded, modify prototype on fly</li>
</ul>
</li>
<li>pros: optimization(we only reference one object with needed methods)</li>
</ul>
</li>
<li>provider - if data is needed in many places or somewhere deep in code, it is better to create provider, that will give access to the data, instead of passing it down via the props
<ul>
<li>example: React Context
<ul>
<li>in React, it is common to implement:
<ul>
<li>helper hooks, that call <code dir="auto">useContext(Ctx)</code> and return value, with addition <code dir="auto">null</code> check, that throws, if it used outside context</li>
<li>HOC, that incapsulates logic of context and provides context value</li>
</ul>
<hr>
<ul>
<li>by doing both, we separate logic of getting and providing values from components</li>
</ul>
</li>
</ul>
</li>
<li>use-cases: global data(current theme of an app)</li>
<li>pros: avoid prop drilling(easier to refactor+read code, easier to find origin of value), global state</li>
<li>cons: performance(consumers need to react to each change of context)
<ul>
<li>to deal with performance, just don’t overuse context and break it into smaller one</li>
</ul>
</li>
</ul>
</li>
<li>proxy - add additional behavior to object, by wrapping it fully/partially in proxy
<ul>
<li>basically, proxy adds layer of logic in front of method</li>
<li>we can implement proxy or use built in JS <code dir="auto">Proxy</code> object, that takes original object and config, that will change interactions with passed object
<ul>
<li>common config methods:
<ul>
<li><code dir="auto">get(obj, property)</code></li>
<li><code dir="auto">set(obj, property, value)</code></li>
</ul>
</li>
</ul>
</li>
<li>other API to work with proxies is <code dir="auto">Reflect</code>, basically it is used as sugar to do standard operations easier, like:
<ul>
<li><code dir="auto">obj[property]</code> -> <code dir="auto">Reflect.get(obj, property)</code></li>
<li><code dir="auto">obj[property] = value</code> -> <code dir="auto">Reflect.set(obj, property, value)</code></li>
</ul>
</li>
<li>use-cases: validation, permissions, formatting, logging, debug</li>
<li>be careful with performance</li>
</ul>
</li>
<li>singleton - allow only one instance of a class to be created
<ul>
<li>implementation:
<ul>
<li>generally just store nullable reference to created instance(as static filed), and return it, when user requests via separate method
<ul>
<li>worst noticing, that it might be a good idea to freeze object, thus preventing accidental changes to it from outside</li>
<li>also we can avoid class implementation at all and just create single object + freeze it</li>
</ul>
</li>
<li>in plain JS we need to <code dir="auto">throw</code> in constructor, if instance is no null</li>
<li>in TS we can make constructor private and create a factory to avoid throwing errors</li>
</ul>
</li>
<li>use-cases: global shard state, optimization</li>
<li>drawbacks: global state management problems(hard to test, unexpected behavior in parts that rely on this global state, data flow is unreadable)
<ul>
<li>it is generally considered an anti-pattern(JS also accepts this statement)</li>
<li>of corse we need global state in app, but it is better to use some pre-build solutions, that makes state read-only or implement proper mutation system</li>
</ul>
</li>
</ul>
</li>
<li>static imports - default ESM <code dir="auto">import</code> is example of static imports pattern, which job is to give current module access to parts of other modules + include this parts in final bundle
<ul>
<li>static imports load data in locking sync manner</li>
</ul>
</li>
<li>islands rendering - allow to pre-render static parts of an app on server, with keeping dynamic parts as is(they can hydrate directly on client or via server-side rendering too)
<ul>
<li>drastically improves performance(less JS shipped and ran on client) and CEO(all content is pre-generated) for an app, with keeping it interactive
<ul>
<li>prioritization to content first and interactivity second</li>
<li>better accessibility</li>
</ul>
</li>
<li>ABOUT REHYDRATION
<ul>
<li>it is a process of binding into pre-rendered HTML with shipped near it JS on client
<ul>
<li>differs from default hydration, by including pre-rendering step</li>
</ul>
</li>
<li>can be done in different ways:
<ul>
<li>SSR - fully render on server</li>
<li>Progressive - render part of an app, other parts are rendered and shipped as needed</li>
<li>islands - break app into static and dynamic parts, ships static as is an dynamic with needed JS + do hydration
<ul>
<li>hydration can be done in different moments of time:
<ul>
<li>on client only</li>
<li>on server + rehydrate on client</li>
</ul>
</li>
<li>island is self contained</li>
<li>unlike SSR/Progressive rehydration, one component won’t block other, because their process of hydration is async</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>how to do islands:
<ul>
<li>render static content with no JS on server</li>
<li>dynamic content must be filled with placeholders inside static content + rehydrated as soon as main thread is idle(requestIdleCallback)
<ul>
<li><code dir="auto">requestIdleCallback</code> is used to implement scheduling</li>
</ul>
</li>
<li>allow isomorphic rendering, thus using same code to render on server and on client</li>
</ul>
</li>
<li>examples:
<ul>
<li>Marko - automatically decide wether component is dynamic</li>
<li>Astro - static site generator, that creates lightweight apps, that can use dynamic components from other frameworks. Allows lazy loading
<ul>
<li>was built to work with islands with component based design</li>
</ul>
</li>
<li>Preact(static site generator) + Eleventy(isomorphic compatible components) - combination to do islands, with lazy loading</li>
</ul>
</li>
<li>use-cases: blogs, news, landings, e-commerce etc</li>
<li>DRAWBACKS:
<ul>
<li>not useful for highly interactive pages</li>
<li>new topic(not many guides, patterns and practices are not existent yet)</li>
</ul>
</li>
</ul>
</li>
<li>rendering - there are many modern techniques, when it comes to “where” and “when” to render
<ul>
<li>NOTE: this section is not about general patterns, but kinda a vercel add ;)</li>
<li>main way to choose is by finding best solution to your case, with consideration of UX and DX
<ul>
<li>it will lead to: fast development, fast load times, low cost of processing</li>
<li>remember that each pattern is designed to solve one issue with introducing other tradeoffs
<ul>
<li>in general SSR or progressive hydration is a way to go, but they might be harder to cook, overkill or just not sufficient for some cases</li>
</ul>
</li>
<li>it might be a good solution to choose different patterns to different parts of an app</li>
</ul>
</li>
<li>MAIN CONCEPTS
<ul>
<li>CWV(core web vitals) - set of optimization metrics to improve UX
<ul>
<li>time to first bite</li>
<li>time to interactive</li>
<li>first contentful paint</li>
<li>cumulative layout shift - visual stability of an app, to avoid interface shifts, when content is loaded</li>
<li>largest contetful paint</li>
<li>first input delay - time between user interacts and event is handled</li>
</ul>
</li>
<li>DX points to improve, so product is developed fast and smooth
<ul>
<li>fast build times - build + deploy time</li>
<li>easy rollbacks</li>
<li>low server cost</li>
<li>reliability of an app</li>
<li>performance of dynamic content</li>
<li>scalability(in both ways)</li>
</ul>
</li>
</ul>
</li>
<li>PATTERNS:
<ul>
<li>static rendering - render content on build and keep it as is
<ul>
<li>used together with CDN(caching, faster request processing)</li>
<li>TYPES:
<ul>
<li>plain - render content on build and keep as is, with possibility to add dynamic components with rehydration
<ul>
<li>pros: fast load times, CEO friendly, low cost</li>
<li>cons: only for static content and pages that don’t rely on data</li>
</ul>
</li>
<li>with client-side fetch - render content on build with placeholders, that will be changed to dynamic components with rehydration, that will <code dir="auto">fetch</code> and paint data
<ul>
<li>pros: fast enough load times, CEO friendly, allow dynamic content</li>
<li>cons: harder to scale, more server to keep running, content shift</li>
</ul>
</li>
<li>with server-side backing of the data(getStaticProps) - similar to plain, but with piping dynamic data to HTML, when building it
<ul>
<li>similar to plain, but with slower build times</li>
<li>also, we might need separate service for better separation of concerns
<ul>
<li>it might be costly to do API calls on each build</li>
</ul>
</li>
</ul>
</li>
<li>incremental static rendering - generate some pages at a build time, while other are generated, when user requests them
<ul>
<li>we can easily cache the new generated pages
<ul>
<li>for dynamic pages we need to set invalidate period, so next request will invalidate and trigger regeneration</li>
</ul>
</li>
<li>pros: fast enough load times, CEO friendly</li>
<li>cons: high server cost(for very dynamic content invalidation is near instant, so non-needed invalidations might happen), might be harder to maintain, can’t be user specific, cached only on edge</li>
</ul>
</li>
<li>on-demand incremental static rendering - similar to incremental static rendering, but regenerations happens after event occurs and not invalidation happens
<ul>
<li>pros: fast, cached CDN wide, CEO friendly</li>
<li>cons: can’t be user specific, might be expensive</li>
</ul>
</li>
</ul>
</li>
<li>all in all, good solution for semi-dynamic pages with non-user specific data</li>
</ul>
</li>
<li>server side rendering - HTML is rendered on each request, that allows for highly dynamic pages, with user specific data and possibility auth
<ul>
<li>in it’s core, each request produces custom HTML + with JS bundle send right after to do rehydration</li>
<li>it is fast and easy to build, but pretty slow and costly
<ul>
<li>also might need separate API service for separation of concerns(note that API call will block rendering, so it is better to keep it close or on same server)</li>
</ul>
</li>
<li>it can be optimized wit
<ul>
<li>granular rendering of dynamic and non-dynamic parts(breaking app into islands)</li>
<li>react server components to avoid shipping large dependencies to client</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>bundle splitting - modern JS code is often bundled together in large file, that can be slow to download and pars, which is blocking operation to render page
<ul>
<li>it is useful to split parts of an app into separate bundles, making them load async in background, thus not blocking main thread
<ul>
<li>it is a tradeoff operation, because we enable faster first load, but now need to wait for parts of an app to download, before user can interact with them</li>
<li>it can be nicely done via <code dir="auto">React.Suspense</code> or similar solutions to manage async state
<ul>
<li>it may be problematic to use with SSR, so some lib(like <code dir="auto">loadable</code>) can help here</li>
</ul>
</li>
<li>note that additional bundler config may be required</li>
</ul>
</li>
<li>it is not possible to do auto bundle splitting, so it is mainly used with large libs</li>
</ul>
</li>
<li>animating view transitions - modern browser API to add transitions, between DOM changes(from small toggles to page changes), that is very useful for SPA apps
<ul>
<li>from JS perspective we call <code dir="auto">document.startViewTransition(cb)</code>, where callback will do changes
<ul>
<li>basically browser makes snapshot of DOM state before and after <code dir="auto">cb</code> call, and then do smooth transition in between</li>
</ul>
</li>
<li>by default we will get linear crossfade with some default time, but it can be changed via CSS, like so: <code dir="auto">::view-transition-old(root),::view-transition-new(root) {animation-duration: 2s;animation:...}</code>
<ul>
<li>to do more granular actions, we can add groups via names like so:<code dir="auto">view-transition-name: photo-heading;</code>, to reference elements + specify containment: <code dir="auto">contain: layout;</code>, which allows us to do partial animations, only on this groups</li>
<li>to do navigation animations, we can call <code dir="auto">startViewTransition</code> on navigation, BUT return a promise, that will wait until re-render happened
<ul>
<li>this won’t block interface, when re-render or page fetching happens, but when promise resolves, transition is smoothly performed</li>
<li>for snappier animations we can do alternative approach, by animating out first HTML, wait until new page loaded + animation completed, animate in second HTML, BUT this way we are loosing transitions between elements</li>
<li>all in all, there are plans to do native animations between pages OR you can use some lib :)</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>compressing JS - there are quite a few techniques to compress and split your bundle, so here are some strategies to do so with pros&#x26;cons(some can work against each other)
<ul>
<li>JS is largest, after images, by contribution to page size, so it is important to keep an eye on it’s size</li>
<li>general info
<ul>
<li>mathematically, compressing one big file will make final size smaller, that breaking and compressing it parts</li>
<li>when bundling and serving files use gzip or brotli(better both, so users with newer browser will get better, brotli compressed, data, when still leaving gzip option for older browsers)
<ul>
<li>browser will always tell what it supports via <code dir="auto">Accept-Encoding</code> header, while server uses <code dir="auto">Content-Encoding</code> to indicate one
<ul>
<li>using this headers you can also see, are really files compressed
<ul>
<li>this will be also told by LightHouse report</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>HTTP compression - compress data to take lower space
<ul>
<li>lossy - some data is lost(reasonably), with higher compression, which is great for media files</li>
<li>lossless - data is compressed into less size, but can be precisely restored back</li>
<li>done with gzip, brotly etc on build OR serve step
<ul>
<li>doing on build will result in slower build times, but lower server resources usage and higher compression</li>
<li>you can even do both, but it might be not really useful</li>
</ul>
</li>
</ul>
</li>
<li>minification - reduce file size, by removing unnecessary data(whitespaces, long variable names etc), while keeping code valid
<ul>
<li>common for JS and CSS, but can be used with other files, like HTML etc</li>
<li>as a good practice, library author should provide minified <code dir="auto">.min.js</code> file</li>
<li>done on build step with some tools(pick most popular one ;) )</li>
</ul>
</li>
<li>bundling and splitting code - we can pack together or split or JS code to load all at once, or by some chunks
<ul>
<li>about:
<ul>
<li>module - encapsulated part of program</li>
<li>bundle - modules packed together, after compilations</li>
<li>bundle splitting - breaking bundles into separate parts, for better caching, isolate publishing, deferred downloads</li>
<li>chunk - part of splitted bundle
<ul>
<li>it is important to have always request parts be in base chunk and other are packed together with ranking of needability</li>
<li>all related code should be bundled together</li>
</ul>
</li>
</ul>
</li>
<li>pros/cons:
<ul>
<li>larger chunks will take less total space</li>
<li>smaller chunks will be better cached</li>
<li>if action results in another chunk loading, actions will take longer time than it should</li>
</ul>
</li>
<li>all in all, recommended size is around 10 chunks, but you can break some heavy dependencies or parts of an app into separate chunks
<ul>
<li>it is considered best practice to move 3d-party dependencies into separate chunks</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>import on visibility - pattern to defer load of some data, to point when it becomes visible
<ul>
<li>it can be done to static files like images, API calls(infinite scroll) or even parts of bundle via some libs(<code dir="auto">react-lazyload</code>,<code dir="auto">react-loadable-visibility</code>) or hand rolled
<ul>
<li>all of it is based on <code dir="auto">IntersectionObserver API</code></li>
</ul>
</li>
<li>don’t forget about tradeoff, that now user needs to wait until something is loaded</li>
</ul>
</li>
<li>prefetch - pattern to fetch some data in background, that might be used in future(result in near instant interactions with “non-loaded” data)
<ul>
<li>ways to achieve:
<ul>
<li>HTML: <code dir="auto">&#x3C;link rel="prefetch"></code></li>
<li>HTTP: <code dir="auto">Link: &#x3C;/js/chat-widget.js>; rel=prefetch</code></li>
<li>Service Workers</li>
<li>some custom solution with bundlers</li>
</ul>
</li>
<li>don’t over prefetch, it may cause slowdowns, only do when user will most likely need that data
<ul>
<li>a good rule of thumb is to disable prefetch(if possible) for low tier devices</li>
</ul>
</li>
</ul>
</li>
<li>import on interaction - some heavy parts of an app(often 3-d party) can be loaded async, when user interacts with component, that depends on it
<ul>
<li>if we initially load resource, it will block the thread, so we can make it load in deferred way, BUT it will slow down interaction with this component, so don’t overuse this technique</li>
<li>ways to do:
<ul>
<li>Eager - default way to load right away</li>
<li>lazy on route navigation</li>
<li>lazy on click
<ul>
<li>this is good alternative to SSR, which can lead to poor experience of page loaded, but not yet intractable, WICH won’t happen to lazy click, because we can interact with page, it just takes a bit longer to download smth
<ul>
<li>note that more complex technique includes tracking user clicks and replaying them, when JS is loaded+inited</li>
<li>we can also start loading on hover, but it maybe more resource draining</li>
</ul>
</li>
<li>by doing it async, data that needed by the components will also fetched in async</li>
</ul>
</li>
<li>lazy on scroll into view</li>
<li>prefetch - load after main thread, when idle</li>
<li>preload - load as soon as possible</li>
</ul>
<hr>
<ul>
<li>for your code it is better to do prefetch
<ul>
<li>exception is cases, where user can click on something, before it is prefetched</li>
</ul>
</li>
<li>with 3-d party code you can do it in any point of time</li>
</ul>
</li>
<li>good technique to utilize is some facade component, that acts as placeholder with bare functionality of original code, that loaded in async manner
<ul>
<li>example:
<ul>
<li>video player can be facaded with image and play button and when user clicks, it goes into loading state and replaced by actual player</li>
<li>login button that loads SDK separately</li>
<li>chat button that waits until users needs to chat</li>
</ul>
</li>
</ul>
</li>
<li>how to implement:
<ul>
<li>dynamic async import in JS
<ul>
<li>alternative is to dynamically inject JS <code dir="auto">&#x3C;script></code> into page</li>
</ul>
</li>
<li><code dir="auto">Suspense</code> + <code dir="auto">lazy</code> in React</li>
<li>to break bundle itself proper bundler config is needed</li>
</ul>
</li>
<li>one more technique is to replace embedded code with some static(generated progressively or on build time based on some data) with link to more interactable version</li>
</ul>
</li>
<li>optimize your loading sequence - app performance and WebVitas passage is heavily influenced by how/when we load files
<ul>
<li>what can cause poor loading times:
<ul>
<li>requesting resources in wrong order(web vitals are estimated in specific order)</li>
<li>underutilizing CPU/Network
<ul>
<li>example: if loading files in parallel, CPU will start processing JS much later, then doing it sequentially</li>
</ul>
</li>
<li>heavy 3-d party libs</li>
<li>resource optimization
<ul>
<li>inlining CSS, bundling&#x26;splitting JS, several image sizes(depending on platform, low-quality placeholders), removing dead code
<ul>
<li>JS can also have additional problems with: poor written modules that can’t be tree-shaked, unneeded ES5&#x26;Polyfilling</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>what can be done:
<ul>
<li>inline critical CSS for better FCP OR at least serve it from same origin as HTML with preload
<ul>
<li>for 3d-party CSS you can create a proxy</li>
<li>don’t over-inline, because it causes slower HTML parsing and disables caching</li>
<li>fonts should be requested as soon as possible, with <code dir="auto">preconnect</code>
<ul>
<li>most common solution is to provide font-fallback, but be careful with jumping layouts</li>
</ul>
</li>
</ul>
</li>
<li>for images use low-quality placeholders, with same visual size, but lower resolution(be careful with making it too low and not trigger LCP)
<ul>
<li>if image is not visible, use lazy loading</li>
</ul>
</li>
<li>for JS:
<ul>
<li>be careful with sync 3P scripts</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>tree shaking - process of removing any unused code from bundle
<ul>
<li>unused code means code that don’t used anywhere else or parts of code with no side effects</li>
<li>usually done automatically be bundling system, but can be tricky in some cases
<ul>
<li>general process of doing is to parse code into AST and travers it to determine</li>
</ul>
</li>
<li>EDGE CASES:
<ul>
<li>only ESM modules can be tree shaken</li>
<li>when module is imported it is executed and if such execution contains any side effects(global css or scope modifications etc) it won’t be shaken</li>
</ul>
</li>
</ul>
</li>
<li>preload - <code dir="auto">&#x3C;link rel="preload" /></code> allows to prioritize load of one resource over others, no mater where it is located in document
<ul>
<li>such resource might block any other load, so be careful of overusing it
<ul>
<li>still it can be a great way to load critical resources upfront + in parallel, if done like so: <code dir="auto">&#x3C;link rel="preload" href="emoji-picker.js" as="script" /> &#x3C;script src="emoji-picker.js" async /></code></li>
</ul>
</li>
<li>notes:
<ul>
<li>HTTP preload header has higher priority over script tag</li>
<li>font is best candidate for preloads</li>
<li>img preload has lowest priority</li>
<li>be careful with preloading script, that is a part of dependent(not preloaded) script</li>
<li>server need to server preloaded content with priority too</li>
</ul>
</li>
</ul>
</li>
<li>optimize loading 3d-parties - there are set of best practices for loading external resources
<ul>
<li>where slow-down comes from:
<ul>
<li>calls to 3d-party server</li>
<li>larger resources(bulky JS, unoptimized images etc)</li>
<li>resource influences page in unpredictable way</li>
<li>blocking behavior included into resource</li>
</ul>
</li>
<li>to find pain points use Lighthouse, WPT and Bundlephobia</li>
<li>ways to fix:
<ul>
<li>remove resource OR replace with lightweight alternative</li>
<li>optimize how/when resources are loaded:
<ul>
<li>async/defer for non-critical scripts
<ul>
<li>note that it will lower browser priority for resource</li>
<li>it may be good to even defer some scripts to the point, when page becomes interactive</li>
</ul>
</li>
<li>establish early connections to required origins using resource hints for critical scripts, fonts, CSS, images
<ul>
<li>lower time for getting resource by dns-prefetch or preconnect(includes dns-prefetch)</li>
</ul>
</li>
<li>lazy load non critical or out-of-view resource
<ul>
<li>use <code dir="auto">loading</code> attribute with iframes</li>
<li>use some lib or custom Observer API implementation to defer loading</li>
<li>use facades(self written or 3d-party implementations) + load on interaction
<ul>
<li>be careful with sizings and layout shifts</li>
</ul>
</li>
</ul>
</li>
<li>self-host JS scripts and fonts to lower request trips(no need for TCP handshakes and DNS look-ups)
<ul>
<li>it is also possible that 3d-party have poor caching or compressing</li>
<li>great deal when using with HTTP/2</li>
<li>consider using CDN as storage</li>
<li>don’t forget to update your resources from time to time</li>
</ul>
</li>
<li>use caching via service workers if possible
<ul>
<li>enables better control over cache and offline mode</li>
<li>lowers need to self-host</li>
</ul>
</li>
<li>don’t use resources like Google Tags, reCaptcha etc, on pages, where they are not needed
<ul>
<li>you can even defer their load, on pages where they are truly used</li>
<li>with Google Tags you must not load it, when user denies Cookies</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>there is a great implementation of <code dir="auto">&#x3C;Script></code> component in Next.js, that gives you out of the box optimizations or some libs like Partytown, that do it in agnostic way</li>
</ul>
</li>
<li>list virtualization / windowing - render only part of list/content and change this rendered part onScroll, rather then rendering full list at once
<ul>
<li>all in all just use some lib to handle it, because it is quite tricky
<ul>
<li><em>and I just don’t like the general UX with problems like <code dir="auto">cmd+f</code> search, that related to it :/</em></li>
</ul>
</li>
<li>in its core creates one tall DOM element, that roughly the height of <code dir="auto">elementHeight*numberOfElements</code> and small DOM element, that have scroll overflow and changes what elements are renderd
<ul>
<li>this results in massive performance boost, when talking about ginormous 1k+ lists</li>
<li>it is also possible, but less common, do windows for 2D layouts</li>
<li>also great in combination with infinite scroll
<ul>
<li>user won’t lag himself, by scrolling to long</li>
</ul>
</li>
</ul>
</li>
<li>there is more native approach with CSS’s <code dir="auto">content-visibility:auto</code>, that acts as optimization matter for out of view content, but it is still better to do virtualization for dynamic pages(it is just more efficient)</li>
</ul>
</li>
</ul>
<h2 id="you-dont-know-js-book">You don’t know JS book</h2>
<blockquote>
<p>I’ve also had many people tell me that they quoted some topic/explanation from these books during a job interview, and the interviewer told the candidate they were wrong; indeed, people have reportedly lost out on job offers as a result.</p>
</blockquote>
<h4 id="naming-and-spec">Naming and Spec</h4>
<p>JavaScript is named after Java as branding for “web Java” and name still owned by Oracle
JavaScript/JS has official name ECMAScript(ES) and it is also a standard for how to implement JS(browser, Node.js erc)</p>
<p>TC39 is tech committee that decides on new changes and later addresses them to ECMA</p>
<ul>
<li>TC39 is managing open source proposals too</li>
<li>every proposal are gone gone through 0-4 stages</li>
</ul>
<p>JS engines (ideally) fully implement JS spec
Spec has appendix B that includes some historical inconsistencies in browser JS spec
Some methods like <code dir="auto">alert</code>, <code dir="auto">console.x</code>, <code dir="auto">fs.write</code> etc aren’t in spec, but universal-ish in JS environment</p>
<p>JS is muliy-paradigm lang</p>
<h4 id="updates">Updates</h4>
<p>JS is backward compatible(new changes don’t break old code), but not forwardcompatiable(new changes can’t be run in old version)</p>
<ul>
<li>HTML/CSS are opposite</li>
</ul>
<p>To address forwardcompatiable problem transpiling(babel is most popular) invented</p>
<ul>
<li>transpiling - converting new syntax to old one, like <code dir="auto">let</code> -> <code dir="auto">var</code></li>
</ul>
<p>Transpiling won’t help in new-new-API case, so dev can write polyfill(wrapper for new API that implemented with old APIs)</p>
<ul>
<li>there are library of official polyfills</li>
<li>often babel can add polyfills</li>
</ul>
<h4 id="interpretation">Interpretation</h4>
<p>There two polar types of langs: interpreted and compiled, BUT it is not binary and rather a spectrum</p>
<ul>
<li>interpretation works by executing code line by line
<ul>
<li>any errors are throw in run time</li>
</ul>
</li>
<li>compiling works by converting code to Abstract Syntax Tree (AST), analyzing for static(syntax, type etc) errors, then to binary code and then executed</li>
</ul>
<p>JS has a parsing step and kinda compiled, but not fully</p>
<ul>
<li>kinda, because after parsing it has conversion to optimized binary code(binary intermediate representation), that can be executed by virtual machine aka JS engine(similar to Java)
JS also has Just-In-Time optimizations on BIR(post parsing)</li>
</ul>
<h4 id="webassemblywasm">WebAssembly(WASM)</h4>
<p>In it’s core WASM is tool to convert some lang to binary representation of JS, that can be read by JS VM without need in additional optimizations</p>
<p>It is also suitable like general purpose VM</p>
<ul>
<li>ironically it is hard to WASM to convert JS itself because of lack of type-safety :)</li>
</ul>
<h4 id="strict">Strict</h4>
<p>Optional(highly enforced in new code bases) list of additional rules to make JS safer and cleaner</p>
<ul>
<li>best-practice is Strict + linter + prettier</li>
<li>de facto is default but technically not for backwardcompatability</li>
</ul>
<p>some of strictness comes in form of new Static errors
in strict <code dir="auto">this</code> defaults to <code dir="auto">undefined</code></p>
<p>turned on with <code dir="auto">"use strict";</code> on first line per file</p>
<ul>
<li>can be not on first line if there are comments/blank space above</li>
</ul>
<p>ES6 modules enforces strict</p>
<h4 id="files">Files</h4>
<p>Each file is a program, but executions helps them to organically communicate, by mixing them in a runtime</p>
<ul>
<li>it is done, so if one file throws, other will still operate
Seamless communication is achieved via global scope, BUT after ES6, we can make files to be scoped(modular)</li>
</ul>
<h4 id="values">Values</h4>
<ul>
<li>primitive
<ul>
<li>string - ordered collection of chars, can be defined with quotes(` ’ ”)
<ul>
<li>` - doing interpolation on string, aka resolving some value into string</li>
</ul>
</li>
<li>boolean</li>
<li>number</li>
<li>bigint</li>
<li>null</li>
<li>undefined</li>
<li>symbol - unguessable, uniq value, that can be used as object key
<ul>
<li>created by Symbol(“string”), BUT Symbol(“string”) !== Symbol(“string”)</li>
</ul>
</li>
</ul>
</li>
<li>objects
<ul>
<li>array - special type of object for ordered, numerically indexed collection of items</li>
<li>object - unordered, keyed collection of items with string keys</li>
</ul>
</li>
</ul>
<p>typeof tells type, BUT with some catch :)</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#7FDBCA;--1:#097174">typeof</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">42</span><span style="--0:#D6DEEB;--1:#403F53">;                  </span><span style="--0:#809191;--1:#5E6578">// "number"</span></div><div class="ec-line"><span style="--0:#7FDBCA;--1:#097174">typeof</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">abc</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">;               </span><span style="--0:#809191;--1:#5E6578">// "string"</span></div><div class="ec-line"><span style="--0:#7FDBCA;--1:#097174">typeof</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FF5874;--1:#A54A4A">true</span><span style="--0:#D6DEEB;--1:#403F53">;                </span><span style="--0:#809191;--1:#5E6578">// "boolean"</span></div><div class="ec-line"><span style="--0:#7FDBCA;--1:#097174">typeof</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">undefined</span><span style="--0:#D6DEEB;--1:#403F53">;           </span><span style="--0:#809191;--1:#5E6578">// "undefined"</span></div><div class="ec-line"><span style="--0:#7FDBCA;--1:#097174">typeof</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FF5874;--1:#A54A4A">null</span><span style="--0:#D6DEEB;--1:#403F53">;                </span><span style="--0:#809191;--1:#5E6578">// "object" -- oops, bug!</span></div><div class="ec-line"><span style="--0:#7FDBCA;--1:#097174">typeof</span><span style="--0:#D6DEEB;--1:#403F53"> { </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">a</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53"> };          </span><span style="--0:#809191;--1:#5E6578">// "object"</span></div><div class="ec-line"><span style="--0:#7FDBCA;--1:#097174">typeof</span><span style="--0:#D6DEEB;--1:#403F53"> [</span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">,</span><span style="--0:#F78C6C;--1:#AA0982">2</span><span style="--0:#D6DEEB;--1:#403F53">,</span><span style="--0:#F78C6C;--1:#AA0982">3</span><span style="--0:#D6DEEB;--1:#403F53">];             </span><span style="--0:#809191;--1:#5E6578">// "object"</span></div><div class="ec-line"><span style="--0:#7FDBCA;--1:#097174">typeof</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">function</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">hello</span><span style="--0:#D9F5DD;--1:#111111">()</span><span style="--0:#D6DEEB;--1:#403F53">{};  </span><span style="--0:#809191;--1:#5E6578">// "function"</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="typeof 42;                  // &#x22;number&#x22;typeof &#x22;abc&#x22;;               // &#x22;string&#x22;typeof true;                // &#x22;boolean&#x22;typeof undefined;           // &#x22;undefined&#x22;typeof null;                // &#x22;object&#x22; -- oops, bug!typeof { &#x22;a&#x22;: 1 };          // &#x22;object&#x22;typeof [1,2,3];             // &#x22;object&#x22;typeof function hello(){};  // &#x22;function&#x22;"><div></div></button></div></figure></div>
<p>coercion is converting between types</p>
<p>value can be literal(declared in place) or stored in some var</p>
<h4 id="var-let-const">Var, let, const</h4>
<p><em>junior interview be like</em></p>








































<table><thead><tr><th></th><th>var</th><th>let</th><th>const</th><th>function</th></tr></thead><tbody><tr><td>mutability</td><td>+</td><td>+</td><td>-*</td><td>-</td></tr><tr><td>block scoped</td><td>-</td><td>+</td><td>+</td><td>-</td></tr><tr><td>hoisting</td><td>+</td><td>-</td><td>-</td><td>+</td></tr><tr><td>* - if const is a pointer, it’s referenced value still can be changed, BUT it can be const via TS <code dir="auto">as const</code></td><td></td><td></td><td></td><td></td></tr></tbody></table>
<h4 id="functions">Functions</h4>
<p>We can call JS functions as procedure - collection of statements that can be invoked one or more times, that has output/input</p>
<ul>
<li><code dir="auto">function name(){}</code> - function declaration, with name to func mapping on compile state</li>
<li><code dir="auto">const name = function(){}</code> - function expression(function is assigned to to var as expression), where function is associated with it’s name on runtime</li>
</ul>
<p>JS functions are treated as values(or special type of Object) and can be passed around as in Functional Language</p>
<ul>
<li>function in JS is first-class value</li>
</ul>
<p>Func can receive 0-infinity parameter(local to function vars)</p>
<p>Func can be set as Object param</p>
<h4 id="comparisons">Comparisons</h4>
<ul>
<li>strict equality <code dir="auto">===</code> - compare two values, without possibility of converting types
<ul>
<li>type equality is always checked, but in === it is strictly must be the same</li>
<li>NOTE
<ul>
<li>3 === 3.0 // true</li>
<li>NaN === NaN // false
<ul>
<li>Number.isNan(NaN) // true</li>
<li>Object.is(NaN, NaN) // true</li>
</ul>
</li>
<li>0 === -0 // true
<ul>
<li>Object.is(0, -0) // false</li>
</ul>
</li>
<li>{} === {} || [] === [] etc // false
<ul>
<li>because it is pointers comparison(opposite to structural equality, where we compare content)</li>
</ul>
</li>
</ul>
</li>
<li>coercive comparisons OR loose equality <code dir="auto">==</code> - compare two values, with converting to same type if possible
<ul>
<li>agreed to be dangerous to use</li>
<li><code dir="auto">==</code> and <code dir="auto">===</code> do same value comparison</li>
<li>tend to do primitive numeric comparison</li>
<li>can’t be avoided, because <code dir="auto">> &#x3C; >= &#x3C;=</code> are also coercive :)
<ul>
<li>two strings will resolve in dictionary-like comparison</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="code-organization">Code Organization</h4>
<ul>
<li>classes
<ul>
<li>class defines a “type” of custom data structure that includes data and behavior</li>
<li>class is not a value, but value can be got from class via <code dir="auto">new</code> aka class is instantiated
<ul>
<li>methods can be called only on instances</li>
</ul>
</li>
<li>inheritance is JS is done via <code dir="auto">extends</code> + <code dir="auto">super()</code>, so we can define common parent and extend it’s functional</li>
<li>JS classes also have polymorphism, because they allow children classes to override existing methods</li>
</ul>
</li>
<li>modules
<ul>
<li>have same goal as classes to combine data with behavior, with additional possibility of module interactions</li>
<li>Classic Modules
<ul>
<li>it is similar to classes, but we are creating a function, that incapsulates data and returns some object with methods to interact with data inside
<ul>
<li>factory pattern</li>
</ul>
</li>
</ul>
</li>
<li>ES Modules
<ul>
<li>wrapping function is changed to wrapping file that incapsulates all data and <code dir="auto">exports</code> all behaviors</li>
<li>we can say ESM is a singleton, caze it’s instance created on first <code dir="auto">import</code> and after that other imports receive a reference</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="iteration">Iteration</h4>
<p>It is important to have consistent method to work with large quantity of data, that’s why we have iterator pattern, that can iterate through some set of data and stop iterating at some point</p>
<p>there is <code dir="auto">next()</code> method in JS, that returns object named iterator result, which consists of <code dir="auto">done: bool</code> and <code dir="auto">value: any</code>, where done indicates, that iteration of set is finished</p>
<p><code dir="auto">for of</code> is a syntax to consume iterators
<code dir="auto">...</code> - spread and rest operator</p>
<ul>
<li>SPREAD
<ul>
<li>this form of operator is an iterator consumer</li>
<li>we need some place to spread data into(array, function call)</li>
</ul>
</li>
</ul>
<p>iterator was created as base for iterable values aka value that can be iterated</p>
<ul>
<li>iterator instance created from iterable on demand</li>
<li>string, array, map, set etc - iterable, so we can do smth like this:</li>
</ul>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">const </span><span style="--0:#82AAFF;--1:#3C63B3">greeting</span><span style="--0:#C792EA;--1:#8D46B4"> = </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">Hello</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">const </span><span style="--0:#82AAFF;--1:#3C63B3">chars</span><span style="--0:#C792EA;--1:#8D46B4"> =</span><span style="--0:#D6DEEB;--1:#403F53"> [ </span><span style="--0:#7FDBCA;--1:#097174">...</span><span style="--1:#403F53"><span style="--0:#D7DBE0">greeting</span><span style="--0:#D6DEEB"> ];</span></span></div><div class="ec-line">
</div><div class="ec-line"><span style="--1:#403F53"><span style="--0:#D7DBE0">chars</span><span style="--0:#D6DEEB">; </span></span><span style="--0:#809191;--1:#5E6578">// [ "H", "e", "l", "l", "o" ]</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="const greeting = &#x22;Hello&#x22;;const chars = [ ...greeting ];chars; // [ &#x22;H&#x22;, &#x22;e&#x22;, &#x22;l&#x22;, &#x22;l&#x22;, &#x22;o&#x22; ]"><div></div></button></div></figure></div>
<ul>
<li>map has iterator that returns tuple value in a form of <code dir="auto">[key, value]</code>
<ul>
<li><code dir="auto">.keys()</code> gives us a list of keys</li>
<li><code dir="auto">.values()</code> gives us a list of values</li>
<li><code dir="auto">.entries()</code> gives us tuple, but for any iterable(for array it will be: <code dir="auto">[index, value]</code>)</li>
</ul>
</li>
</ul>
<h4 id="closures">Closures</h4>
<blockquote>
<p>Closure is when a function remembers and continues to access variables from outside its scope, even when the function is executed in a different scope.</p>
</blockquote>
<p>objects don’t have closures, only functions</p>
<p>common closure use-case - async functions, when we close some data inside function, that is executed after some time, but still remembers data</p>
<h4 id="this">This</h4>
<p>Function has two characteristics:</p>
<ul>
<li>scope - attached to function via closure, represents a list of static rules, that controls resolution of references and values. It is attached, when function is defined
<ul>
<li>hidden inside JS engine</li>
</ul>
</li>
<li>context - similar to scope, but attached on call stage and can be accessed via <code dir="auto">this</code>. Context is dynamic and can differ from call to call
<ul>
<li>object, that has properties, that made available for function</li>
<li>this aware function - function, that depends on it’s context</li>
</ul>
</li>
</ul>
<p>if this aware func is called without strict mode, it will look to it’s context and then to global window object, in order to resolve value</p>
<p>WAYS TO MAKE THIS AWARE FUNCTION:</p>
<ul>
<li>call function as object method -> this === object</li>
<li>function.call(obj, arg1, arg2) -> this === obj</li>
<li>function.apply(obj, [arg1, arg2]) -> this === obj</li>
<li>const f = function.bind(obj) -> this(inside f) === obj</li>
</ul>
<p>classes are heavily based on <code dir="auto">this</code></p>
<h4 id="prototype">Prototype</h4>
<p>NOTE: JS is one of not many, who give access to direct object creating</p>
<p><code dir="auto">this</code> is characteristics of a function and prototype is characteristics of an object that helps to resolve property access</p>
<ul>
<li>basically prototype is hidden link between two objects</li>
<li>prototype chain - series of objects linked via prototype
<ul>
<li>it is called “behavior delegation”</li>
</ul>
</li>
<li>prototype helps in delegation(inheritance) of methods
<ul>
<li>by calling some method on current obj, JS will try to find it on this object first, than on it’s prototype in chain and return first occurrence || undefined</li>
</ul>
</li>
</ul>
<p><code dir="auto">const newObj = Object.create(obj)</code> - safe way to set newObj.prototype to obj</p>
<ul>
<li>if obj is null, newObj will have no prototype(event Object.prototype)</li>
</ul>
<p><code dir="auto">this</code> highly benefits from prototypes. It is dynamic in JS and can resolve from different objects. Example:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">var </span><span style="--0:#D7DBE0;--1:#403F53">homework</span><span style="--0:#C792EA;--1:#8D46B4"> = {</span></div><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">    </span><span style="--0:#82AAFF;--1:#3C63B3">study</span><span style="--0:#D9F5DD;--1:#111111">()</span><span style="--0:#C792EA;--1:#8D46B4"> {</span></div><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">        </span><span style="--0:#7FDBCA;--1:#097174">console</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#82AAFF;--1:#3C63B3">log</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D6DEEB;--1:#403F53">`</span><span style="--0:#ECC48D;--1:#3C63B3">Please study </span><span style="--0:#DD6B68;--1:#B73936">${</span><span style="--0:#DD6B68;--1:#B73936"> </span><span style="--0:#7FDBCA;--1:#097174">this</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#7FDBCA;--1:#097174">topic</span><span style="--0:#DD6B68;--1:#B73936"> </span><span style="--0:#DD6B68;--1:#B73936">}</span><span style="--0:#D6DEEB;--1:#403F53">`</span><span style="--0:#D6DEEB;--1:#403F53">)</span><span style="--0:#C792EA;--1:#8D46B4">;</span></div><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">    }</span></div><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">}</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">var </span><span style="--0:#D7DBE0;--1:#403F53">jsHomework</span><span style="--0:#C792EA;--1:#8D46B4"> = </span><span style="--0:#7FDBCA;--1:#097174">Object</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#82AAFF;--1:#3C63B3">create</span><span style="--1:#403F53"><span style="--0:#D6DEEB">(</span><span style="--0:#D7DBE0">homework</span><span style="--0:#D6DEEB">);</span></span></div><div class="ec-line"><span style="--0:#7FDBCA;--1:#097174">jsHomework</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#7FDBCA;--1:#097174">topic</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">JS</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div><div class="ec-line"><span style="--0:#7FDBCA;--1:#097174">jsHomework</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#82AAFF;--1:#3C63B3">study</span><span style="--0:#D6DEEB;--1:#403F53">(); </span><span style="--0:#809191;--1:#5E6578">// Please study JS</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">var </span><span style="--0:#D7DBE0;--1:#403F53">mathHomework</span><span style="--0:#C792EA;--1:#8D46B4"> = </span><span style="--0:#7FDBCA;--1:#097174">Object</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#82AAFF;--1:#3C63B3">create</span><span style="--1:#403F53"><span style="--0:#D6DEEB">(</span><span style="--0:#D7DBE0">homework</span><span style="--0:#D6DEEB">);</span></span></div><div class="ec-line"><span style="--0:#7FDBCA;--1:#097174">mathHomework</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#7FDBCA;--1:#097174">topic</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">Math</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div><div class="ec-line"><span style="--0:#7FDBCA;--1:#097174">mathHomework</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#82AAFF;--1:#3C63B3">study</span><span style="--0:#D6DEEB;--1:#403F53">(); </span><span style="--0:#809191;--1:#5E6578">// Please study Math</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="var homework = {    study() {        console.log(&#x60;Please study ${ this.topic }&#x60;);    }};var jsHomework = Object.create(homework);jsHomework.topic = &#x22;JS&#x22;;jsHomework.study(); // Please study JSvar mathHomework = Object.create(homework);mathHomework.topic = &#x22;Math&#x22;;mathHomework.study(); // Please study Math"><div></div></button></div></figure></div>
<p>as we can see <code dir="auto">this.study</code> resolves from homework, but <code dir="auto">this.topic</code> still from object itself</p>
<h4 id="scope">Scope</h4>
<p>Scope is well defined list of behavioural rules about variable and how engine interacts with them</p>
<p>Lexical scope model</p>
<ul>
<li>scope is a block of code in which variable can be accessed
<ul>
<li>can be nested</li>
<li>variables from higher scope can be accessed, but not from lower</li>
<li>how variables are placed determined at parsing/compiling stage</li>
</ul>
</li>
</ul>
<p>JS is has lexical scope model, BUT with some differences:</p>
<ul>
<li>hoisting - variable can be declared at any place of scope, but treated as it is declared at beginning of it</li>
<li>var-declared - by declaring variable with <code dir="auto">var</code> inside the scope it is accessible outside a block</li>
<li>temporal dead zone(TDZ) - by declaring variable with <code dir="auto">const/let</code> there is a part of program, where you can try to call in-scope variable, but it is not accessible yet, because it is not declared
<ul>
<li>result in <code dir="auto">ReferenceError</code></li>
</ul>
</li>
</ul>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">let </span><span style="--0:#D7DBE0;--1:#403F53">x</span><span style="--0:#C792EA;--1:#8D46B4"> = </span><span style="--0:#F78C6C;--1:#AA0982">10</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">if</span><span style="--0:#D6DEEB;--1:#403F53"> (</span><span style="--0:#FF5874;--1:#A54A4A">true</span><span style="--0:#D6DEEB;--1:#403F53">) {</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">console</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#82AAFF;--1:#3C63B3">log</span><span style="--1:#403F53"><span style="--0:#D6DEEB">(</span><span style="--0:#D7DBE0">x</span><span style="--0:#D6DEEB">); </span></span><span style="--0:#809191;--1:#5E6578">// ReferenceError: Cannot access ‘x’ before</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">let </span><span style="--0:#D7DBE0;--1:#403F53">x</span><span style="--0:#C792EA;--1:#8D46B4"> = </span><span style="--0:#F78C6C;--1:#AA0982">20</span><span style="--0:#D6DEEB;--1:#403F53">; </span><span style="--0:#809191;--1:#5E6578">// decalre</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="let x = 10;if (true) { console.log(x); // ReferenceError: Cannot access ‘x’ before let x = 20; // decalre}"><div></div></button></div></figure></div>
<h4 id="why-js-uniq">Why JS Uniq</h4>
<p>Prototype, Closure+Scope, Types+Type Equality</p>
<h4 id="values-and-references">Values and References</h4>
<p>In JS type determines if our variable will contain value or reference</p>
<p>Primitives are always passed as copies</p>
<p>Object values(like functions, arrays, objects) are stored as reference, so we can pass and copy the pointer, but not value itself</p>
<h4 id="function-forms">Function forms</h4>
<p>We have function declaration and function expression(setting func to var)</p>
<p>Function expression can be done with anonymous function, BUT it and some other functions will still have <code dir="auto">.name</code> property, reflecting declared OR variable name</p>
<ul>
<li>mainly used for stack trace</li>
<li>function expression’s name will be <code dir="auto">""</code> if it is passed as an argument</li>
<li>function is still anonymous because it can’t refer to itself, <code dir="auto">.name</code>  is just metadata</li>
</ul>
<p>We can also declare var with named function expression(name of var and func can be different, BUT <code dir="auto">.name</code> will be from expression)</p>
<p>Generator function can be declared like this:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">function</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">*</span><span style="--0:#82AAFF;--1:#3C63B3">generator</span><span style="--0:#D9F5DD;--1:#111111">()</span><span style="--0:#D6DEEB;--1:#403F53">{</span><span style="--0:#7FDBCA;--1:#097174">...</span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="function *generator(){...}"><div></div></button></div></figure></div>
<p>Generator function - function with between-call state, that can finish it’s execution</p>
<ul>
<li>main usage - write some iterable data structure
example:</li>
</ul>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">function</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">*</span><span style="--0:#82AAFF;--1:#3C63B3">gen</span><span style="--0:#D9F5DD;--1:#111111">()</span><span style="--0:#D6DEEB;--1:#403F53">{</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">  </span><span style="--0:#C792EA;--1:#8D46B4">yield</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">  </span><span style="--0:#C792EA;--1:#8D46B4">yield</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">2</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">}</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">const </span><span style="--0:#82AAFF;--1:#3C63B3">g</span><span style="--0:#C792EA;--1:#8D46B4"> = </span><span style="--0:#82AAFF;--1:#3C63B3">gen</span><span style="--0:#D6DEEB;--1:#403F53">()</span></div><div class="ec-line"><span style="--0:#7FDBCA;--1:#097174">g</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#82AAFF;--1:#3C63B3">next</span><span style="--0:#D6DEEB;--1:#403F53">() </span><span style="--0:#809191;--1:#5E6578">// {value: 1, done: false}</span></div><div class="ec-line"><span style="--0:#7FDBCA;--1:#097174">g</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#82AAFF;--1:#3C63B3">next</span><span style="--0:#D6DEEB;--1:#403F53">() </span><span style="--0:#809191;--1:#5E6578">// {value: 2, done: false}</span></div><div class="ec-line"><span style="--0:#7FDBCA;--1:#097174">g</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#82AAFF;--1:#3C63B3">next</span><span style="--0:#D6DEEB;--1:#403F53">() </span><span style="--0:#809191;--1:#5E6578">// {value: undefined, done: true}</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#82AAFF;--1:#3C63B3">gen</span><span style="--0:#D6DEEB;--1:#403F53">()</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#82AAFF;--1:#3C63B3">next</span><span style="--0:#D6DEEB;--1:#403F53">() </span><span style="--0:#809191;--1:#5E6578">// {value: 1, done: false}</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="function *gen(){  yield 1;  yield 2;}const g = gen()g.next() // {value: 1, done: false}g.next() // {value: 2, done: false}g.next() // {value: undefined, done: true}gen().next() // {value: 1, done: false}"><div></div></button></div></figure></div>
<p>Also there are arrow functions, Immediately Invoked Function Expression(IIFE), async variations, class/object methods(not different from function in JS terms)</p>
<ul>
<li>arrow functions are anonymous by design</li>
<li>key difference is that arrow function is referring to <code dir="auto">this</code> from place it was declared AND NOT from place it was called, so it kinda closer to scope and perfect for callbacks inside methods</li>
</ul>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#82AAFF;--1:#3C63B3">showSkills</span><span style="--0:#D6DEEB;--1:#403F53">() {</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#7FDBCA;--1:#097174">this</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#FAF39F;--1:#111111">skills</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#82AAFF;--1:#3C63B3">forEach</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#C792EA;--1:#8D46B4">function</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">(</span><span style="--0:#D7DBE0;--1:#403F53">skill</span><span style="--0:#D9F5DD;--1:#111111">)</span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">      </span><span style="--0:#7FDBCA;--1:#097174">console</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#82AAFF;--1:#3C63B3">log</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D6DEEB;--1:#403F53">`</span><span style="--0:#DD6B68;--1:#B73936">${</span><span style="--0:#7FDBCA;--1:#097174">this</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#7FDBCA;--1:#097174">name</span><span style="--0:#DD6B68;--1:#B73936">}</span><span style="--0:#ECC48D;--1:#3C63B3"> is skilled in </span><span style="--0:#DD6B68;--1:#B73936">${</span><span style="--0:#D7DBE0;--1:#403F53">skill</span><span style="--0:#DD6B68;--1:#B73936">}</span><span style="--0:#D6DEEB;--1:#403F53">`</span><span style="--0:#D6DEEB;--1:#403F53">); </span><span style="--0:#809191;--1:#5E6578">// this.name === undefined</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    });</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">  },</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="showSkills() {    this.skills.forEach(function (skill) {      console.log(&#x60;${this.name} is skilled in ${skill}&#x60;); // this.name === undefined    });  },"><div></div></button></div></figure></div>
<h4 id="coercive-in-conditionals">Coercive in conditionals</h4>
<p>if, while, for, <code dir="auto">? :</code> have different from <code dir="auto">===</code> or <code dir="auto">==</code> comparison type, they are doing conversion to boolean each time, so:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#809191;--1:#5E6578">// if("hello") === if(Boolean("hello") == true)</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="// if(&#x22;hello&#x22;) === if(Boolean(&#x22;hello&#x22;) == true)"><div></div></button></div></figure></div>
<p>So we still meat coercive comparison, BUT in a way of just type transformation to boolean</p>
<h4 id="prototypal-classes">Prototypal “Classes”</h4>
<p><em>Aka classes before classes</em></p>
<p>It is old syntax, but classic for JS and it looks like this:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">function</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">A</span><span style="--0:#D9F5DD;--1:#111111">()</span><span style="--0:#D6DEEB;--1:#403F53"> {}</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">A</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#7FDBCA;--1:#097174">prototype</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#82AAFF;--1:#3C63B3">hi</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">()</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=></span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">console</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#82AAFF;--1:#3C63B3">log</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">hi</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">const </span><span style="--0:#82AAFF;--1:#3C63B3">a</span><span style="--0:#C792EA;--1:#8D46B4"> = </span><span style="--0:#7FDBCA;--1:#097174">new</span><span style="--0:#C792EA;--1:#8D46B4"> </span><span style="--0:#82AAFF;--1:#3C63B3">A</span><span style="--0:#D6DEEB;--1:#403F53">();</span></div><div class="ec-line"><span style="--0:#7FDBCA;--1:#097174">mathClass</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#82AAFF;--1:#3C63B3">hi</span><span style="--0:#D6DEEB;--1:#403F53">(); </span><span style="--0:#809191;--1:#5E6578">// hi</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="function A() {}A.prototype.hi = () => console.log(&#x22;hi&#x22;);const a = new A();mathClass.hi(); // hi"><div></div></button></div></figure></div>
<p>It is possible, because all functions in JS refer to empty object as prototype, that will become prototype of objects, created from function via <code dir="auto">new</code></p>
<h4 id="practice-1">Practice 1</h4>
<ul>
<li>comparison
<ul>
<li><code dir="auto">str.slice("")</code>  can be changed with <code dir="auto">str.match(regex)</code></li>
<li><code dir="auto">"07:15" &#x3C; "07:30" // true</code> - example of valid string alphabetic comparison, that can be used to compare time, if time is in valid format</li>
</ul>
</li>
</ul>
<h4 id="code-compiling">Code compiling</h4>
<p>We can break compiling into 3 main stages:</p>
<ul>
<li>tokenizing/lexing - breaking up string of chars into meaningful chunks(tokens)
<ul>
<li>lexing is figuring if symbol is token itself or part of other token</li>
</ul>
</li>
<li>parsing - converting list of tokens into Abstract Syntax Tree(AST)</li>
<li>code generating - different for every platform/language. For JS it is converting AST to machine instructions, that will execute</li>
</ul>
<p>In-depth JS engine is deeper, because it has optimization(while compiling and on-fly), lazy comping etc</p>
<ul>
<li>this is needed, because JS compilation needs to be seamless and fast, because we aren’t fully compiling like in C++</li>
</ul>
<p>JS can be broken into compiling and execution, because of syntax errors, early errors and hoisting</p>
<p>to handle variables compilers break them into two types:</p>
<ul>
<li>target(variable is a target if value is assigned to it)
<ul>
<li>examples:</li>
<li><code dir="auto">const a = 53</code></li>
<li><code dir="auto">for (const a of aa)</code></li>
<li><code dir="auto">a(53)</code> - assign 53 to some argument</li>
<li><code dir="auto">function a() {}</code></li>
</ul>
</li>
<li>source(opposite to target)</li>
</ul>
<h4 id="modifying-scope-on-fly">Modifying scope on-fly</h4>
<p>It is impossible to do this in strict mode and dangerous to say the least, but can be done with:</p>
<ul>
<li><code dir="auto">eval(string)</code> - compiles and executes string inside as JS code at runtime, with modification to scope on-fly
<ul>
<li>modifies scope, that eval was executed in</li>
<li>BAD BECAUSE
<ul>
<li>code injection, unexpected behaviour, performance degradation(re-compilation on every function call)</li>
</ul>
</li>
</ul>
</li>
<li><code dir="auto">with(obj)</code> - turns object into function like scope, with properties converted to scoped vars
<ul>
<li>BAD BECAUSE
<ul>
<li>readability, performance degradation(scope is dynamic, so dynamic re-compilation is present)</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">const </span><span style="--0:#82AAFF;--1:#3C63B3">obj</span><span style="--0:#C792EA;--1:#8D46B4"> = { a: </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">A</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#C792EA;--1:#8D46B4"> }</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">with</span><span style="--1:#403F53"><span style="--0:#D6DEEB"> (</span><span style="--0:#D7DBE0">obj</span><span style="--0:#D6DEEB">) {</span></span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#7FDBCA;--1:#097174">console</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#82AAFF;--1:#3C63B3">log</span><span style="--1:#403F53"><span style="--0:#D6DEEB">(</span><span style="--0:#D7DBE0">a</span><span style="--0:#D6DEEB">); </span></span><span style="--0:#809191;--1:#5E6578">// A</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="const obj = { a: &#x22;A&#x22; };with (obj) {    console.log(a); // A}"><div></div></button></div></figure></div>
<h4 id="lexical-scope">Lexical scope</h4>
<p>lexical scope is determined by placement of functions, blocks and variable declaration in relation to each other</p>
<ul>
<li><code dir="auto">var</code> is associated with nearest function, but <code dir="auto">const/let</code> with nearest block(<code dir="auto">{}</code>)</li>
</ul>
<p>variable must be available from current scope or lexically available/outside scope, otherwise usually error will occur</p>
<p>compilation don’t allocate memory or anything else with variable data, INSTEAD compilation create map of lexical scopes, so JS identify and not create a scope</p>
<p>Details</p>
<ul>
<li>variable is always connected to scope, that it was created in, not the scopes it can be accessed
<ul>
<li>properties are not vars, so they aren’t connected to scope</li>
</ul>
</li>
<li>scope is fully contained in other scope, never split between two/more scopes</li>
<li>if we are referencing the value(not declaring it), JS performs a look up, trying to find our var in current/outer scope
<ul>
<li>but it not performed at runtime, it mostly already known at that stage</li>
</ul>
</li>
<li>var declaration like this <code dir="auto">var arr = [];</code> can be seen as 2 step proses:
<ul>
<li>Compiler sets declaration</li>
<li>Engine looks up variable, initializes it and assigns variable</li>
</ul>
</li>
<li>each scope will get new ScopeManager instance
<ul>
<li>each scope has identifiers registered at the start of it(hoisting)</li>
<li>each var in function scope will be associated with this function</li>
</ul>
</li>
<li><code dir="auto">var</code> is always initialized at start of scope, but <code dir="auto">let/const</code> - not</li>
</ul>
<h4 id="lookup-failures">Lookup failures</h4>
<p>Happens if no scope is left, but variable is still not found
Different between strict/normal modes, as well as between role of var(source/target)</p>
<p>unresolved source always trows <code dir="auto">ReferenceError</code>, but target will throw only in strict mode</p>
<ul>
<li>often <code dir="auto">ReferenceError</code> looks like this: <code dir="auto">Reference Error: XYZ is not defined.</code> and means that var has no declaration</li>
</ul>
<p><code dir="auto">undefined</code> often means that var was defined, but have no variable at the moment</p>
<ul>
<li>NOTE: typeof empty declared and undeclared variable is always <code dir="auto">"undefined"</code></li>
<li>in non strict mode, if variable is target(we try to set it to something), it will be declared and set to that data in global scope</li>
</ul>
<h4 id="scope-chain">Scope Chain</h4>
<p>Connection between scopes, which determines lookup path</p>
<p>Lookup process is kinda conceptual, because all metadata needed is determined during initial compilation</p>
<ul>
<li>this information is immutable</li>
<li>this metadata stored in/near AST and used at runtime
sometimes lookup is still needed, when scope can’t be determined at compilation</li>
<li>it happens when variable is declared in other file, that yet not processed, so such variables stay undetermined, until deferred lookup
<ul>
<li>lookup failure still will happen, if scope is undetermined and variable referenced in execution</li>
</ul>
</li>
</ul>
<h4 id="shadowing">Shadowing</h4>
<p>Basically having two same named variables, but in different scopes
(one variable shadows other)</p>
<p>to consider, when shadowing, all inner scopes will loose access to shadowed variable to</p>
<p>un-shadowing(not recommended)</p>
<ul>
<li>only way is through global/window object
<ul>
<li>possible, because <code dir="auto">var</code>, <code dir="auto">function</code> declaration on global scope will create getter+setter on global object, that works as mirror to our variable
<ul>
<li>add property to <code dir="auto">global</code> will also create variable in global scope</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>note</p>
<ul>
<li><code dir="auto">let</code> always shadows <code dir="auto">var</code>, but <code dir="auto">var</code> can only be shadowed if it is inside function NOT a block
<ul>
<li>otherwise - syntax error, because of hoisting</li>
</ul>
</li>
<li>named function declaration <code dir="auto">const a = function b() {}</code> will create not hoisting variable <code dir="auto">a</code> in outer scope and var <code dir="auto">b</code> in function’s inner scope
<ul>
<li><code dir="auto">b</code> is always readOnly(in non strict mode, assignment will fail silently)</li>
</ul>
</li>
<li>arrow function behaves similar to function expression scope-wise(even without <code dir="auto">{..}</code>)
<ul>
<li>but remember, that it is anonymous by design</li>
</ul>
</li>
</ul>
<h4 id="two-files-one-program">Two files, one program</h4>
<p>Several files can be stitched together in this ways:</p>
<ul>
<li>ES modules - each file loaded separately, all needed functions are imported as references to files
<ul>
<li>no shared scope</li>
</ul>
</li>
<li>Bundling - bundler concatenates all files into one
<ul>
<li>usually each file is enclosed as one function, with exported methods as function methods, that can be accessed via shared scope(that also can contained in function, like “application” scope)</li>
</ul>
</li>
<li><code dir="auto">&#x3C;script></code> - each JS file imported via script tag which is done with bundler or by hand
<ul>
<li>files can be still concatenated, but without wrapper function, or they can be loaded in default way, where each file is independent, but they share global scope and communicate through it</li>
</ul>
</li>
</ul>
<h4 id="global-scope">Global Scope</h4>
<p>Global scope is place to several modules to communicate</p>
<p>Also this is a place, where JS exposes it’s APIs, primitives, natives etc</p>
<ul>
<li>also environment exposes it’s APIs(console, DOM etc)
<ul>
<li>note: node has global scope, but it’s APIs technically not exposed there</li>
</ul>
</li>
</ul>
<p>Global scope is glue for JS apps, but not a dumpster field</p>
<p>Each JS environment handles global scope bit different</p>
<ul>
<li><code dir="auto">window</code>
<ul>
<li><code dir="auto">function</code> and <code dir="auto">var</code>, declared on top level of an app, will appear on window object</li>
<li>top level variables shadows any global scope variables(properties of <code dir="auto">window</code> object)</li>
<li>any DOM node with <code dir="auto">id</code> will create global scope variable with the same name, which contains reference to this node
<ul>
<li>legacy behavior, not recommended to use</li>
</ul>
</li>
<li><code dir="auto">window</code> object has predefined <code dir="auto">name</code> property, which is getter/setter and always a <code dir="auto">string</code></li>
</ul>
</li>
<li>web workers - browser API, that allows to run JS in separate from main JS thread
<ul>
<li>limited in browser APIs and have restricted communication with main thread, to avoid race conditions</li>
<li>instead of <code dir="auto">window</code>, web workers have <code dir="auto">self</code></li>
<li>same <code dir="auto">var</code> and <code dir="auto">function</code> behavior</li>
</ul>
</li>
<li>dev tools - process JS code in no-separate environment
<ul>
<li>behaves differently and less strictly, in comparison to usual JS, to favor dev experience(DX)
<ul>
<li>some errors are relaxed and not displayed</li>
<li>behavior of global scope</li>
<li>hoisting</li>
<li><code dir="auto">let/const</code> in top level scope</li>
</ul>
</li>
<li>code is been executed in emulation of global scope</li>
<li>not good enough to verify complex JS behavior</li>
</ul>
</li>
<li>ES Modules(ESM)
<ul>
<li>top level <code dir="auto">function</code> and <code dir="auto">var</code> won’t create any global property
<ul>
<li>we can imagine it in a way, that all our code is wrapped in a function, so we can access global global scope, but not in a classical JS way</li>
</ul>
</li>
<li>all communication with outer files are done via <code dir="auto">import/export</code></li>
</ul>
</li>
<li>Node
<ul>
<li>Node treats all files as modules(ESM or CommonJS)
<ul>
<li>top level of file is never affects a global scope</li>
<li>all code is wrapped in function, that exposes some APIs to it(like parameters)</li>
<li>to assign global property Node exposes <code dir="auto">global</code> object, that is reference to real global scope</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>global scope object can be get with</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">const </span><span style="--0:#82AAFF;--1:#3C63B3">glob</span><span style="--0:#C792EA;--1:#8D46B4"> = </span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#7FDBCA;--1:#097174">new</span><span style="--0:#C792EA;--1:#8D46B4"> </span><span style="--0:#82AAFF;--1:#3C63B3">Function</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">return this</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">))();</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="const glob = (new Function(&#x22;return this&#x22;))();"><div></div></button></div></figure></div>
<ul>
<li>function can be constructed from string and run in non-strict mode
<ul>
<li><code dir="auto">this</code> of such function will be global object reference</li>
</ul>
</li>
</ul>
<p><code dir="auto">globalThis</code> is introduced as standardized universal variable, that will always  reference environment’s global scope object</p>
<ul>
<li>not completely useful, because of old versions in-compatibility</li>
</ul>
<h4 id="hoisting">Hoisting</h4>
<p>function declaration and <code dir="auto">var</code> variables can be accessed from beginning of function scope due to hoisting</p>
<ul>
<li>note, function hoisting includes function initializing and setting a reference to a function, BUT <code dir="auto">var</code> create an <code dir="auto">undefined</code> placeholder and later fills it with data</li>
<li>to be specific, <code dir="auto">let/const</code> also hoist to top of block scope, but they have TDZ of unusability</li>
</ul>
<p>hoisting happens at compile time, where functions are hoisted first and then variables</p>
<h4 id="re-declaration">Re-Declaration</h4>
<p>re-declaration of <code dir="auto">var</code> variables will do nothing, if we aren’t explicitly setting new value</p>
<p>with <code dir="auto">let/const</code> re-declaration is not allowed and will throw <code dir="auto">SyntaxError</code></p>
<ul>
<li>even if re-declaration uses <code dir="auto">var</code> it will still throw</li>
<li>it has no technical reasons to be so, just stylistic</li>
</ul>
<p>note, re-declaration is not happening in loops, because:</p>
<ul>
<li>each loop iteration creates a new, clean scope</li>
<li>var will hoist out of loop and be just re-assignment</li>
<li>it also true for <code dir="auto">for</code> loops, we can conceptually say that <code dir="auto">i</code> is declared per loop, but program keeps track of current <code dir="auto">i</code> value via other scoped variable like this:
<ul>
<li>note, it won’t work with <code dir="auto">const</code>, if you will re-assign <code dir="auto">i</code></li>
</ul>
</li>
</ul>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">{</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">let </span><span style="--0:#D7DBE0;--1:#403F53">_i</span><span style="--0:#C792EA;--1:#8D46B4"> = </span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">for</span><span style="--1:#403F53"><span style="--0:#D6DEEB"> (; </span><span style="--0:#D7DBE0">_i</span><span style="--0:#D6DEEB"> </span></span><span style="--0:#C792EA;--1:#8D46B4">&#x3C;</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">3</span><span style="--1:#403F53"><span style="--0:#D6DEEB">; </span><span style="--0:#D7DBE0">_i</span></span><span style="--0:#C792EA;--1:#8D46B4">++</span><span style="--0:#D6DEEB;--1:#403F53">) {</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">        </span><span style="--0:#C792EA;--1:#8D46B4">let </span><span style="--0:#D7DBE0;--1:#403F53">i</span><span style="--0:#C792EA;--1:#8D46B4"> = </span><span style="--1:#403F53"><span style="--0:#D7DBE0">$$i</span><span style="--0:#D6DEEB">;</span></span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">        </span><span style="--0:#7FDBCA;--1:#097174">...</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    }</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="{    let _i = 0;    for (; _i < 3; _i++) {        let i = $$i;        ...    }}"><div></div></button></div></figure></div>
<h4 id="const">Const</h4>
<p>empty const declaration will throw <code dir="auto">SyntaxError</code>, because re-assignment is impossible and will cause <code dir="auto">TypeError</code></p>
<ul>
<li>important that re-assignment will throw a run-time error</li>
</ul>
<h4 id="tdz">TDZ</h4>
<p>Means that variable is exists, but not initialized, so we can’t use it, event if we try to declare them like this:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--1:#403F53"><span style="--0:#D7DBE0">a</span><span style="--0:#D6DEEB"> </span></span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">a</span><span style="--0:#D9F5DD;--1:#111111">"</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">let </span><span style="--1:#403F53"><span style="--0:#D7DBE0">a</span><span style="--0:#D6DEEB">;</span></span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="a = &#x22;a&#x22;let a;"><div></div></button></div></figure></div>
<p>happens, because compiler is instructed to initialize variable on line 3</p>
<ul>
<li>if function referencing variable and called before it’s initialization, <code dir="auto">ReferenceError</code> will be thrown</li>
</ul>
<p>good practice to put <code dir="auto">const/let</code> as high as possible in block to avoid TDZ</p>
<h4 id="scope-exposure">Scope Exposure</h4>
<p>It is good practice to lower scope exposure and make program functions with least amount of open data to make it more secure</p>
<p>It is bad idea to use global scope only because of:</p>
<ul>
<li>name collisions</li>
<li>unexpected behavior(it is generally bad to expose private function, because it may be used unpredictable)</li>
<li>dependency problem(others may depend on your private API and any change may cause big refactor)</li>
</ul>
<h4 id="scoping-with-functions">Scoping with functions</h4>
<p>We can limit scope via IIFE(Immediately Invoked Function Expression), so it be block-like, but also working for <code dir="auto">var/function</code></p>
<ul>
<li>note: IIFE must always be surrounded with <code dir="auto">()</code></li>
<li><code dir="auto">continue/break</code> won’t work inside IIFE for outer loop</li>
<li><code dir="auto">this</code> is re-binded inside IIFE</li>
</ul>
<h4 id="scoping-with-blocks">Scoping with blocks</h4>
<p><code dir="auto">{}</code> will create a block, but scope will be created only if some variable is declared inside</p>
<ul>
<li>object literals aren’t blocks</li>
<li><code dir="auto">class</code> declaration</li>
<li><code dir="auto">function</code> body is a statement with function scope</li>
<li><code dir="auto">switch</code> declaration</li>
</ul>
<p><code dir="auto">catch</code> is block+scope, with block scoped parameter, which is optional</p>
<p><code dir="auto">function</code> declaration inside block is block scoped by TC39, BUT in browser environment it will be function scoped, with initialization on block execution(so <code dir="auto">undefined</code> by default)</p>
<ul>
<li>this leads to conditional function definition :)</li>
</ul>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">if</span><span style="--1:#403F53"><span style="--0:#D6DEEB"> (</span><span style="--0:#D7DBE0">a</span><span style="--0:#D6DEEB">) {</span></span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">function</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">b</span><span style="--0:#D9F5DD;--1:#111111">()</span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">        </span><span style="--0:#7FDBCA;--1:#097174">console</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#82AAFF;--1:#3C63B3">log</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">a is true</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    }</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">}</span></div><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">else</span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">function</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">b</span><span style="--0:#D9F5DD;--1:#111111">()</span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">        </span><span style="--0:#7FDBCA;--1:#097174">console</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#82AAFF;--1:#3C63B3">log</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">a is false</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    }</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="if (a) {    function b() {        console.log(&#x22;a is true&#x22;);    }}else {    function b() {        console.log(&#x22;a is false&#x22;);    }}"><div></div></button></div></figure></div>
<h4 id="closure">Closure</h4>
<ul>
<li>only relevant to functions/class methods</li>
<li>function must be invoked in different scope</li>
<li>based on lexical scope, but observable at a runtime</li>
</ul>
<p>we can say that closure is reference from inside of a function to variables, from different scope(basically function is enclosing that variables)</p>
<ul>
<li>closures are also created for pointer functions</li>
<li>closure is not a snapshot, but editable</li>
</ul>
<p>interesting point, that by using <code dir="auto">var</code> declaration for <code dir="auto">i</code> we are getting shared enclosed <code dir="auto">i</code>, so it will be equal in all closures, BUT with <code dir="auto">let</code> we will have separate, re-declared variables</p>
<p>common usages</p>
<ul>
<li>async</li>
<li>callbacks</li>
<li>handlers</li>
<li>remember some information, by computing it once and enclosing</li>
<li>partial implementation</li>
<li>currying</li>
</ul>
<p>in theory we can say, that there is no need to enclose global scoped variables, unused variables etc as optimisation matter</p>
<ul>
<li>but there is need to account for <code dir="auto">eval()</code> etc</li>
</ul>
<p>alternatively view to closure is that our function is stays in place, and reference to it is passed, so enclosed variables are just simply accessed by function</p>
<h4 id="closure-lifetime">Closure lifetime</h4>
<p>It is important that closure can cause memory leeks, because garbage collector can’t pick up variable, that been closed over</p>
<p>good practices:</p>
<ul>
<li>always unsubscribe event listeners/other cb based functions</li>
<li>manually unset variables(set to <code dir="auto">null</code> to discard some large objects), that are not needed anymore(<em>not really practical, but can be useful in some optimizations</em>)</li>
</ul>
<h4 id="module-pattern">Module pattern</h4>
<p>main way to organize code in JS is to break code into small, independent modules, that encapsulate some data/private methods and expose public</p>
<p>basically module is just a collection of data, private/public functions</p>
<p>types:</p>
<ul>
<li>namespace - group some independent(by state and purpose) functions together, in common namespace, like “utils”</li>
<li>data structure - group data and functions together, without access control</li>
<li>modules - data + functions + access control, but it is a singleton by design</li>
<li>module factory - function, that creates modules</li>
<li>OTHER
<ul>
<li>CommonJS - module, that created on per-file basic
<ul>
<li>public API is added via assigning something to <code dir="auto">module.exports</code> object</li>
<li>module can be imported with <code dir="auto">const obj = require("path")</code>
<ul>
<li>if <code dir="auto">"path"</code> is not absolute, Node will try to look at <code dir="auto">node_modules</code> folder and assume, that file has <code dir="auto">js</code> type</li>
</ul>
</li>
</ul>
</li>
<li>ESM - module, per-file basic. Similar to CommonJS, but always in <code dir="auto">strict mode</code>
<ul>
<li><code dir="auto">import/export</code> keywords are used to import/export APIs
<ul>
<li><code dir="auto">export</code>
<ul>
<li>must be on top level scope</li>
<li>can be placed before variable declaration</li>
<li>via <code dir="auto">export default</code> we can make imports easier(no need to de-construct APIs from object)
<ul>
<li>non-default exports are named as “named exports”</li>
</ul>
</li>
</ul>
</li>
<li><code dir="auto">import</code>
<ul>
<li>only top level scope</li>
<li>”named” export can be re-named with <code dir="auto">as</code></li>
<li>”namespace” import is done like this: <code dir="auto">import * as A from ...</code> and allows to collect every named export into some object’s properties</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="scope-deep-dive">Scope deep dive</h4>
<p>non obvious scopes:</p>
<ul>
<li>function parameters scope
<ul>
<li>simple parameters won’t create their own scope, but: default values, rest parameters and destructed parameters - will, some examples and corner cases:
<ul>
<li><code dir="auto">function k(b = a, a)</code> will cause TDZ error</li>
<li><code dir="auto">function k(a, b = () => a)</code> will create parameter and function scope(for default value <code dir="auto">a</code>)</li>
<li><code dir="auto">var</code> will initialize to function parameter value and not <code dir="auto">undefinde</code>
<ul>
<li>so it is not recommended to shadow parameters</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>function name scope
<ul>
<li>if we declare function like this: <code dir="auto">const a = function k()...</code>, function name <code dir="auto">k</code> will create it’s own scope, “between” <code dir="auto">a</code> and <code dir="auto">k</code>, so we can still shadow it</li>
</ul>
</li>
</ul>
<h4 id="functions-naming">Functions naming</h4>
<p>Naming functions is good for:</p>
<ul>
<li>stack trace debugging</li>
<li>self referencing(recursion, un-subscribing from something)</li>
<li>easier to read
but can make code uglier, because arrow function are always anonymous :(</li>
</ul>
<p>NOTE: don’t make any scene if any additional code processing is used</p>
<p>function is not named, when it is passed as value to some variable, or object method</p>
<ul>
<li>to be sure, function won’t have real name, rather it will take name of method/variable name, so it’s name will be “inferred”
<ul>
<li>this won’t give function a name: <code dir="auto">config.a = function(){}</code></li>
</ul>
</li>
</ul>
<p>hack to name IIFEs - name by purpose, that is usually to wrap some data, so: <code dir="auto">StoreSomeData</code></p>
<ul>
<li>main way to define IIFE is to: wrap it in <code dir="auto">()</code>, use <code dir="auto">+</code>, <code dir="auto">!</code>, <code dir="auto">~</code>(it will work as <code dir="auto">()</code>, by making JS engine evaluate function), or use explicit <code dir="auto">void</code> operator, that evaluates and returns <code dir="auto">undefined</code></li>
</ul>
<h4 id="tdz-origin">TDZ origin</h4>
<p>TDZ originates from <code dir="auto">const</code>, because:</p>
<ul>
<li>it is strange to first part of block be shadowed and other part not, so we need to hoist our <code dir="auto">const</code> declaration to top</li>
<li>we can’t auto-init <code dir="auto">const</code> to <code dir="auto">undefined</code>, because it won’t be constant</li>
</ul>
<p><code dir="auto">let</code> got TDZ behavior to be similar to <code dir="auto">const</code></p>
<h4 id="callbacks">Callbacks</h4>
<ul>
<li>async - some function(part of code), that was suspended and will be invoked later</li>
<li>sync - some function, that passed as reference to be immediately invoked in other part of program
<ul>
<li>base for
<ul>
<li>Dependency Injection(DI) - passing some dependency(functionality) from one part of program to other, so it can perform some actions(example: <code dir="auto">map</code> iterate, but it don’t know what to do)</li>
<li>Inversion of Control(IoC) - control from current part of program handed to other part(<code dir="auto">map</code> controls invocation of some logic)
<ul>
<li><em>based on that, we can say that we invoke libraries functions and framework invokes our functions</em></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>we can say, that any callback is an IIFE, because it is declared in place and invoked, there for there is no need to IIFE to have any closure(it will rely on lexical scope)</p>
<ul>
<li>note: it is just one way to represent callbacks</li>
</ul>
<h4 id="more-about-modules">More about Modules</h4>
<p>Most classic modules just return object, that represents their public API, but it might be useful to declare some <code dir="auto">publicApi</code> object, to save reference to public API inside module and only later return it</p>
<ul>
<li>problem arrives, because we depend on hoisting here</li>
</ul>
<p>Asynchronous Module Definition(AMD) - variation to define classic module, presented in RequireJS(library for in-browser/Node module loading) and looks like this:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#82AAFF;--1:#3C63B3">define</span><span style="--0:#D6DEEB;--1:#403F53">([ </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">./A</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53"> ],</span><span style="--0:#C792EA;--1:#8D46B4">function</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">Afactory</span><span style="--0:#D9F5DD;--1:#111111">(</span><span style="--0:#D7DBE0;--1:#403F53">A</span><span style="--0:#D9F5DD;--1:#111111">)</span><span style="--0:#D6DEEB;--1:#403F53">{</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">    </span><span style="--0:#C792EA;--1:#8D46B4">return</span><span style="--0:#D6DEEB;--1:#403F53"> { </span><span style="--0:#7FDBCA;--1:#097174">...</span><span style="--0:#D6DEEB;--1:#403F53"> };</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">});</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="define([ &#x22;./A&#x22; ],function Afactory(A){    return { ... };});"><div></div></button></div></figure></div>
<p>Universal Modules(UMD) - module, that uses collection of formats, so we can seamlessly load modules in browser, Node or via AMD</p>
<ul>
<li>basically just an IIFE, but with additional if..else to detect format</li>
</ul>
<h4 id="objects">Objects</h4>
<p>NOT Everything in JS is an object, but object is still a key part in JS, because it is based on prototypes, which, in combination with <code dir="auto">this</code>, makes possible class pattern</p>
<p>Object can be represented as key/value container(array is sub-type, with index keys)</p>
<ul>
<li>“key” === “property name"</li>
<li>"key+value” === “property”</li>
</ul>
<p>note: <code dir="auto">{}</code> are used for many ways:</p>
<ul>
<li>define object</li>
<li>destruct object</li>
<li>string interpolation</li>
<li>define blocks</li>
<li>define function body</li>
</ul>
<p>all object values are immediately calculated, before assignment, there is no lazy values in JS</p>
<p>object is similar to JSON(JavaScript Object Notation), but in JSON we must wrap keys in <code dir="auto">""</code> and values are primitives/arrays, with no trailing comas, comments etc</p>
<p>all object keys are converted to strings, except numbers, or “number”(example: <code dir="auto">"37"</code>), which treated like indexes</p>
<ul>
<li>if you need to use value as key as is, use <code dir="auto">Map</code></li>
<li>key can be computed, by surrounding it with <code dir="auto">[]</code></li>
<li><code dir="auto">Symbol</code> can be used as key - uniq(in program scope) value, that prevents monkey patching and collisions
<ul>
<li>often used for some inner properties, that won’t be exposed</li>
</ul>
</li>
</ul>
<p>function can be added to property in this ways:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">const </span><span style="--0:#82AAFF;--1:#3C63B3">a</span><span style="--0:#C792EA;--1:#8D46B4"> = {</span></div><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">  </span><span style="--0:#82AAFF;--1:#3C63B3">a</span><span style="--0:#C792EA;--1:#8D46B4">: function</span><span style="--0:#D9F5DD;--1:#111111">()</span><span style="--0:#C792EA;--1:#8D46B4">{},</span></div><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">  </span><span style="--0:#82AAFF;--1:#3C63B3">b</span><span style="--0:#D9F5DD;--1:#111111">()</span><span style="--0:#C792EA;--1:#8D46B4">{}</span></div><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">  *</span><span style="--0:#82AAFF;--1:#3C63B3">c</span><span style="--0:#D9F5DD;--1:#111111">()</span><span style="--0:#C792EA;--1:#8D46B4">{}</span></div><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">  </span><span style="--0:#D6DEEB;--1:#403F53">[</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">oh my, </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">+</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">new way to sheetcode :)</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">]</span><span style="--0:#D9F5DD;--1:#111111">()</span><span style="--0:#C792EA;--1:#8D46B4">{}</span></div><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">}</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="const a = {  a: function(){},  b(){}  *c(){}  [&#x22;oh my, &#x22; + &#x22;new way to sheetcode :)&#x22;](){}}"><div></div></button></div></figure></div>
<p><code dir="auto">...</code> - technically syntax, but acts like an operator and called <code dir="auto">obect spread</code></p>
<ul>
<li>it assigning key/value pares from one object to another, without deep copy
<ul>
<li>only owned an enumerable properties</li>
</ul>
</li>
<li>if object has property duplication, this property will be overwritten top->bottom, so only last value will stay</li>
<li>deep copy is tricky, because of: reference to function, reference to external object(DOM Element), nested objects, so main approaches are:
<ul>
<li>use external lib, with predefined behavior</li>
<li>use <code dir="auto">JSON.parse(JSON.stringify(obj))</code>, but it won’t work for: functions(un-serializable data), circular references</li>
<li><code dir="auto">structuredClone(obj)</code>, provided by environment, can’t handle DOM and function cases</li>
</ul>
</li>
</ul>
<p>accessing properties is done via <code dir="auto">obj.</code> or <code dir="auto">obj[computed val, converted to str]</code></p>
<p>object can be destructed(values from object are assigned to created variables in specified way(with renaming, default values))</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">const { </span><span style="--0:#D6DEEB;--1:#403F53">a</span><span style="--0:#C792EA;--1:#8D46B4">: </span><span style="--0:#82AAFF;--1:#3C63B3">ab</span><span style="--0:#C792EA;--1:#8D46B4"> = </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">37</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#C792EA;--1:#8D46B4"> } = </span><span style="--0:#82AAFF;--1:#3C63B3">A</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="const { a: ab = &#x22;37&#x22; } = A;"><div></div></button></div></figure></div>
<p>but, we can destruct without declaration, like this:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">let </span><span style="--1:#403F53"><span style="--0:#D7DBE0">a</span><span style="--0:#D6DEEB">;</span></span></div><div class="ec-line"><span style="--1:#403F53"><span style="--0:#D6DEEB">({ a: </span><span style="--0:#D7DBE0">a</span><span style="--0:#D6DEEB"> } </span></span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">A</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="let a;({ a: a } = A);"><div></div></button></div></figure></div>
<p>after ES20 conditional property access was added via <code dir="auto">?.</code> operator, which checks if left value is nullish or not(nullish -> return <code dir="auto">undefined</code>, non-nullish -> return value of property)</p>
<ul>
<li>it is appropriate to use, where you don’t know if the value is exists, to avoid run-time errors</li>
<li>we can also conditionally get data from arrays like this: <code dir="auto">matrix[37]?.[0]</code></li>
<li>function call can be conditional to, with: <code dir="auto">a.func?.()</code>, BUT it won’t check if <code dir="auto">func</code> is real function, so exception may be thrown anyway</li>
</ul>
<p>non-object value’s properties can be accessed, because JS performs “boxing” on it(temporary wraps value inside object, for example: <code dir="auto">37.toString() -> Number(37).toString()</code>)</p>
<ul>
<li>we can manually box <code dir="auto">null</code>/<code dir="auto">undefined</code>, with <code dir="auto">Object(null)</code></li>
<li>JS can also unbox in cases like: <code dir="auto">Number(37) + 40 -> 37 + 40</code></li>
</ul>
<p>assignment is done via <code dir="auto">=</code>, but it can lead to some setter function under the hood</p>
<p><code dir="auto">delete obj.a</code> will delete <code dir="auto">a</code> property from <code dir="auto">obj</code>, BUT not free memory</p>
<ul>
<li>will throw in strict mode with non object property</li>
<li>not equal to assigning <code dir="auto">undefinded</code></li>
</ul>
<p>we can use object as temporary containers, to pass many arguments to function, but never access created object, because we always destruct properties</p>
<p>all underlying behavior of object is described by metaobject protocol, that can help understand objects deeper and change it’s behavior if needed</p>
<h4 id="object-apis">Object APIs</h4>
<ul>
<li><code dir="auto">Object.entries(obj) -> [[key, val], [key, val]]</code> - take entries from object
<ul>
<li>only owned an enumerable properties</li>
<li>similar to <code dir="auto">Object.keys(obj) -> Array</code>, <code dir="auto">Object.values(obj) -> Array</code></li>
</ul>
</li>
<li><code dir="auto">Object.getOwnPropertyNames(obj) -> Array</code> - returns keys for enumerable and non-enumerable properties, BUT no Symbol properties
<ul>
<li>to get Symbol properties, use <code dir="auto">Object.getOwnPropertySymbols(obj) -> Array</code></li>
<li>note: both getters will return owned properties, no prototype inherited</li>
</ul>
</li>
<li><code dir="auto">Object.fromEntries([[key, val], [key, val]]) -> obj</code> - construct object from entries</li>
<li><code dir="auto">Object.assign(targetObj, obj1, obj2 ... objn)</code> - swallow copies properties from one object to other</li>
<li><code dir="auto">"property" in obj -> boolean</code> - checks if object or it’s prototype chain have property
<ul>
<li>NOTE: <code dir="auto">for in</code> will also traverse through prototype chain, but skip Symbols</li>
</ul>
</li>
<li><code dir="auto">obj.hasOwnProperty() -> boolean</code> - checks if object have property
<ul>
<li>same, but less preferable variation of <code dir="auto">Object.hasOwn(obj, property) -> boolean</code></li>
</ul>
</li>
</ul>
<h4 id="property-descriptors">Property Descriptors</h4>
<p>each property has description, in a form of object</p>
<p>can be get via <code dir="auto">Object.getOwnPropertyDescriptor(obj, "a");</code>
can be set via <code dir="auto">Object.defineProperty(obj, "a", {});</code></p>
<ul>
<li>will also define a new property</li>
<li>we can batch definitions like this</li>
</ul>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#7FDBCA;--1:#097174">Object</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#82AAFF;--1:#3C63B3">defineProperty</span><span style="--1:#403F53"><span style="--0:#D6DEEB">(</span><span style="--0:#D7DBE0">obj</span><span style="--0:#D6DEEB">, {</span></span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">  a: {},</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">  b: {}</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">});</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="Object.defineProperty(obj, {  a: {},  b: {}});"><div></div></button></div></figure></div>
<p>contains:</p>
<ul>
<li>value: any
<ul>
<li>instead of value we can define <code dir="auto">get()</code> and <code dir="auto">set(val)</code> functions</li>
</ul>
</li>
<li>enumerable: boolean (true by default) // marks if property should appear in <code dir="auto">.entries()</code>, <code dir="auto">for...in</code> etc</li>
<li>writable: boolean (true by default) // controls if value can be changed via <code dir="auto">=</code>, but not via <code dir="auto">.defineProperty()</code></li>
<li>configurable: boolean (true by default) // (dis)allows re-defining descriptor, but value can be still changed with <code dir="auto">=</code></li>
</ul>
<p>any property duplication is just value duplication, not full descriptor</p>
<h4 id="sub-types-of-objects">Sub-types of Objects</h4>
<p>Sub-type of objects is and object, that extends basic behavior</p>
<ul>
<li>Array - numerically indexed object
<ul>
<li>note: we can still assign named properties to it, but we shouldn’t</li>
<li><code dir="auto">length</code> is always exposed, updated property on array-object
<ul>
<li>it is not computed every time it’s called, so we can safely call it any time we need, not worry about optimization</li>
<li>it is also can be set</li>
</ul>
</li>
<li>if you skip values, when assigning to array, it won’t create <code dir="auto">undefined</code> values in between, which return <code dir="auto">undefined</code>, but skipped over, when <code dir="auto">.map</code> is called</li>
</ul>
</li>
<li>Function - callable objects
<ul>
<li>function has two exposed properties:
<ul>
<li><code dir="auto">name</code> - used for stack tracing</li>
<li><code dir="auto">length</code> - number of explicitly defined parameters, but not parameters, with default value</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="object-characteristics">Object characteristics</h4>
<ul>
<li>extensible - define if new properties can be added to object
<ul>
<li><code dir="auto">true</code> by default, but can be set to <code dir="auto">false</code> via <code dir="auto">Object.preventExtensions(obj);</code></li>
<li>will throw run time exception is <code dir="auto">strict</code></li>
</ul>
</li>
<li>sealed - change some parameters of object:
<ul>
<li>remove possibility to add properties, remove properties, re-configure properties</li>
<li>prototype can’t be re-assigned</li>
<li>values of properties can be set</li>
<li>can be set by <code dir="auto">Object.seal()</code></li>
</ul>
</li>
<li>frozen - same as sealed, but without value changing too
<ul>
<li>can be set by <code dir="auto">Object.freeze()</code></li>
<li>potentially slow</li>
</ul>
</li>
</ul>
<h4 id="prototype-chaining">Prototype chaining</h4>
<p>All objects, from creation, has <code dir="auto">[[Prototype]]</code> property, that points to other object</p>
<ul>
<li>by default, all object are linked to <code dir="auto">Object.prototype</code></li>
</ul>
<p>this technic delegates the access of some properties to linked object up to chain, until we reach to final object(<code dir="auto">null</code>) or find property</p>
<ul>
<li>this technic is called “prototype inheritance” or “prototype delegation” and properties are “inherited”</li>
</ul>
<p>to create object with different prototype we can use <code dir="auto">const a = Object.create(obj);</code></p>
<ul>
<li>it takes second argument, like <code dir="auto">Object.defineProperties()</code>, but it’s not commonly used</li>
<li>alternately we can use <code dir="auto">__proto__</code> syntax, BUT it not in TC39 spec, but in Appendix B</li>
</ul>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">const </span><span style="--0:#82AAFF;--1:#3C63B3">a</span><span style="--0:#C792EA;--1:#8D46B4"> = {</span></div><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">  __proto__: </span><span style="--0:#D7DBE0;--1:#403F53">obj</span><span style="--0:#C792EA;--1:#8D46B4">,</span></div><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">  a: </span><span style="--0:#F78C6C;--1:#AA0982">37</span></div><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">}</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="const a = {  __proto__: obj,  a: 37};"><div></div></button></div></figure></div>
<p>dictionary object - object with <code dir="auto">null</code> prototype</p>
<ul>
<li><code dir="auto">.prototype</code> - is property on all function-objects, that points to an object, that will be set to <code dir="auto">[[Prototype]]</code> of a created object from this function
<ul>
<li>don’t forget, that function itself will have <code dir="auto">[[Prototype]]</code>, inherited from <code dir="auto">Function.prototype</code></li>
</ul>
</li>
</ul>
<h4 id="oop-101">OOP 101</h4>
<p>OOP is mainly about breaking program into meaningful entities that can inherit and interact with each other in some way</p>
<ul>
<li>basically, if you program need some data+behavior object instances, class is a way to go
<ul>
<li>note: if you are creating classes and don’t initializing them(just inherit from), maybe you don’t need this class</li>
</ul>
</li>
</ul>
<p>Encapsulation helps to hide some details and expose useful abstractions</p>
<p>Instead of inheritance, composition can be used to declare classes, based on other classes combination</p>
<h4 id="class">Class</h4>
<p>Prio to ES6 JS main class approach was prototypal classes. In ES6 classes was introduced as syntactic sugar and later evolved from it to separate thing, but it is still based on prototype chaining</p>
<p>we can create class via declaration OR expression, like function</p>
<ul>
<li>it can be anonymous too</li>
<li>all code inside class is in “strict” mode</li>
</ul>
<p>class can have:</p>
<ul>
<li>methods
<ul>
<li>special method is <code dir="auto">constructor</code>, which can be empty(will be default <code dir="auto">constructor</code>) or declared and called on every creation of class instance via <code dir="auto">new</code></li>
</ul>
</li>
<li>variables</li>
</ul>
<p>type of class is a function, but it can be only called with new(otherwise <code dir="auto">TypeError</code>) and can be serialized to string</p>
<ul>
<li>basically our class is a constructor function, that vires it’s constructor to all it’s instances</li>
<li>we can call all class methods like this <code dir="auto">Class.prototype.method</code>, or declare them as <code dir="auto">static</code></li>
</ul>
<p><code dir="auto">this</code> is used to reference current instance context for all methods inside context</p>
<ul>
<li>often we use it to declare some data, BUT all values can be just placed inside of our class, like this:</li>
</ul>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">class</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#111111">A</span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">  x </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">10</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">  y </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">this</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#7FDBCA;--1:#097174">x</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">*</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#F78C6C;--1:#AA0982">10</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="class A {  x = 10  y = this.x * 10}"><div></div></button></div></figure></div>
<ul>
<li>note: never declare methods like this: <code dir="auto">a = () => {}</code>, because it will create new instance of a function for every object instance AND will break <code dir="auto">this</code> bindings
<ul>
<li>closure is more appropriate for such cases</li>
</ul>
</li>
</ul>
<p><code dir="auto">extend</code> is  used to chain classes</p>
<ul>
<li>in this situation <code dir="auto">this</code> is shining, caze it will refer methods/variables in context it called and not created</li>
<li>we can override methods in extended classes, BUT it is still possible to access “parents” methods, by calling <code dir="auto">super.</code>
<ul>
<li>this helps implementing “method polymorphism” pattern</li>
<li>note: <code dir="auto">super()</code> must be invoked in a <code dir="auto">constructor</code> to invoke inherited constructor AND this must be done before any <code dir="auto">this</code> reference, or runtime exception will be thrown
<ul>
<li>BUT, default <code dir="auto">constructor</code> invoking <code dir="auto">super()</code> by itself</li>
<li>any initialization of “public” variables are done after <code dir="auto">super()</code></li>
</ul>
</li>
<li>there is <code dir="auto">new.target</code> property, that is equal to class itself, if we are initing it via <code dir="auto">new</code>
<ul>
<li>with a help of this we can restrict use of <code dir="auto">constructor</code> by explicitly throwing and there for making our class abstract</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><code dir="auto">instance</code> of helps find out if our instance created from some class, BUT it also will result in <code dir="auto">true</code> for inherited classes, because it is performing prototype check and traverse</p>
<ul>
<li>it can be also check like this: <code dir="auto">A.prototype.isPrototypeOf(a) -> boolean</code></li>
<li>if direct check is needed, we can use: <code dir="auto">a.constructor === A</code>
<ul>
<li><code dir="auto">.constructor</code> is located on <code dir="auto">A</code> prototype</li>
</ul>
</li>
</ul>
<h4 id="static-properties">Static properties</h4>
<p>For better code organisation we can use “static” values/methods, that will be placed(there for associated) on class, but will be accessible via class itself and not it’s instance</p>
<ul>
<li>it means that in JS we can store methods in 3 places: constructor, instance, class function</li>
<li>we can create class instance and place it into static property</li>
<li><code dir="auto">this.</code> inside static equals to <code dir="auto">Class.</code>
<ul>
<li>we can(but shouldn’t) do this: <code dir="auto">static a = new this()</code></li>
</ul>
</li>
<li>we can use static blocks to define some temp values or do try/catch computations like this: <code dir="auto">static {...}</code></li>
<li>static methods are inherited in same way as default methods, but as static
<ul>
<li>note: it is still done via prototype linkage, but we are changing link from <code dir="auto">Funtion.prototype</code> to <code dir="auto">Class.prototype</code>
<ul>
<li>this isn’t possible to do via pre-ES6 classes</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>static initialization</p>
<ul>
<li>happens immediately after class definition</li>
<li>happens in order, one-by-one</li>
</ul>
<h4 id="private-properties">Private properties</h4>
<p>JS has native private properties(don’t mix-up with TS’s <code dir="auto">private</code>, <code dir="auto">public</code>, <code dir="auto">protected</code>), that is defined like this: <code dir="auto">#a = ...</code>, and can be applied to all other types of properties. To access private properties use: <code dir="auto">this.#a</code></p>
<ul>
<li>main problem - we can’t access private properties when extending class, so they are not fully useful
<ul>
<li>but we still can access private properties via <code dir="auto">super</code></li>
</ul>
</li>
<li>we can add private fields only via class body, can re-assigne, but not <code dir="auto">delete</code> them
<ul>
<li>JS will throw, if we try to access private field
<ul>
<li>we can use <code dir="auto">try/catch</code> or check via <code dir="auto">in</code> to avoid unhandled exception</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="this-1">This</h4>
<p>key differences in JS:</p>
<ul>
<li><code dir="auto">this</code> is runtime value(usually object), that can’t be determined at compilation stage</li>
<li><code dir="auto">this</code> can be different, depending on how function is invoked</li>
<li>we can think about <code dir="auto">this</code> in a way - this is some variable, that takes some value, when function is invoked
<ul>
<li>basically <code dir="auto">this</code> is some placeholder, that change behavior of function</li>
<li>it’s always important to remember, that <code dir="auto">this</code> can be controlled from outside on function call, so we need to know context to fully understand how function behaves</li>
<li><code dir="auto">this</code> acts like implicit parameter, meaning we aren’t defining it and not declaring, that we will use it, and just use it
<ul>
<li>often <code dir="auto">this</code> is not properly validated too(thank god for TS :) )</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>overall <code dir="auto">this</code> acts like dynamic context for function, that was called inside of it</p>
<p>ways to invoke this-aware function:</p>
<ul>
<li>implicit context invocation - invoke function, that is object’s method
<ul>
<li><code dir="auto">this</code> === object</li>
<li>example: <code dir="auto">printerInstance.print()</code></li>
</ul>
</li>
<li>default context invocation - invoke function, without any context
<ul>
<li><code dir="auto">this</code> is depends on some other factors, but often it will be equal to globalThis, BUT in “strict” mode <code dir="auto">this</code> === <code dir="auto">undefined</code>, so we will get run-time error</li>
</ul>
</li>
<li>explicit context invocation - invoke function, with passing context to it
<ul>
<li><code dir="auto">this</code> === firstArgument</li>
<li>examples:
<ul>
<li><code dir="auto">a.apply(context, [val1, val2])</code></li>
<li><code dir="auto">a.call(context, val1, val2)</code></li>
</ul>
</li>
<li>we can borrow methods from one objects and utilize them in other context like this: <code dir="auto">obj1.a.call(obj2)</code>
<ul>
<li>we can share a function reference between multiple objects as alternative</li>
</ul>
</li>
</ul>
</li>
<li>new context invocation - invoke function with <code dir="auto">new</code> keyword
<ul>
<li>JS is doing some steps here:
<ul>
<li>create new object</li>
<li>link <code dir="auto">function.prototype</code> to object’s <code dir="auto">__prototype__</code></li>
<li>invoke function with new context</li>
<li>return(if not function explicitly return object) this object</li>
</ul>
</li>
<li>basically we can create object instances from “classes” this way
note: JS is checking this rules on-by-one and first rule to hit will determine <code dir="auto">this</code> value(ordered from last to first as written before)</li>
</ul>
</li>
</ul>
<p>THIS ALL IMPLIES TO METHOD OR FUNCTION, BUT NOT FOR…</p>
<h4 id="this-in-arrow-function">This in arrow function</h4>
<p>Main problem with <code dir="auto">this</code> comes in places, where we need to pass our function somewhere else, but we still rely on current context. We can’t control context, so we either copy <code dir="auto">this</code> and save via scope(our function is no longer <code dir="auto">this</code>-aware) OR use arrow functions</p>
<ul>
<li>arrow function presents a possibility to use “lexical this” pattern, so any <code dir="auto">this</code> inside arrow function refers to context, function was created, and NOT dynamic context</li>
<li>this means, that <code dir="auto">this</code> in any arrow function is just a simple keyword, that is using possibilities of lexical scope
<ul>
<li>note: now it not matters how function was called, but where it was created(but we still care how surrounding function was called)</li>
</ul>
</li>
</ul>
<p>notes:</p>
<ul>
<li>we can still <code dir="auto">call/apply</code> on arrow function, but it will have no effect</li>
<li>if arrow function have no <code dir="auto">this</code> in it’s/outer scope, <code dir="auto">this</code> will result in <code dir="auto">{}</code></li>
<li><code dir="auto">this</code> will take value of first occurrence, so even if function doesn’t have any defined <code dir="auto">this</code> it still has default context, so <code dir="auto">this</code> in arrow function resolves to <code dir="auto">globalThis</code></li>
<li>alternative to arrow function - <code dir="auto">.bind(context)</code> function method, that defines new function, with fixed context
<ul>
<li>we are doing “hard binding”</li>
<li>bounded function can loose it’s bind, when called with <code dir="auto">new</code>
<ul>
<li>arrow function can’t and will throw, if called with <code dir="auto">new</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<p>remember: binding or creating arrow function takes some memory(this memory can’t be cleaned too, if we didn’t unsubscribed), so it is important to be careful with this</p>
<h4 id="this-corner-cases">This corner cases</h4>
<p>Worse to mention, that <code dir="auto">this</code> resolves to <code dir="auto">globalThis</code>, when we invoking our function indirectly, for example:</p>
<ul>
<li><code dir="auto">(1, a.do)(3, 7);</code> - evaluates expression and indirectly invokes function</li>
<li><code dir="auto">(() => a.do)()(3, 7);</code></li>
<li>any IIFE variation
exception:</li>
<li><code dir="auto">(a.do)(3, 7)</code>, because it resolves into <code dir="auto">a.do(3, 7)</code></li>
</ul>
<p>this corner cases suffer from “strict” mode, caze <code dir="auto">globalThis</code> in default context is <code dir="auto">undefined</code>, BUT creating function with <code dir="auto">new Function(string)</code> will create non “strict” functions, that ALWAYS resolve <code dir="auto">this</code> to <code dir="auto">globalThis</code>, so we can get reliable polyfill: <code dir="auto">const t = new Function("return this")();</code></p>
<ul>
<li>but, often such hack is broken by browser’s Content-Security-Policy (CSP), that prevent dynamic code evaluation
<ul>
<li>but, we still can get <code dir="auto">globalThis</code>, because spec guarantees, that in both modes <code dir="auto">this</code> resolves in <code dir="auto">globalThis</code> for getters, defined on properties of global objects</li>
</ul>
</li>
</ul>
<p>other case, we can call template tag function(function is been called with such syntax:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">function</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">someFunction</span><span style="--0:#D9F5DD;--1:#111111">()</span><span style="--0:#D6DEEB;--1:#403F53">{}</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#82AAFF;--1:#3C63B3">someFunction</span><span style="--0:#D6DEEB;--1:#403F53">`</span><span style="--0:#ECC48D;--1:#3C63B3">string</span><span style="--0:#D6DEEB;--1:#403F53">`</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="function someFunction(){}someFunction&#x60;string&#x60;;"><div></div></button></div></figure></div>
<p>this will have same evaluation as for default functions, but without <code dir="auto">new</code>, <code dir="auto">call/apply</code>, because it is not possible to call function in this way</p>
<p>via this functions we can work with and parse in specific way templated strings, consider this example:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">function</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">a</span><span style="--0:#D9F5DD;--1:#111111">(</span><span style="--0:#7FDBCA;--1:#097174">...</span><span style="--0:#D7DBE0;--1:#403F53">args</span><span style="--0:#D9F5DD;--1:#111111">)</span><span style="--0:#D6DEEB;--1:#403F53"> { </span><span style="--0:#7FDBCA;--1:#097174">console</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#82AAFF;--1:#3C63B3">log</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#7FDBCA;--1:#097174">...</span><span style="--1:#403F53"><span style="--0:#D7DBE0">args</span><span style="--0:#D6DEEB">); }</span></span></div><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">const </span><span style="--0:#82AAFF;--1:#3C63B3">b</span><span style="--0:#C792EA;--1:#8D46B4"> = </span><span style="--0:#F78C6C;--1:#AA0982">123</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#82AAFF;--1:#3C63B3">a</span><span style="--0:#D6DEEB;--1:#403F53">`</span><span style="--0:#ECC48D;--1:#3C63B3">hello </span><span style="--0:#DD6B68;--1:#B73936">${</span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#DD6B68;--1:#B73936">}</span><span style="--0:#ECC48D;--1:#3C63B3"> world </span><span style="--0:#DD6B68;--1:#B73936">${</span><span style="--0:#D7DBE0;--1:#403F53">b</span><span style="--0:#DD6B68;--1:#B73936">}</span><span style="--0:#D6DEEB;--1:#403F53">`</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div><div class="ec-line"><span style="--0:#809191;--1:#5E6578">// clg: [ 'hello ', ' world ', '' ] 1 123</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="function a(...args) { console.log(...args); }const b = 123;a&#x60;hello ${1} world ${b}&#x60;;// clg: [ &#x27;hello &#x27;, &#x27; world &#x27;, &#x27;&#x27; ] 1 123"><div></div></button></div></figure></div>
<h4 id="delegation-in-js">Delegation in JS</h4>
<blockquote>
<p>All we have are objects, linked to and cooperating with other objects.</p>
</blockquote>
<p>Delegation is about multiple things working together to complete some task
It is not mainstream pattern in JS and lies somewhere in between OOP’s class inheritance and object modules</p>
<ul>
<li>
<p>in classes we have some parent that represents behavior(class) and children that inherits from it</p>
</li>
<li>
<p>in delegation we have equal peers, that cooperate with each other</p>
<ul>
<li>via delegation we can achieve virtual composition by calling some predefined functions with any context and there for composing behavior of some object at a run-time and not composing a class, that will give it’s behavior to instance</li>
<li>we can achieve flexibility by calling methods with <code dir="auto">this</code>, but not declaring this on current object(so we can delegate execution to other context)
<ul>
<li><em>fils a bit stinky to me :)</em></li>
</ul>
</li>
<li>we can use <code dir="auto">this</code> context or pass context directly to achieve delegation</li>
</ul>
</li>
<li>
<p><code dir="auto">constructor</code> is an initializator for our instance, but it’s creation is happening via <code dir="auto">new</code></p>
<ul>
<li>we can re-implement class with constructor as function factory, that do same things(create object, link prototype, init and return)
<ul>
<li>note: it is bad to call factory with <code dir="auto">new</code> caze we basically create and throw away on object under the hood</li>
<li>we can delegate initialization from our factory to object <code dir="auto">init</code> method(or smth like this) and there for need in factory is vanished(case create, link and init can be done with <code dir="auto">Object.create(baseProptotype)</code> + <code dir="auto">obj.init()</code>)</li>
<li>in this way we can move from vertical class based inheritance to other ideas as mixins etc</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="primitives">Primitives</h4>
<p>Again, not everything in JS is an object, some of them are primitive values
Note: value has type, rather than variable</p>
<p>all primitives:</p>
<ul>
<li>undefined
<ul>
<li>acts as an empty value and placeholder for empty places</li>
</ul>
</li>
<li>null
<ul>
<li><code dir="auto">typeof</code> results in an <code dir="auto">object</code> for legacy reasons</li>
</ul>
</li>
<li>boolean</li>
<li>number</li>
<li>bigint</li>
<li>symbol</li>
<li>string
this is a string values, that <code dir="auto">typeof</code> will return for different primitives(when called on value or variable)</li>
<li><code dir="auto">typeof</code> will also return <code dir="auto">undefined</code> for non-existing variables without throwing</li>
</ul>
<p>key difference is that primitives don’t have properties</p>
<ul>
<li>all properties like <code dir="auto">.toString()</code> or <code dir="auto">.length</code> come from auto-boxing</li>
</ul>
<h4 id="nullish">Null’ish</h4>
<p>generally an empty values, like <code dir="auto">null</code> or <code dir="auto">undefined</code></p>
<ul>
<li>logically <code dir="auto">null</code> and <code dir="auto">undefined</code> mean the same, so it is kinda matter of preference in choosing one/another
<ul>
<li>but it is important to be careful, case JS can behave differently, for example:
<ul>
<li><code dir="auto">function a(a = "a") return a; a(null) => null</code></li>
</ul>
</li>
</ul>
</li>
<li>in coercive comparison <code dir="auto">null</code> equals to <code dir="auto">undefined</code>, BUT not to other falsy values
<ul>
<li>as well we have <code dir="auto">??</code> nullish-coalescing operator, that similar to <code dir="auto">||</code>, but will choose first value even if it is falsy, but not null’ish</li>
</ul>
</li>
</ul>
<h4 id="boolean">Boolean</h4>
<p>representing two values: <code dir="auto">true | false</code>, or more properly <code dir="auto">1 | 0</code></p>
<p>used for most logic handling</p>
<p>can be flipped via <code dir="auto">!</code></p>
<h4 id="string">String</h4>
<p>String is a collection of one or more characters, that enclosed in ` or ’ or ” from both sides</p>
<p>All strings have “property” <code dir="auto">length</code> that represents number of actual character(<strong>unicode warning</strong>) in it</p>
<p>unicode 101</p>
<ul>
<li>unicode represent all characters that can be represent with number from <code dir="auto">0</code> to <code dir="auto">10FFFF</code>, usually in <code dir="auto">U+(4-6 hex numbers)</code> notation</li>
<li>there are different types of unicode(8, 16, 32)</li>
<li>first 65.535 characters are stored as 2-byte UTF-16 character, for other characters more space is needed, so they stored as surrogate pairs(basically two 2-byte characters)
<ul>
<li>this pairs are meaningful only in pair an rear alone</li>
</ul>
</li>
<li>there are graphemes - unicode characters that looks like one symbol, but may be combined from many code-points(👩‍👩‍👦‍👦 === 7 adjacent code-points)
<ul>
<li>underlying code-points are meaningful code-points</li>
</ul>
</li>
</ul>
<p>escaping strings</p>
<ul>
<li>’ and ” quotes represent string as-is, except for special \ escaped symbols:
<ul>
<li>full list: <code dir="auto">b</code>, <code dir="auto">f</code>, <code dir="auto">n</code>, <code dir="auto">r</code>, <code dir="auto">t</code>, <code dir="auto">v</code>, <code dir="auto">0</code>, <code dir="auto">'</code>, <code dir="auto">"</code>
<ul>
<li>in other cases \ is just dropped</li>
</ul>
</li>
<li>additionally we have multi character escapes</li>
<li><code dir="auto">\u(4 hex digits)</code> - represent Unicode BMP characters
<ul>
<li>additionally unicode can be represented like two pairs or like this: <code dir="auto">\u{...}</code>
<ul>
<li>note: <code dir="auto">\u{...}</code> is same as unicode pair and both cases have <code dir="auto">length</code> of 2</li>
</ul>
</li>
<li>also some BMP characters can be represented as pair of basic and symbol character
<ul>
<li>example: <code dir="auto">é</code></li>
<li>such symbol is named combining part an makes sense in pair with letter</li>
<li>note: if we are using BMP notation length will be 1 and for surrogate pair it will be 2 + we will have false comparison
<ul>
<li>it cases some corner cases like this to: <code dir="auto">"é" === "é"; // false</code></li>
</ul>
</li>
</ul>
</li>
<li>JS has <code dir="auto">str.normalize(method)</code> to normalize unicode to some state
<ul>
<li><code dir="auto">"NFC"</code> - combines several code-points into composed one</li>
<li><code dir="auto">"NFD"</code> - opposite one</li>
<li>also there is cases for letters with several special symbols, that will resolve in 3->1 code-points change</li>
<li>normalization won’t proper work for graphemes, caze they are combination of valid code-points</li>
</ul>
</li>
</ul>
</li>
<li><code dir="auto">\x(2 hex digits)</code> - represent ASCII character
<ul>
<li><code dir="auto">"a" === "\x61"; // true</code></li>
</ul>
</li>
<li>we can also break strings into separate lines in code, but not in string like this:
<ul>
<li>such syntax is often called as multi-line, but, to be fair, it is just syntax and not real multi-line</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">const </span><span style="--0:#82AAFF;--1:#3C63B3">a</span><span style="--0:#C792EA;--1:#8D46B4"> = </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">Hello </span><span style="--0:#F78C6C;--1:#AA0982">\</span></div><div class="ec-line"><span style="--0:#ECC48D;--1:#9B504E">World!</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#7FDBCA;--1:#097174">console</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#82AAFF;--1:#3C63B3">log</span><span style="--1:#403F53"><span style="--0:#D6DEEB">(</span><span style="--0:#D7DBE0">a</span><span style="--0:#D6DEEB">); </span></span><span style="--0:#809191;--1:#5E6578">// Hello World!</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="const a = &#x22;Hello \World!&#x22;;console.log(a); // Hello World!"><div></div></button></div></figure></div>
<ul>
<li>` strings(template literals / interpolate strings) work the same as default string, but with some additions:
<ul>
<li>parsing of <code dir="auto">${}</code> values, with evaluation and interpolation of value inside of it to string
<ul>
<li>we can put some value or even complex JS code, including other template literals…so presenting advanced JS code, never seen before:</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">const </span><span style="--0:#82AAFF;--1:#3C63B3">main</span><span style="--0:#C792EA;--1:#8D46B4"> = </span><span style="--0:#D6DEEB;--1:#403F53">`</span><span style="--0:#DD6B68;--1:#B73936">${</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#C792EA;--1:#8D46B4">function</span><span style="--0:#DD6B68;--1:#B73936"> </span><span style="--0:#D9F5DD;--1:#111111">()</span><span style="--0:#DD6B68;--1:#B73936"> {</span></div><div class="ec-line"><span style="--0:#DD6B68;--1:#B73936">  </span><span style="--0:#7FDBCA;--1:#097174">console</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#82AAFF;--1:#3C63B3">log</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D6DEEB;--1:#403F53">"</span><span style="--0:#ECC48D;--1:#9B504E">I am inside a string!</span><span style="--0:#D6DEEB;--1:#403F53">"</span><span style="--0:#D6DEEB;--1:#403F53">)</span><span style="--0:#DD6B68;--1:#B73936">;</span></div><div class="ec-line"><span style="--0:#DD6B68;--1:#B73936">}</span><span style="--0:#D6DEEB;--1:#403F53">)()</span><span style="--0:#DD6B68;--1:#B73936">}</span><span style="--0:#D6DEEB;--1:#403F53">`</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="const main = &#x60;${(function () {  console.log(&#x22;I am inside a string!&#x22;);})()}&#x60;;"><div></div></button></div></figure></div>
<ul>
<li>
<ul>
<li>multi-line strings - template literals indeed can be multiline, but new lines are part of string(they still can be escaped as for default strings)</li>
<li>template literals can be tagged(passed to function as shown before)
<ul>
<li>this means that tagged template literal can resolve in any value(untagged only in string)</li>
</ul>
</li>
<li>we can’t use such strings for:
<ul>
<li>“use strict”</li>
<li>property names</li>
<li>destruction patterns</li>
<li>import..from</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="number">Number</h4>
<p>JS numbers are 64-bit floating point signed numbers</p>
<p>int string -> int conversion JS differs methods to parsing and coercion types:</p>
<ul>
<li>parsing:
<ul>
<li>extract number from string, even if there is some non numeric characters
<ul>
<li>note: parsing is done only on string values, so other values will be converted to string, there for <code dir="auto">parseInt(float)</code> is worse than just <code dir="auto">Math.floor</code></li>
<li>both parsers try to find numeric characters in string and stop, when they find non-number
<ul>
<li>if first character is non-numeric, we will get <code dir="auto">NaN</code></li>
<li><code dir="auto">.</code> is non-number for <code dir="auto">parseInt</code></li>
</ul>
</li>
</ul>
</li>
<li>examples:
<ul>
<li><code dir="auto">parseInt(string, radix) -> number</code>
<ul>
<li><code dir="auto">radix</code> is number(2-36) that represents base to parse number from
<ul>
<li>incorrect <code dir="auto">radix</code> results in <code dir="auto">NaN</code></li>
<li>omitting <code dir="auto">radix</code> makes JS try to guess base of a number by first digit(s)</li>
<li><code dir="auto">str.toString(radix?)</code> can work with radix to convert number to some base</li>
</ul>
</li>
</ul>
</li>
<li><code dir="auto">parseFloat(string) -> number</code>
<ul>
<li><code dir="auto">radix</code> is always 10</li>
<li>can parse scientific notation, but <code dir="auto">parseInt</code> can’t</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>coercion:
<ul>
<li>try fully extract number from string or fail with <code dir="auto">NaN</code></li>
<li>done with: <code dir="auto">Number</code> or <code dir="auto">+</code></li>
</ul>
</li>
</ul>
<p>all numbers in JS are in base-10(under the hood to), but there are other notations(case insensitive):</p>
<ul>
<li>binary: <code dir="auto">0b111</code></li>
<li>octal: <code dir="auto">0o37</code></li>
<li>hexadecimal: <code dir="auto">0x2a</code></li>
<li>scientific: <code dir="auto">3.7e1</code> or <code dir="auto">3.7e+1</code> or <code dir="auto">3.7e-1</code>
<ul>
<li>
<ul>
<li>and - are different and makes floating point go right or left</li>
</ul>
</li>
<li>basically it is specifying some number in power of 10</li>
<li>very large/small(21 digit of persision) number are converted to string as scientific notations
<ul>
<li>123 ** 11 -> “9.748913698143826e+22”</li>
<li>123 ** -11 -> “1.0257553107587752e-23”</li>
</ul>
</li>
<li>scientific notation strings can be got via <code dir="auto">number.toExponential(precision) -> string</code>, where precision - number of decimal digits</li>
</ul>
</li>
</ul>
<p>JS allows to notate numbers with <code dir="auto">_</code>, for readability reasons, like this: <code dir="auto">12_345</code>, which equals to <code dir="auto">12345</code></p>
<p>JS has a max number, that exposed via <code dir="auto">Number.MAX_VALUE // 1.7976931348623157e+308</code>, which is an integer and is around <code dir="auto">(2^1024)-1</code></p>
<ul>
<li>we can’t have values higher then this, except of <code dir="auto">Infinity</code>
<ul>
<li>note: we can’t get <code dir="auto">Infinity</code> by adding to this number some small number, but it is possible to overflow and get <code dir="auto">Infinity</code> with some arithmetic
<ul>
<li>it is one way rule and <code dir="auto">Infinity</code> can resolve in some number</li>
</ul>
</li>
</ul>
</li>
<li>there is another variant of max number, <code dir="auto">Number.MAX_SAFE_INTEGER // 9007199254740991 == (2 ^ 53) - 1</code>, that is much smaller that original max value
<ul>
<li>over this number arithmetics falls down and become unpredictable</li>
</ul>
</li>
<li><code dir="auto">Number.MIN_SAFE_INTEGER</code> is negative of max safe
<ul>
<li>or <code dir="auto">0</code> :)</li>
</ul>
</li>
</ul>
<p>JS has a min number(not negative, but closest to zero), that is exposed via <code dir="auto">Number.MIN_VALUE</code> and can be different by JS spec</p>
<p>there is <code dir="auto">-0</code> in JS, that is <code dir="auto">===</code> to <code dir="auto">0</code>, but not <code dir="auto">Object.is</code></p>
<ul>
<li>it comes from IEEE-754 and kinda hidden in JS</li>
<li>could be useful to track 2D velocity+direction</li>
<li>it is not a thing for <code dir="auto">bigint</code></li>
</ul>
<p>APIs:</p>
<ul>
<li><code dir="auto">Number.isInteger(number) -> boolean</code></li>
<li><code dir="auto">Number.isFinite(number) -> boolean</code></li>
<li><code dir="auto">Number.isSafeInteger(number) -> boolean</code></li>
</ul>
<h4 id="ieee-754-101">IEEE-754 101</h4>
<p>It is a standard for representing numbers in binary
JS uses double-precision variation of it(64-bit)</p>
<ul>
<li>52 bits for number - mantissa
<ul>
<li>this value is multiplied to (2 ^ exponent) for final result</li>
</ul>
</li>
<li>11 bits for exponenta(2 ^ exponent)
<ul>
<li>we always extract 1023 from mantissa, caze it is shifted</li>
</ul>
</li>
<li>1 bit - sign
<ul>
<li>1 for negative
so we have <code dir="auto">2^64 - 2^53 + 3</code> signed numbers</li>
</ul>
</li>
</ul>
<p>bits are placed like this: “SEE…EMMM…M”</p>
<p>floating point comes from the fact, that decimal points “float” along the bits, so close values can have very different notation</p>
<p>this standard is also reserves values for:</p>
<ul>
<li><code dir="auto">+-Infinity</code></li>
<li><code dir="auto">-0</code></li>
<li><code dir="auto">NaN</code> // thats why JS treats <code dir="auto">NaN</code> as <code dir="auto">number</code></li>
</ul>
<h4 id="nan">NaN</h4>
<p>Not a Number - result of failed conversion or math operation(number divide by string)</p>
<ul>
<li><code dir="auto">+undefined -> NaN</code></li>
</ul>
<p>note:</p>
<ul>
<li><code dir="auto">NaN === NaN // false</code></li>
<li><code dir="auto">Number.isNaN(NaN) // true</code>
<ul>
<li>it is superior to global <code dir="auto">isNaN</code> caze global one converts non-numeric values to number first, so string will become <code dir="auto">NaN</code>, there for check will be successful</li>
</ul>
</li>
<li><code dir="auto">Object.is(NaN, NaN) // true</code></li>
<li><code dir="auto">[NaN].includes(NaN) // true</code></li>
</ul>
<h4 id="bigint">BigInt</h4>
<p>Allows to store big values(commonly 64-bit IDs) with no theoretical limit(depends on implementation and computation resources)</p>
<p>bigints in JS have <code dir="auto">n</code> postfix like this: <code dir="auto">37n</code></p>
<ul>
<li>this postfix is purely syntactic</li>
<li>we can perform same arithmetic operations on them, but it is restricted to number-number or bigint-bigint, no mixing</li>
<li>can be converted from number/string(coercive) via <code dir="auto">BigInt(number|string)</code>
<ul>
<li><code dir="auto">n</code> is note allowed to be in string</li>
</ul>
</li>
</ul>
<h4 id="symbol">Symbol</h4>
<p>Symbol is a special value, that can be created via <code dir="auto">Symbol(string) -> symbol</code></p>
<ul>
<li>any value passed in constructor is for debugging purposes only</li>
<li>it is impossible to inspect underlines of the symbol
<ul>
<li>engine will never expose it, but it is known that some engines might just use incrementing number strategy(like numeric IDs in DB)</li>
</ul>
</li>
<li>characteristics
<ul>
<li>unguessable</li>
<li>won’t repeat in scope of program</li>
</ul>
</li>
</ul>
<p>use-cases</p>
<ul>
<li>check if variable renamed unchanged</li>
<li>set “private” object methods
<ul>
<li>they are still visible, but kinda set apart + non-enumerable</li>
<li>we can compare symbols with “mark as private” notation of <code dir="auto">_</code></li>
</ul>
</li>
</ul>
<p>well known symbols - some symbols that represent some meta-properties and left public(as property on <code dir="auto">Symbol</code>) to some manipulation:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#82AAFF;--1:#3C63B3">String</span><span style="--1:#403F53"><span style="--0:#D6DEEB">(</span><span style="--0:#D7DBE0">obj</span><span style="--0:#D6DEEB">); </span></span><span style="--0:#809191;--1:#5E6578">// [object Object]</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--1:#403F53"><span style="--0:#D7DBE0">obj</span><span style="--0:#D6DEEB">[</span></span><span style="--0:#7FDBCA;--1:#097174">Symbol</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#7FDBCA;--1:#097174">toStringTag</span><span style="--0:#D6DEEB;--1:#403F53">] </span><span style="--0:#C792EA;--1:#8D46B4">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">123</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#82AAFF;--1:#3C63B3">String</span><span style="--1:#403F53"><span style="--0:#D6DEEB">(</span><span style="--0:#D7DBE0">obj</span><span style="--0:#D6DEEB">); </span></span><span style="--0:#809191;--1:#5E6578">// [object 123]</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="String(obj); // [object Object]obj[Symbol.toStringTag] = &#x22;123&#x22;;String(obj); // [object 123]"><div></div></button></div></figure></div>
<p>other WKS:</p>
<ul>
<li><code dir="auto">.iterator</code> - symbol that stores iterator implementation</li>
<li><code dir="auto">.toPrimitive</code> - allow to override ToPrimitive bahvior
<ul>
<li><code dir="auto">[Symbol.toPrimitive](hint) {...}</code></li>
</ul>
</li>
</ul>
<p>JS has built in global symbols management system, so we won’t need to cary them around. API:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">const </span><span style="--0:#82AAFF;--1:#3C63B3">symb</span><span style="--0:#C792EA;--1:#8D46B4"> = </span><span style="--0:#7FDBCA;--1:#097174">Symbol</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#82AAFF;--1:#3C63B3">for</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">37</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">); </span><span style="--0:#809191;--1:#5E6578">// retrieve OR create new</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">const </span><span style="--0:#82AAFF;--1:#3C63B3">symbKey</span><span style="--0:#C792EA;--1:#8D46B4"> = </span><span style="--0:#7FDBCA;--1:#097174">Symbol</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#82AAFF;--1:#3C63B3">keyFor</span><span style="--1:#403F53"><span style="--0:#D6DEEB">(</span><span style="--0:#D7DBE0">symb</span><span style="--0:#D6DEEB">); </span></span><span style="--0:#809191;--1:#5E6578">// "37"</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">const </span><span style="--0:#82AAFF;--1:#3C63B3">symb2</span><span style="--0:#C792EA;--1:#8D46B4"> = </span><span style="--0:#7FDBCA;--1:#097174">Symbol</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#82AAFF;--1:#3C63B3">for</span><span style="--1:#403F53"><span style="--0:#D6DEEB">(</span><span style="--0:#D7DBE0">symbKey</span><span style="--0:#D6DEEB">);</span></span></div><div class="ec-line">
</div><div class="ec-line"><span style="--1:#403F53"><span style="--0:#D7DBE0">symb</span><span style="--0:#D6DEEB"> </span></span><span style="--0:#C792EA;--1:#8D46B4">===</span><span style="--1:#403F53"><span style="--0:#D6DEEB"> </span><span style="--0:#D7DBE0">symb2</span><span style="--0:#D6DEEB"> </span></span><span style="--0:#809191;--1:#5E6578">// true</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="const symb = Symbol.for(&#x22;37&#x22;); // retrieve OR create newconst symbKey = Symbol.keyFor(symb); // &#x22;37&#x22;const symb2 = Symbol.for(symbKey);symb === symb2 // true"><div></div></button></div></figure></div>
<p>we treat symbols as primitives, BUT worse mentioning that they have specified prototype(by spec) and kinda unuq as object reference</p>
<h4 id="dive-into-primitives">Dive into primitives</h4>
<p>All JS primitives are immutable(you can change value of variable, create new values, BUT not mutate value itself)</p>
<ul>
<li>note: strings are read-only, so even if look like <code dir="auto">char[]</code>, they are not. Operations like this(assigning to read-only property) <code dir="auto">"123"[0] = 9</code> will silently fail/throw</li>
<li>const is never affects value mutability
<ul>
<li><code dir="auto">writable: false</code> on property has same effect</li>
</ul>
</li>
</ul>
<p>primitives allow property access(except <code dir="auto">null</code>, <code dir="auto">undefined</code>). Also we can write properties, but with now change(silent failure)</p>
<ul>
<li>note: everything bellow is facilitated by auto-boxing</li>
<li>some properties are exposed by default, like <code dir="auto">.length</code> for strings. It is read-only and show number of code-points in a string</li>
<li>also primitives have standard or special for some type exposed properties/methods, like:
<ul>
<li><code dir="auto">.toString() -> string</code></li>
<li><code dir="auto">.valueOf() -> any</code></li>
</ul>
</li>
</ul>
<p>primitive assignment and passing is always by copy</p>
<h5 id="strings">Strings</h5>
<p>strings are not arrays, but they:</p>
<ul>
<li>allow access to chars via <code dir="auto">[index]</code>, where index is coerced to a number(or <code dir="auto">NaN</code> thus resulting in <code dir="auto">undefined</code>)</li>
<li>allow array like iteration</li>
</ul>
<p>length computation:</p>
<ul>
<li>each code-unit in JS is 16bit value</li>
<li>it is better to use <code dir="auto">"NFC"</code> normalization to make result closer to visual length of string</li>
<li>to deal with surrogate pairs we can use <code dir="auto">[...string].length</code> hack, that will break string not by surrogate, but by pair
<ul>
<li>won’t work for combined code-points</li>
</ul>
</li>
</ul>
<p>i18n and i10n</p>
<ul>
<li>JS has ability to detect context in which it is running and adjust its behavior with string, dates, numbers etc
<ul>
<li>character itself can have some special behavior to it</li>
<li>to force some behavior we have <code dir="auto">Intl</code> API
<ul>
<li><code dir="auto">.Colorator("lang code", options)</code> - create instance of helper, that force language behavior and have methods like <code dir="auto">.compare</code></li>
<li><code dir="auto">.Segmentor("lang code", options)</code> - creates instance of helper, that takes a string and return an iterator over some part of string(words etc, with respect to language)</li>
</ul>
</li>
<li>examples:
<ul>
<li>changing direction of chars in string (on rendering stage)</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>equality</p>
<ul>
<li>any equality check is case sensitive(if it makes sense for such char)
<ul>
<li>normalization can be done via <code dir="auto">.toUpperCase()</code> or <code dir="auto">.toLowerCase()</code></li>
</ul>
</li>
<li>types:
<ul>
<li>string equality - check if two strings are exactly equal
<ul>
<li><code dir="auto">==</code> or <code dir="auto">===</code> or <code dir="auto">Object.is</code></li>
</ul>
</li>
<li>relational comparison - compare if one string “larger”/“smaller” than other
<ul>
<li><code dir="auto">></code> or <code dir="auto">&#x3C;</code> or <code dir="auto">>=</code> or <code dir="auto">&#x3C;=</code>
<ul>
<li>interestingly JS doesn’t specify <code dir="auto">></code> and <code dir="auto">>=</code> it just uses revers variation of <code dir="auto">&#x3C;=</code> and <code dir="auto">&#x3C;</code> respectively</li>
</ul>
</li>
<li>it is done by performing lexicographical comparison(like in a dictionary, by alphabet)
<ul>
<li>locale based
<ul>
<li>to enforce some locale we can use <code dir="auto">str.localeCompare(str, lang, options) -> 0|1|-1</code>
<ul>
<li><code dir="auto">Intl.Colorator</code> is more efficient for same task</li>
</ul>
</li>
</ul>
</li>
<li>always coercive</li>
<li>this results in such cases: <code dir="auto">"11" > "100" /// true</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>concatenation</p>
<ul>
<li>in JS string concatenation is done via <code dir="auto">+</code>, but usually it is clearer to just use template strings</li>
<li>for variable string size we can use:
<ul>
<li><code dir="auto">str.concat(str1, ...)</code></li>
<li><code dir="auto">[str1, str2, ...].join("separator")</code></li>
</ul>
</li>
</ul>
<p>API</p>
<ul>
<li><code dir="auto">String.raw'...'</code> - default template tag function, that prevents character escape</li>
</ul>
<h6 id="number-1">Number</h6>
<p>While working with numbers it is important to remember about IEEE-754 floating point imprecision, famous: <code dir="auto">0.1 + 0.2 === 0.3000...004</code>
to deal with it:</p>
<ul>
<li>we can use <code dir="auto">Number.EPSILON</code>, that basically just a small number, that, in theory, should be less, than such imprecision errors
<ul>
<li>in practice it is no a deal, so we can scale <code dir="auto">EPSILON</code> or use other approaches</li>
</ul>
</li>
<li>convert floating numbers to number/biging, operate with them and convert back on output</li>
<li>use external libs</li>
<li>don’t use IEEE-754 based environment</li>
</ul>
<p>comparison - numbers are always compared as binary values under the hood and not literal representations, so base notation doesn’t matter</p>
<ul>
<li>JS doesn’t differ between <code dir="auto">37</code>, <code dir="auto">37.0</code>, <code dir="auto">37.0000</code> etc</li>
<li>remember that: <code dir="auto">-0 === 0 // true</code> and <code dir="auto">NaN === NaN // false</code>
<ul>
<li><code dir="auto">Object.is</code> avoids this problems</li>
</ul>
</li>
</ul>
<p>math operations</p>
<ul>
<li><code dir="auto">+</code>, <code dir="auto">-</code>, <code dir="auto">*</code>, <code dir="auto">/</code>, <code dir="auto">** // exponentiation</code>, <code dir="auto">% // modulo</code>
<ul>
<li><code dir="auto">+</code> is overloaded, so if one of operand is string, we will have string coercion and concatenation</li>
<li>all operations have <code dir="auto">+=</code> like short-hand</li>
<li>all this operations are binary, so expect number(or try to do coercion to it) on both sides</li>
<li><code dir="auto">+</code> and <code dir="auto">-</code> can be used in unary form, meaning with one operand like this: <code dir="auto">+37</code>
<ul>
<li>interestingly, JS syntax doesn’t allow to have negative numbers, so <code dir="auto">-42</code> will be ready as positive 42 negatived by minus sign</li>
<li>we can put any number of whitespaces(tab, space, new line) between operator an operand</li>
</ul>
</li>
</ul>
</li>
<li><code dir="auto">++</code> and <code dir="auto">--</code> - increment and decrement operators, that are unary and except only one valid number and do <code dir="auto">+= 1</code> to it
<ul>
<li>there is a behavior difference between position of this operator(before or after operand)</li>
</ul>
</li>
<li>BITWISE - bit-level operations
<ul>
<li>flow: convert operand to 32-bit signed int, do bit manipulation, convert back to IEEE-754 representation</li>
<li>all bitwise have <code dir="auto">+=</code> like short-hand</li>
<li><code dir="auto">&#x26;</code> - AND</li>
<li><code dir="auto">|</code> - OR
<ul>
<li>can be used to truncate decimal part AKA convert to int</li>
</ul>
</li>
<li><code dir="auto">^</code> - XOR(eXclusive OR) - true if both different</li>
<li><code dir="auto">~</code> - NOT - unary operator
<ul>
<li>basically: <code dir="auto">~x === -(x + 1)</code></li>
</ul>
</li>
<li><code dir="auto">operand &#x3C;&#x3C; number</code> - shift operand’s bits to left to number positions</li>
<li><code dir="auto">>></code> - right shift, with sign preservation</li>
<li><code dir="auto">>>></code> - right shift, without sign preservation</li>
</ul>
</li>
</ul>
<p><code dir="auto">.property</code> on number value can case exception, if there is no dot in it(can be whitespaced, boxed or put into <code dir="auto">()</code> to avoid exception)</p>
<ul>
<li>we can see that <code dir="auto">37..property</code> is legal, case <code dir="auto">37.</code> syntax itself is legit</li>
<li>bigint won’t suffer from it, caze no decimals</li>
</ul>
<p>interestingly we can find <code dir="auto">NaN, Infinity, -Infinity</code> as static properties on <code dir="auto">Number</code> object</p>
<p>for math purposes JS exposes <code dir="auto">Math</code> object with constants and static helpers</p>
<ul>
<li><code dir="auto">Math.random</code> is disregarded as been unsafe for pseudo random number generator(PRNG)
<ul>
<li>as alternative we have <code dir="auto">crypto.getRandomValues()</code> API</li>
</ul>
</li>
</ul>
<p>bigint &#x3C;-> number</p>
<ul>
<li>float -> bigint will throw</li>
<li><code dir="auto">NaN</code> | <code dir="auto">Infinity</code> -> bigint will throw</li>
<li>too big bigint -> <code dir="auto">Infinity</code></li>
</ul>
<h4 id="objects-1">Objects</h4>
<p><code dir="auto">object</code> as  a type has several sub-types with uniq behaviors. but overall they all just act as collection of properties with some values:</p>
<ul>
<li>plain object
<ul>
<li>usually defined via <code dir="auto">{}</code> or <code dir="auto">new Object(prototype)</code></li>
<li>acts as collection of named properties with values(any primitive or object)</li>
<li><code dir="auto">__proto__</code> is linked to <code dir="auto">Object.prototype</code>, so they have delegation access to some methods</li>
</ul>
</li>
<li>boxed primitives(fundamental objects)
<ul>
<li>instances of various built-in constructors</li>
<li><code dir="auto">String</code>, <code dir="auto">Number</code>, <code dir="auto">Boolean</code> etc</li>
<li>by calling <code dir="auto">Obj(value)</code> we performing coercion, but when calling it with <code dir="auto">new</code> we are getting instance, that wraps a primitive value inside of it
<ul>
<li>it is a bad practice to use <code dir="auto">new</code>, caze plain primitives are more reliable and optimized. Also <code dir="auto">typeof</code> will be <code dir="auto">"object"</code> for such instances</li>
<li><code dir="auto">Symbol</code> and <code dir="auto">BigInt</code> are “constructor” sub-type, which means they can’t be used with <code dir="auto">new</code> and will always produce plain value</li>
<li>auto-boxing is built on top of this instances, thus JS is creating temp object, wrapping primitives, to access methods
<ul>
<li>we can’t directly create instance for <code dir="auto">Symbol</code> and <code dir="auto">BigInt</code>, but JS still allows to auto-box them</li>
<li><code dir="auto">null</code> and <code dir="auto">undefined</code> don’t have auto-boxing, because there is no corresponding fundamental object</li>
</ul>
</li>
</ul>
</li>
<li><code dir="auto">Obj.proptotype</code> is holding corresponding methods for the type, so instance will have <code dir="auto">__proto__</code> linkage to it</li>
</ul>
</li>
<li>built-in objects
<ul>
<li><code dir="auto">Date</code>, <code dir="auto">Error</code>, <code dir="auto">Number</code> etc - defined by JS specialized objects</li>
</ul>
</li>
<li>array
<ul>
<li>similar to plain objects, but with number based keys</li>
<li>can be defined via <code dir="auto">[]</code> or <code dir="auto">new Array()</code>
<ul>
<li>there are 3 type of methods on <code dir="auto">Array.protoptype</code>:
<ul>
<li>computing and returning non-array values</li>
<li>modifying array in-place</li>
<li>modify and return copy of array</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>regex
<ul>
<li>specialized object to work with regular expressions</li>
</ul>
</li>
<li>function(callable object)</li>
</ul>
<h4 id="coercion">Coercion</h4>
<p>NOTES FROM BEFORE</p>
<ul>
<li>If types match <code dir="auto">==</code> is the same as <code dir="auto">===</code>, otherwise coercion on values is done first</li>
<li>JS is tends to convert to a number</li>
<li>rules:
<ul>
<li>if we try add smth to a string it will become string</li>
<li>there is no coercion between <code dir="auto">bigint</code> and <code dir="auto">number</code></li>
</ul>
</li>
<li>technically, auto-boxing is part of coercion, caze there is primitive->object->primitive type conversion</li>
</ul>
<p>Coercion - type conversion, aka casting one type to other</p>
<ul>
<li>it cam be explicit or implicit(or both, based on opinion)</li>
<li>it is deep part of JS and even if you don’t like it, you still most certainly using it :)</li>
</ul>
<p>by spec we have set of predefined abstract operations, that determine how values are coerced(we can’t invoke this operations, it is just method to describe behavior)</p>
<ul>
<li>ToBoolean
<ul>
<li>method: all values in JS are truthy of falsy and based on that ToBoolean makes a decision how to convert
<ul>
<li>falsy: <code dir="auto">undefined, null, "", NaN, 0, -0, 0n</code></li>
<li>truthy: other</li>
<li>basically it just a look-up table</li>
</ul>
</li>
<li>invoked at:
<ul>
<li><code dir="auto">if</code> OR <code dir="auto">? :</code>
<ul>
<li>we can’t access coerced value, it is incapsulated inside <code dir="auto">if</code></li>
</ul>
</li>
<li><code dir="auto">for/while</code></li>
<li><code dir="auto">Boolean()</code>, but more often <code dir="auto">!!</code>
<ul>
<li><code dir="auto">!</code> is unary operator to flip boolean value, that can do coercion</li>
</ul>
</li>
<li><code dir="auto">||</code>, <code dir="auto">&#x26;&#x26;</code>
<ul>
<li>note, we aren’t coercing result, we are just checking if it is truthy or falsy</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>ToPrimitive
<ul>
<li>method: takes a hint wether we converting to number or to string, than tries to convert via <code dir="auto">.toString()</code> or <code dir="auto">.valueOf()</code>(will be first for number or no hint) and, if final and hint types aren’t matching, additional ToString/ToNumber used</li>
<li>examples
<ul>
<li><code dir="auto">ToPrimitive(obj, number) -> NaN</code></li>
<li><code dir="auto">ToPrimitive([], number) -> 0</code></li>
</ul>
</li>
<li>invoked for object -> primitive cases
<ul>
<li>we have some edge cases:
<ul>
<li><code dir="auto">String(obj) -> obj.toString</code>, but <code dir="auto">obj + "" -> String(obj.valueOf())</code></li>
<li><code dir="auto">Number(obj) -> Number(obj.valueOf())</code>, but <code dir="auto">+obj -> +obj.valueOf()</code>, so bigint will throw</li>
<li>if result of converters is non-primitive we will get an exception</li>
<li>boolean coercion won’t delegate to ToPrimitive</li>
</ul>
</li>
</ul>
</li>
<li>we can unbox objects with this: <code dir="auto">String(new String("123")) -> "123"</code>
<ul>
<li>but there is a case with boolean: <code dir="auto">Boolean(new Booleand(false)) -> true</code>, case of look-up table to object</li>
</ul>
</li>
</ul>
</li>
<li>ToString
<ul>
<li>when coercing smth to string we will get similar representation as in code
<ul>
<li>examples:
<ul>
<li><code dir="auto">String(Infinity) -> "Infinity"</code></li>
<li>for object to string we will get <code dir="auto">"Object[Object]"</code></li>
<li><code dir="auto">nonString + "string"</code>, caze <code dir="auto">+</code> is overloaded
<ul>
<li>note that such coercion will throw for symbols, with some other differences with <code dir="auto">String()</code></li>
</ul>
</li>
<li>property access: <code dir="auto">[3] -> ["3"]</code>
<ul>
<li>yep, we don’t actually have numeric indexes in JS, by spec, only symbols and strings(can be number like string)</li>
</ul>
</li>
</ul>
</li>
<li>exceptions:
<ul>
<li>large numbers will be represented via notation</li>
<li><code dir="auto">-0</code> -> <code dir="auto">"0"</code></li>
<li>we can’t convert <code dir="auto">Symbol</code>
<ul>
<li>but <code dir="auto">String()</code> itself can, so we could still coerce, but it won’t be by mistake</li>
</ul>
</li>
<li>some <code dir="auto">.toString</code> operations can have underlying implementation of how to convert to string</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>ToNumber
<ul>
<li>method
<ul>
<li>when coercing string, we are getting number(if string itself is full number/number with whitespaces) or <code dir="auto">NaN</code></li>
<li><code dir="auto">true</code> -> <code dir="auto">1</code>; <code dir="auto">false</code> -> <code dir="auto">0</code>; <code dir="auto">null</code> -> <code dir="auto">0</code>; <code dir="auto">undefined</code> -> <code dir="auto">NaN</code>; <code dir="auto">"" || "      "</code> -> <code dir="auto">0</code>;</li>
<li>we can’t convert <code dir="auto">Symbol</code> and <code dir="auto">BigInt</code> to number like this: <code dir="auto">+37n</code>
<ul>
<li>but <code dir="auto">Number()</code> itself can</li>
</ul>
</li>
</ul>
</li>
<li>invoked at:
<ul>
<li><code dir="auto">Number()</code>
<ul>
<li>we can do convert from notations like this: <code dir="auto">Number("0b101010"); // 42</code></li>
</ul>
</li>
<li><code dir="auto">BigInt()</code>
<ul>
<li>for false coercion we won’t have NaN, but rather a <code dir="auto">throw</code></li>
</ul>
</li>
<li><code dir="auto">+smth</code> or any other math/bitwise operation
<ul>
<li>note that bitwise is clamping value to 32-bit int</li>
</ul>
</li>
</ul>
</li>
<li>other:
<ul>
<li>ToNumeric - activate ToPrimitive with number hint</li>
<li>ToIntegerOrInfinity, ToInt32, ToBigInt etc
<ul>
<li>list is long and covers different number types, but, for the most parts, ToNumber is activated</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>SameValue - for equality comparison
<ul>
<li>no coercion or exceptions, just straight equality check(not deep)</li>
<li>variations
<ul>
<li>SameValueZero - treats <code dir="auto">0</code> and <code dir="auto">-0</code> as same
<ul>
<li>invoked at: <code dir="auto">[NaN].includes(NaN); // true</code></li>
</ul>
</li>
<li>bigint and number have their variation</li>
<li>non-numeric values are compared via SameValueNonNumeric</li>
<li>IsStrictlyEqual
<ul>
<li>no coercion</li>
<li>if types are matched -> numeric check
<ul>
<li>it is not same numeric check as pointed earlier, because in this one <code dir="auto">-0 !== 0</code> and <code dir="auto">NaN !== NaN</code></li>
</ul>
</li>
<li>invoked at: <code dir="auto">.indexOf</code>, <code dir="auto">===</code></li>
</ul>
</li>
<li>IsLooselyEqual
<ul>
<li>IF values are same -> IsStrictlyEqual ELSE do coercion
<ul>
<li>coercion is tending to numeric values, with minimal number of coercions</li>
</ul>
</li>
<li>coercion algorithm(recursive until types are same)
<ul>
<li><code dir="auto">null === undefined</code></li>
<li>if one is <code dir="auto">number</code> and other is <code dir="auto">string</code> - convert <code dir="auto">string</code> with ToNumber</li>
<li>if one is <code dir="auto">bigint</code> and other is <code dir="auto">string</code> - convert <code dir="auto">string</code> with StringToBigInt</li>
<li><code dir="auto">boolean</code> -> <code dir="auto">number</code></li>
<li>non-primitive convert with <code dir="auto">ToPrimitive</code> with no hint(same as number hint)</li>
<li>summary: never converts to <code dir="auto">string</code>, or <code dir="auto">boolen</code>, or non-primitive</li>
</ul>
</li>
<li>invoked at: <code dir="auto">==</code>
<ul>
<li><code dir="auto">==</code> is very beneficial for nullish checks, case it won’t differ <code dir="auto">null</code> and <code dir="auto">undefined</code></li>
<li><code dir="auto">if(val) !== if(val == true)</code> case of number preference
<ul>
<li>it is better to just avoid second type of coercion</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>invoked at:
<ul>
<li><code dir="auto">Object.is</code></li>
</ul>
</li>
</ul>
</li>
<li>IsLessThen - used for all relational comparisons
<ul>
<li>it takes isLeftFirst as third parameter which determents if we need to calculate second value first
<ul>
<li>used to accomplish greater then, because we inverting order of parameters and order of their computation</li>
</ul>
</li>
<li>only coercive</li>
<li>if both values are strings, string comparison kicks-in
<ul>
<li>method
<ul>
<li>check for first value to be prefix of second, if so -> <code dir="auto">true</code></li>
<li>compare numeric codes from start-to-end(language specific) char by char
<ul>
<li>most often it will result in dictionary order</li>
<li>IMPORTANT: <code dir="auto">IsLessThan("🐔","🥚", true); // true</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>for number computation <code dir="auto">Number:lessThan</code> or <code dir="auto">BigInt:lessThan</code> are used</li>
</ul>
</li>
</ul>
<p>corner cases</p>
<ul>
<li><code dir="auto">String([null, undefined]) -> ","</code></li>
<li><code dir="auto">Number("") -> 0</code> and <code dir="auto">Number("   ") -> 0</code></li>
<li><code dir="auto">Number([]) -> 0</code></li>
<li><code dir="auto">[] == ![]</code></li>
</ul>
<h4 id="more-about-types">More about types</h4>
<p>TS is statically typed(types are declared while writing program and checked on compilation) and strongly typed(variable types won’t change implicitly)</p>
<ul>
<li>basically TS forces to declare types</li>
<li>JS is opposite, so types are managed at runtime and can coerce</li>
<li>basically we can stay type-aware without TS with right variable naming and code structure, but it adds huge mental overhead
<ul>
<li>thus TS won’t cover all corner cases and might add some more :) So it is important to still think about types etc</li>
</ul>
</li>
</ul>
<h4 id="async">Async</h4>
<p>Async is mostly about managing operations that takes quite a while to complete. Managing state, program flow(blocking/non-blocking) etc</p>
<ul>
<li>common examples: user input, BD request, data fetching, animation handling, I/O</li>
<li>we can call async that part of a program, that can’t complete now and will complete later</li>
<li>ways to do: callback, Promise</li>
<li>async heavily based on event loop, case remember, there is only 1 thread to spear :)
<ul>
<li>interestingly, proper event loop spec was introduced in ES6</li>
<li>JS doesn’t have true parallelism(multy-threading)(except workers), so we always work in one process/thread and don’t have shared memory and concurrency problems
<ul>
<li>fearless concurrency in its base 🦀</li>
</ul>
</li>
</ul>
</li>
<li>all code in JS will run to completion, meaning if we started function execution, it will block thread until finishes
<ul>
<li>we still have race condition problems, when it comes to order of async function execution
<ul>
<li>generally, it isn’t a problem for non-interacting tasks, BUT when they interact…you need to deal with it and coordinate tasks is some way
<ul>
<li>it is a bad practice to just assume that async tasks will always be in same order, even if one is much slower then other</li>
</ul>
</li>
<li>in opposite to race scenario we have latch, which means that we care only about first finisher</li>
</ul>
</li>
<li>note: generator functions in-deed can be non-run until completion</li>
</ul>
</li>
</ul>
<p>cooperation - other form of concurrency, but this time we create “cooperative” code, that won’t block all event loop, while executing some heavy function</p>
<ul>
<li>example: if we mapping across large amount of data we can break it into slices and delay executing between ticks via <code dir="auto">setTimeout(.., 0)</code> or <code dir="auto">process.nextTick()</code></li>
</ul>
<h4 id="callbacks-1">Callbacks</h4>
<p>Callbacks is a most common form of async in JS. It is implemented as do some function(aka callback), when async event is finished</p>
<ul>
<li>callbacks are base for <code dir="auto">Promise</code></li>
<li>there is a concern in callback world called “callback-hell”, that happens for multiple reasons
<ul>
<li>it is hard for brain to process async code, case of control-flow changes, multiple scenarios(loading, errors, happy flow) etc</li>
<li>purely structure of code will lead to nested logic</li>
<li>harder to test</li>
<li>3-party dependencies(aka inversion of control), which may result in unexpected bugs in logic, such as
<ul>
<li>execute to early/late or even never</li>
<li>multiple executions</li>
<li>missing props or results(some error conversions etc)</li>
<li>SO, always be careful with too many dependencies and their updates</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>callback patterns:</p>
<ul>
<li>separation of success and error flows
<ul>
<li>do what it says</li>
<li>example: ES6 Promises with <code dir="auto">.then</code> and <code dir="auto">.catch</code></li>
</ul>
</li>
<li>error first
<ul>
<li>return error as first value to make user explicitly handle it</li>
<li>example: common for some Note APIs</li>
</ul>
</li>
<li>explicit handle of not been called
<ul>
<li>wrap function in HOK, that will check if function was called before some delay and if not raise an error</li>
</ul>
</li>
<li>red-blue functions
<ul>
<li>be extremely careful, when designing APIs and avoid mixing async/sync callback handlers
<ul>
<li>it is preferable to make all callback handlers async, but if it is not right for your situation, try to state type of func in some way
<ul>
<li>this principle is called “never release Zalgo”</li>
</ul>
</li>
<li>you can also add explicit “asyncify” HOK, that will always make you cb called async
this patterns are aimed to resolve callback hell, but also can introduce in-efficiency and bloatiness to your code :)</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="promise">Promise</h4>
<p>Promise is a programing concept to work with async, that was integrated in JS and now a main way to work with async code</p>
<ul>
<li>basically we writing a code like this: take a value from Promise and do this and this OR take an error and handle it in some way, BUT this value/error are placeholders, that Promise promises to resolve, when result is ready
<ul>
<li>so we are working with future values</li>
<li>key thing that Promise makes normalization of future and now values and makes all values future
<ul>
<li>this leads to result of Promise been future value to, thus we can chain Promises
<ul>
<li>note: when Promise resolves, it’s output is read-only immutable value
<ul>
<li>so we can observe one Promise from several places and not fear of interference</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>main difference from callbacks is that we don’t need any inversion of control, meaning we aren’t passing callback to be executed by Promise, it is otherway, we are getting “notified”, when Promise resolved, so we can do some action
<ul>
<li>we can view Promise as event system OR as flow control mechanism</li>
</ul>
</li>
</ul>
<p>when constructing Promise we passing callback with resolve+reject functions as arguments, that can be called, when/if needed</p>
<ul>
<li>this pattern of non-async cb’s are called “revealing constructor”</li>
</ul>
<p>interestingly, it is not recommended to check received values is a Promise via <code dir="auto">instaceof</code>, but rather with a “duck typing” pattern, that verifies a type, by checking implementation</p>
<ul>
<li>for Promise we need to check if object is thenable, aka can work with <code dir="auto">then</code></li>
<li>it is done, case non-native API maybe used instead, that behaves as Promise</li>
<li>this thenable check is enforced by ES6 spec, so by adding <code dir="auto">then</code> function to prototype of <code dir="auto">Array</code>, all array instances will be treated as Promises</li>
</ul>
<p>Promise resolves all of Trust problems with callbacks:</p>
<ul>
<li>calling too early(aka Zalgo problem) - won’t happen, caze Promise is always async</li>
<li>calling too late - won’t happen, caze after resolve/reject call, all <code dir="auto">.then</code> callbacks will be called “immediately”(on next possibility, inside queue)</li>
<li>never calling - <code dir="auto">.then</code> cb will be called, even in case of an error, after resolving of a Promise
<ul>
<li>it is still a concern that Promise will just hang and never call <code dir="auto">resolve</code>, BUT we can utilize <code dir="auto">Promise.race</code> with Promise, that will <code dir="auto">regect</code> after some delay, thus we can easily fix this</li>
</ul>
</li>
<li>calling too many times - Promise always takes first resolve/reject in function and ignoring others, so we are getting only 1 call(or 0 as raised before)</li>
<li>not passing all arguments - Promise guarantees to pass first parameter of resolve/reject and ignores others(intended)
<ul>
<li>same applies for swallowing errors, BUT it is also important, that Promise will reject because of built-in errors as well(similar to <code dir="auto">try/catch</code>)
<ul>
<li>and we even can catch from <code dir="auto">.then</code> callbacks, by chaining
but recalling thenable problem it may appear, that it is easy to fake Promise, until its not</li>
</ul>
</li>
</ul>
</li>
<li>ES6 specifies <code dir="auto">Promise.resolve(...)</code>, which takes any value and tries to unwrap it, if it thenable, until non-thenable value is reached and returned
<ul>
<li>so we can pass some fake thenable(or even non-thenable) value and take back normalized Promise</li>
</ul>
</li>
</ul>
<p>Promise is made chainable, meaning we can chaine multiple Promises together by passing result, this achieved via:</p>
<ul>
<li><code dir="auto">then</code> always returns Promise</li>
<li><code dir="auto">return</code> from inside <code dir="auto">then</code> is performing Promise unwrapping, so we never end-up with nested structure</li>
<li>all returned values are passed to next <code dir="auto">then</code></li>
<li>note: if we hadn’t pass rejection handler(second parameter to <code dir="auto">then</code>, we will end up with unhandled rejection, caze JS have default function that re-throws error)
<ul>
<li>same will happen to first argument, but it will simply return value</li>
<li>this pattern is called a pit of despair, which means that program punishes wrong actions by default
<ul>
<li>the opposite is pit of success</li>
</ul>
</li>
<li>it is usually a good practice to end Promise chain with final <code dir="auto">catch</code>, that will handle our final error
<ul>
<li>but be careful with unhandled error in <code dir="auto">catch</code> itself :)</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>Promise unwrapping</p>
<ul>
<li>it is important to consider that <code dir="auto">reject</code> function won’t do any unwrapping and pass value as is
<ul>
<li>it is similar to <code dir="auto">throw</code> in <code dir="auto">then</code>, which won’t unwrap/promisify any value and will just proceed to next chain element</li>
<li>but <code dir="auto">resolve</code> will un-wrap/promisify, similar to <code dir="auto">return</code> in <code dir="auto">then</code></li>
</ul>
</li>
</ul>
<p>Error handling</p>
<ul>
<li>incorrect usage of Promise API leads to immediate exception and not in rejected Promise</li>
</ul>
<p>Promise patterns</p>
<ul>
<li>chaining</li>
<li><code dir="auto">Promise.all([...])</code> - take a bunch of Promises inside and resolve, when all Promises finish
<ul>
<li>empty array will immediately resolve</li>
<li>all values inside array will be normalized to Promise via <code dir="auto">Promise.resolve()</code></li>
<li>result will be an array, with resolved values in order of original Promises in array</li>
<li>rejection of one Promise will caze rejection of all</li>
</ul>
</li>
<li><code dir="auto">Promise.race([...])</code> - take an array of Promises and resolve, when first resolves
<ul>
<li>have same nuances as <code dir="auto">Promise.all</code>, but will never resolve for empty array</li>
<li>can make a memory leak, if some Promises inside won’t resolve</li>
</ul>
</li>
<li><code dir="auto">finaly</code> - used to do clean-up, when Promise finishes, despite of result
<ul>
<li>we can’t cancel Promise run</li>
</ul>
</li>
<li><code dir="auto">Promise.none([...])</code> - revers of <code dir="auto">Promise.all</code>, where all rejection will become resolution values</li>
<li><code dir="auto">Promise.any([...])</code> - same as <code dir="auto">Promise.all</code>, but ignores any rejections</li>
<li><code dir="auto">Promise.first([...])</code>- similar to <code dir="auto">Promise.race</code>, but ignores any rejections
<ul>
<li>reverse - <code dir="auto">Promise.last([...])</code></li>
</ul>
</li>
</ul>
<p>Limitations</p>
<ul>
<li>we can’t observe all errors inside Promise chain reliably, meaning, some errorHandlers can swallow error and we will miss it</li>
<li>Promise resolve in a single value(more a limitation of JS)
<ul>
<li>but it can push dev to take another approach and split Promise into two separate functions, which reduces coupling and there for great</li>
</ul>
</li>
<li>Promise is only resolves once, so we can’t subscribe to some event with one Promise, we need to revert and create Promise for each subscription
<ul>
<li>observable pattern can be helpful for such cases</li>
</ul>
</li>
<li>We can’t cancel Promise
<ul>
<li>which is good, caze of immutability, but it still maybe useful to timeout Promise</li>
</ul>
</li>
<li>Less performant that raw dogging callbacks, but you are getting more trustable code with higher dev experience
<ul>
<li><em>but why use JS in a first place, if you need performance :)</em></li>
</ul>
</li>
</ul>
<h4 id="generators">Generators</h4>
<p>Generator - type of function, that can stop and re-new later it’s execution, so run is broken into partial completions and full completion can be achieved after more then one partial completion</p>
<ul>
<li>this pattern helps with building more linear async flow in ES6(pre async/await)</li>
</ul>
<p>generator can be defined as <code dir="auto">function *funcName() {}</code> and <code dir="auto">yield</code> keyword can be used inside of it to break execution flow</p>
<p>execution flow</p>
<ul>
<li>calling the function will construct iterator INSTANCE for function
<ul>
<li>it is important, that it is instance with it’s own state and have no shared state with function/other instances
<ul>
<li>we can force some interesting concurrency with generators and shared scope</li>
</ul>
</li>
<li>note: for ES6 to consider object iterable it need to have <code dir="auto">Symbol.iterator</code>, that return iterator(usually new instance)
<ul>
<li>it enables usage of such function with <code dir="auto">for of</code> etc
<ul>
<li>it is important that <code dir="auto">for or</code> won’t pass any value to <code dir="auto">.next()</code></li>
</ul>
</li>
<li>object can be iterator and iterable at the same time</li>
<li>generator is not iterable(we can’t iterate through it’s values), but it is never the less can create an iterator(which is also an iterable)</li>
</ul>
</li>
</ul>
</li>
<li><code dir="auto">iterator.next()</code> will start/continue function execution, until <code dir="auto">yield</code> keyword is met
<ul>
<li>this will pause our function and return object with intermediate result
<ul>
<li><code dir="auto">value</code> - result that was passed to <code dir="auto">yield</code>/<code dir="auto">return</code></li>
<li><code dir="auto">done</code> - if function fully finished it’s execution</li>
</ul>
</li>
<li>we can use <code dir="auto">yield</code> as value
<ul>
<li>function will stop, when trying to eval it and next <code dir="auto">next(val)</code> will evaluate this <code dir="auto">yield</code> with passed <code dir="auto">val</code></li>
<li>this result in <code dir="auto">count(next) = count(yield) + 1</code>, case we first start execution and only then evaluation <code dir="auto">yield</code>s</li>
</ul>
</li>
<li>other variation of <code dir="auto">.next()</code> is <code dir="auto">.throw()</code></li>
</ul>
</li>
<li>stopping generator
<ul>
<li>default way to stop generator - use <code dir="auto">iterator.return(val)</code></li>
<li>it may seam, that non-returned generators will hang infinitely, after, for example, <code dir="auto">for..of</code> is finished, but JS have <code dir="auto">Abnormal completion</code> pattern, which means that, when <code dir="auto">for..of</code> finishes - send signal to kill iterator</li>
<li>any exceptions will stop generator</li>
<li>generators give a possibility to clean-up with <code dir="auto">finally {}</code> syntax
<ul>
<li>this code will execute, when stopping is triggered</li>
</ul>
</li>
</ul>
</li>
</ul>
<h6 id="generators-with-async">Generators with Async</h6>
<p>generator enables pattern, that allows to stop function execution, until we get some result and than continue it, without using callbacks</p>
<ul>
<li>we still have a possibility of error handling via try+catch and <code dir="auto">.throw()</code> OR not, if not caught, caze generator will just re-throw it</li>
<li>it is a predecessor to <code dir="auto">async/await</code></li>
<li>it is important to remember, that we can still call async code concurrently/in-paralel, for optimization
<ul>
<li>it might be useful to abstract hard Promise logic into one “async” function and then call it via <code dir="auto">await</code> for simplicity</li>
</ul>
</li>
</ul>
<h6 id="generator-delegation">Generator delegation</h6>
<p>we can delegate execution from one generator function to other via <code dir="auto">yield* func2()</code>, so basically our <code dir="auto">func2</code> will now be controlled from it’s parent iterator, until finished and control of parent is returned</p>
<ul>
<li>from outside it seems as we just control <code dir="auto">func2</code> parent, caze all values/responses/errors are pathed through, except <code dir="auto">return</code>, wich will fulfill <code dir="auto">funct2</code> value at the end, inside it’s parent</li>
<li>it is possible to delegate to itself via recursion calls</li>
<li>note: we are delegating iterator control</li>
<li>it is possible to construct any iterator from iterable this way: <code dir="auto">yeld* []</code></li>
</ul>
<h6 id="thunk">Thunk</h6>
<p>Thunk - older approach of handling async, which is done by wrapping original function into it’s Thunk, where it is immediately called, with some predefined(can be partially) parameters</p>
<ul>
<li>default way of dealing is to use callback-last approach, where, when thunkifying we predefining all parameters at first and leaving last callback parameter unknown to pass to thunk itself
<ul>
<li>we can take two approaches to making thunks factories
<ul>
<li>factory that creates thunk with parameters</li>
<li>factory that creates thunk factory, that will wrap function, but binding to parameters will be done via separate call</li>
</ul>
</li>
</ul>
</li>
<li>thunk pattern can be viewed as symmetrical to promises in basic functionality, but all-in-all Promises in JS have mush more overhead</li>
</ul>
<h6 id="pre-es6-generators">Pre-ES6 Generators</h6>
<p>It is impossible to polyfil a generator, caze it is new syntax and not API, but there are tools, that can transpile new syntax into all code with same functionality</p>
<p>Basic approach to creating generator analog is to create a function, that will keep in-scope state and current part of program + an executor inner function, that will perform actions for this part of program, with existing state + return an object with <code dir="auto">next</code> and <code dir="auto">throw</code> functions, that will wire state changes and output, based on executor results</p>
<ul>
<li>it is basic approach, that won’t be fully compatible, so use libs instead :)</li>
</ul>
<h4 id="performance">Performance</h4>
<blockquote>
<p>User perception of performance is every bit — if not more! — as important as actual measurable performance.</p>
</blockquote>
<h6 id="webworkers">WebWorkers</h6>
<p>JS doesn’t have any way of native multi-threading, but environment can enable it
Here comes WebWorkers - browser’s API to achieve multi-threading</p>
<ul>
<li>WebWorkers enable “task parallelism”, which is meant we can run some part of program on separate thread, as separate instance of JS</li>
<li>it is important, that worker is guaranteed to have separate thread, but we can’t be sure, that it will be real thread(it is possible, but is still browsers decision)</li>
</ul>
<p>API:
initiate worker via:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">const </span><span style="--0:#82AAFF;--1:#3C63B3">worker</span><span style="--0:#C792EA;--1:#8D46B4"> = </span><span style="--0:#7FDBCA;--1:#097174">new</span><span style="--0:#C792EA;--1:#8D46B4"> </span><span style="--0:#82AAFF;--1:#3C63B3">Worker</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">http://url/toJsFile.js</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="const worker = new Worker(&#x22;http://url/toJsFile.js&#x22;);"><div></div></button></div></figure></div>
<ul>
<li>we are passing a link to file, that will be ran under separate thread
<ul>
<li>this worker is named “Dedicated Worker”</li>
<li>it is also possible to pass blob link to some inline <code dir="auto">&#x3C;script></code> and run it as worker
<ul>
<li>it will create an “Inline Worker”</li>
</ul>
</li>
</ul>
</li>
<li>workers are created one-to-one
<ul>
<li>but workers can still have sub-workers</li>
<li>each worker, created from same file will be separate instance</li>
</ul>
</li>
</ul>
<p>to communicate between workers we can use <code dir="auto">worker</code> object, that is event listener and emitter</p>
<ul>
<li><code dir="auto">"message"</code> is fixed event name to listen</li>
<li><code dir="auto">.postMessage(data)</code> is used to send events</li>
<li>inside a worker we can use top level <code dir="auto">addEventListener</code> or use top level function <code dir="auto">postMessage()</code></li>
</ul>
<p>to stope worker we have <code dir="auto">worker.terminate()</code>, which kills it without finishing/clean up</p>
<p>Environment</p>
<ul>
<li>worker can’t access anything from parent thread, more over his environment is a bit uniq
<ul>
<li>we still can do <code dir="auto">fetch</code>, WebSockets, timers, <code dir="auto">JSON</code>, <code dir="auto">location</code> etc</li>
<li><code dir="auto">importScripts(link_1, link_2, ...)</code> will sync-load any needed script</li>
</ul>
</li>
</ul>
<p>Usage</p>
<ul>
<li>math</li>
<li>parallel operations with large data sets, like: sorting</li>
<li>heavy data operations: image/audio/video processing, compression</li>
<li>high-traffic network operations</li>
</ul>
<p>Data transfer</p>
<ul>
<li>default way is to use serialization to string
<ul>
<li>problems: double memory usage, serialization+de-serialization of data</li>
</ul>
</li>
<li>other way is to pass object, that will be “smart” cloned by browser
<ul>
<li>it is important to keep an eye of wether some feature is usable or not with some browser(or it’s version)</li>
</ul>
</li>
<li>the best approach is to rely on “Transferable Objects”, which means that we are passing ownership and not data
<ul>
<li>object need to implement special interface to be “transferable”</li>
<li>older browsers will just copy object and thats it</li>
<li>example:</li>
</ul>
</li>
</ul>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#809191;--1:#5E6578">// arr: Uint8Array</span></div><div class="ec-line"><span style="--0:#82AAFF;--1:#3C63B3">postMessage</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#7FDBCA;--1:#097174">arr</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#7FDBCA;--1:#097174">buffer</span><span style="--0:#D6DEEB;--1:#403F53">, [</span><span style="--0:#7FDBCA;--1:#097174">arr</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#7FDBCA;--1:#097174">buffer</span><span style="--0:#D6DEEB;--1:#403F53">]);</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="// arr: Uint8ArraypostMessage(arr.buffer, [arr.buffer]);"><div></div></button></div></figure></div>
<h6 id="sharedworkers">SharedWorkers</h6>
<p>SharedWorker - type of WebWorker, that can be shared via multiple instances of an app(for example tabs)</p>
<ul>
<li>useful case is to create SharedWorker, that will create one socket connection and manage data between tabs, so we won’t exceed max number of opened sockets</li>
</ul>
<p>API:
initiate via:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">const </span><span style="--0:#82AAFF;--1:#3C63B3">sw</span><span style="--0:#C792EA;--1:#8D46B4"> = </span><span style="--0:#7FDBCA;--1:#097174">new</span><span style="--0:#C792EA;--1:#8D46B4"> </span><span style="--0:#82AAFF;--1:#3C63B3">SharedWorker</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">http://url/toJsFile.js</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="const sw = new SharedWorker(&#x22;http://url/toJsFile.js&#x22;);"><div></div></button></div></figure></div>
<p>caze worker can be shared, we need to distinct incoming users, which is done via <code dir="auto">port</code>:</p>
<ul>
<li><code dir="auto">sw.port.addEventListener("message", handler);</code></li>
<li><code dir="auto">sw.port.postMessage(data);</code></li>
<li>we need to first init this port: <code dir="auto">sw.port.start();</code>
<ul>
<li>this is must be listened with response in such way:</li>
</ul>
</li>
</ul>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#82AAFF;--1:#3C63B3">addEventListener</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">connect</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#D9F5DD;--1:#111111">(</span><span style="--0:#D7DBE0;--1:#403F53">e</span><span style="--0:#D9F5DD;--1:#111111">)</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">=></span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">  </span><span style="--0:#C792EA;--1:#8D46B4">const </span><span style="--0:#82AAFF;--1:#3C63B3">port</span><span style="--0:#C792EA;--1:#8D46B4"> = </span><span style="--0:#7FDBCA;--1:#097174">e</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#7FDBCA;--1:#097174">ports</span><span style="--0:#D6DEEB;--1:#403F53">[</span><span style="--0:#F78C6C;--1:#AA0982">0</span><span style="--0:#D6DEEB;--1:#403F53">];</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">  </span><span style="--0:#7FDBCA;--1:#097174">port</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#82AAFF;--1:#3C63B3">addEventListener</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">message</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#7FDBCA;--1:#097174">...</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">  </span><span style="--0:#7FDBCA;--1:#097174">port</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#82AAFF;--1:#3C63B3">start</span><span style="--0:#D6DEEB;--1:#403F53">();</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">} );</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="addEventListener(&#x22;connect&#x22;, (e) => {  const port = e.ports[0];  port.addEventListener(&#x22;message&#x22;, ...);  port.start();} );"><div></div></button></div></figure></div>
<p><code dir="auto">sw</code> will survive <code dir="auto">terminate</code>, if other connections are still opened</p>
<p>other capabilities are same with WebWorkers</p>
<p>it is problematic to polyfil workers, caze there is no real multi-threading, but:</p>
<ul>
<li>it is possible to use <code dir="auto">iframe</code> as source of separate env, but it is still same thread</li>
<li>it is possible to virtualize one thread via event loop via <code dir="auto">setTimeout</code></li>
</ul>
<h6 id="simd">SIMD</h6>
<p>Single instruction multiple data - patter to achieve “data parallelism”, which enables processing some data by parts, where each part is done in parallel</p>
<ul>
<li>usually achieved via CPU’s “vectors”, that is array-like data number structure, with strict sizes, that enables SIMD</li>
<li>great pattern, but currently died on Stage 3, caze of browser support problems with alternative to WebAssembly</li>
</ul>
<h6 id="asmjs">Asm.js</h6>
<p>Asm.js - subset of JS, with aim to optimization, that avoids some hard to optimize stuff(GC, coercion etc) and works only with ams aware engines</p>
<ul>
<li>it possible, that it will be integrated to TC39, but for now it is not there yet and typical way of using it is - compiling via some 3d-party tools and running in ASM-engine</li>
<li>it is common to meet asm in game dev space</li>
</ul>
<p>using asm.js(as said, it is more common to compile to asm.js, but we can write it by hand)</p>
<ul>
<li>if variable will be always int32, we can state it by doing things like this: <code dir="auto">let b = a | 0</code>, which is do nothing operation for JS, but for asm states that it is int32, case <code dir="auto">|</code> is int only operation</li>
<li>asm have a concept of “modules” - some pre-allocated heap(with no possibility of growing) with hardcoded to it global APIs
<ul>
<li>this way we avoiding GC and memory allocation</li>
</ul>
</li>
</ul>
<h4 id="benchmarking">Benchmarking</h4>
<p>common way to do is <code dir="auto">start = Date.now(); ...; conosole.log(Date.now() - start);</code></p>
<ul>
<li>problems
<ul>
<li>older systems can measure time in slices more than 1ms</li>
<li>same code can output different time, depending on number of runs or system state overall</li>
<li>outliers can ruin stats, BUT we can’t fully throw them away, case they are still valid tuns, so it is important to find out reason why they ran so</li>
<li>you most probably have skill-issues in statistics and just can’t write a proper tool :)</li>
</ul>
</li>
<li>you can run a function in a loop, but you need to have enough runs, so average will be not too hight
<ul>
<li>and it is better to base number of runs on time(based on timer accuracy) and not just count</li>
</ul>
</li>
</ul>
<p>better approach - use some lib(as always btw)</p>
<ul>
<li>benchmark.js
<ul>
<li>API
<ul>
<li>to run head-to-head tests there are Suite API inside lib</li>
<li>options
<ul>
<li>setup/teardown - do something before/after each test cycle
<ul>
<li>important, that it is not for each test run</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">const </span><span style="--0:#82AAFF;--1:#3C63B3">b</span><span style="--0:#C792EA;--1:#8D46B4"> = </span><span style="--0:#7FDBCA;--1:#097174">new</span><span style="--0:#C792EA;--1:#8D46B4"> </span><span style="--0:#82AAFF;--1:#3C63B3">Benchmark</span><span style="--1:#403F53"><span style="--0:#D6DEEB">(</span><span style="--0:#D7DBE0">testName</span></span><span style="--0:#C792EA;--1:#8D46B4">, </span><span style="--0:#D7DBE0;--1:#403F53">func</span><span style="--0:#C792EA;--1:#8D46B4">, </span><span style="--1:#403F53"><span style="--0:#D7DBE0">options</span><span style="--0:#D6DEEB">);</span></span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#D7DBE0;--1:#403F53">b</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#D6DEEB;--1:#403F53">[</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">some property with statisitcal data about benchmark</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">];</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="const b = new Benchmark(testName, func, options);b.[&#x22;some property with statisitcal data about benchmark&#x22;];"><div></div></button></div></figure></div>
<ul>
<li>.
<ul>
<li>use-cases
<ul>
<li>test performance of function</li>
<li>compare two functions</li>
<li>run similar to unit tests to test-out critical performance in some part of an app
<ul>
<li>it is also possible to track down/up-grades between releases</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>remember to never over-optimize, it more often than not just not worse it
as a general rule of thumb it is better to write some stuff, test and then, if needed, optimize</p>
<ul>
<li>it is also important to note, that engine can add some over-optimizations(something, that might not be possible to meet in real scenarios) to your synthetic tests
<ul>
<li>but we can’t rely on engine optimizations, caze it is matter to change and not really public</li>
<li>remember that synthetic tests are evil :)</li>
</ul>
</li>
<li>it is also important to take in consideration some additional allocations, function creations etc
<ul>
<li>also don’t create tests with different outcomes</li>
</ul>
</li>
</ul>
<p>there is interesting website <a href="https://jsperf.com/">jsperf.com</a>, that collects test results from variety of environments(devices, browsers etc), so it is more fair to check results of Y faster than X here</p>
<p>good tests are done by</p>
<ul>
<li>including more relevant context
<ul>
<li>don’t just synthetically test on small snippet</li>
</ul>
</li>
<li>keep an eye on unintentional differences</li>
</ul>
<p>funny engine optimizations that might not be in JS, but possible</p>
<ul>
<li><code dir="auto">factorial(5)</code> can be replaced with <code dir="auto">120</code></li>
<li>engine can rewrite code from recursion to loop, if it seems to be more optimized</li>
<li>variables can be inlined with values</li>
<li><code dir="auto">arr.length</code> call is more performant than pre-cashing this value</li>
</ul>
<h6 id="tail-call-optimizationtco">Tail Call Optimization(TCO)</h6>
<p>Introduced in ES6, TCO - sort of optimization, which happens in cases, where we are calling function at the end of another function, so there is only option to return it’s result or do nothing</p>
<ul>
<li>usually met in recursions</li>
<li>main algorithm is to detect if it is a tail call and, if so, call function on current stack frame, without wasting memory on a new one
<ul>
<li>otherwise we need to limit depth of recursion, so keep an eye on it</li>
</ul>
</li>
</ul>
<h4 id="async-patterns">Async Patterns</h4>
<p>Some advanced patterns, that can be built on top of Promises+generators+async/await, with/without external libs</p>
<ul>
<li>iterrable
<ul>
<li>map/for..of through array of Promises</li>
<li>can be done one by one in parallel OR wait for all -> perform operation -> wait for operation to complete</li>
</ul>
</li>
<li>expandable
<ul>
<li>example: request for data, IF there is more -> request again, IF NOT -> finish</li>
</ul>
</li>
<li>event reactive
<ul>
<li>async event emitter, which will fire after async operation completion + listener
<ul>
<li>note: it is impossible to do with one Promise, case it is resolved once, so you need to create new Promise, for each emmittion</li>
<li>basically it is an observable from RxJS, which we might(or not) get later, if Observable proposal is passed</li>
</ul>
</li>
<li>in it’s core, it is again based on generator+iterator patter :)</li>
</ul>
</li>
<li>coroutine
<ul>
<li>run two generators in parallel, with passing control from one to another</li>
<li>via this pattern we can create state machine, which is basically some executor, that will execute one function or another, depending on current state, until “stop” condition is met</li>
</ul>
</li>
<li>communicating sequential processes
<ul>
<li>in it’s core a method to concurrent processes to communicate during execution
<ul>
<li>in JS can be again done via generators, by stoping function A, with passing message to B and unblocking A, when B is ready and received message
<ul>
<li>it is like that, caze CSP must be done in a sync-looking way</li>
<li>there are more into it, with buffers, that act as communication channels between processes and other stuff, that eventually leads to data streams</li>
</ul>
</li>
</ul>
</li>
<li>CSP states, that we aren’t passing control as in coroutines, but rather blocking execution, when waiting for the value OR blocking execution, when trying to send a value, but channels isn’t available yet</li>
</ul>
</li>
</ul>
<h2 id="clean-code-js">Clean Code JS</h2>
<p>adaptation of Clean Code principles onto JS</p>
<h4 id="variables">Variables</h4>
<ul>
<li>use meaningful and explanatory variable names</li>
<li>create simular vocabulary(getClient, createClient, <del>updateUser</del>)</li>
<li>don’t use magic numbers</li>
<li>don’t repeat context in var names(<del>Car.carModel</del>)</li>
<li>default values in func is better than <code dir="auto">name || "Joe"</code></li>
<li>useful pattern to create objs with default value</li>
</ul>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">const </span><span style="--0:#82AAFF;--1:#3C63B3">defaultObj</span><span style="--0:#C792EA;--1:#8D46B4"> = {</span></div><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">  name: </span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#9B504E">Joe</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#C792EA;--1:#8D46B4">,</span></div><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">  age: </span><span style="--0:#F78C6C;--1:#AA0982">18</span><span style="--0:#C792EA;--1:#8D46B4">,</span></div><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">}</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">const </span><span style="--0:#82AAFF;--1:#3C63B3">obj</span><span style="--0:#C792EA;--1:#8D46B4"> = {</span></div><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">  </span><span style="--0:#7FDBCA;--1:#097174">...</span><span style="--0:#D7DBE0;--1:#403F53">defaultObj</span><span style="--0:#C792EA;--1:#8D46B4">,</span></div><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">  name: </span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#9B504E">Mike</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#D7DBE0;--1:#403F53">m</span></div><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">}</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="const defaultObj = {  name: &#x27;Joe&#x27;,  age: 18,}const obj = {  ...defaultObj,  name: &#x27;Mike&#x27;m}"><div></div></button></div></figure></div>
<ul>
<li>avoid negative conditions in vars(for example: isNotLoading)</li>
</ul>
<h4 id="functions-1">Functions</h4>
<ul>
<li>it is good to limit func args to 2-3. If more is needed it is better to use object arg with destruction
<ul>
<li>approves testability</li>
<li>single responsibility</li>
</ul>
</li>
<li><strong>one func - one task</strong>
<ul>
<li>avoid adding different functional based on args(for example: <code dir="auto">createUpdateUser(toUpdate: bool)</code>)</li>
</ul>
</li>
<li>func name must describe func</li>
<li>DRY by adding right abstractions to codebase</li>
<li>avoid side effects(write files, modifying vars)
<ul>
<li>it is good practice to create one service that will handle mutations/side effects</li>
<li>usually it is better to clone and return new obj then modify passed into func</li>
</ul>
</li>
<li>don’t extend default functions/classes by adding property to prototype
<ul>
<li>better approach to create superClass that extends default</li>
</ul>
</li>
</ul>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">class</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#FFCB8B;--1:#111111">superArr</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">extends</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3C63B3">Array</span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">  </span><span style="--0:#82AAFF;--1:#3C63B3">findSumm</span><span style="--0:#D9F5DD;--1:#111111">()</span><span style="--0:#D6DEEB;--1:#403F53"> {}</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="class superArr extends Array {  findSumm() {}}"><div></div></button></div></figure></div>
<ul>
<li>it is good practice to lean towards functional programing(for example: <code dir="auto">arr.map().reduce</code> instead of doing it line by line)</li>
<li>encapsulate conditions</li>
</ul>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre tabindex="0"><code><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">function</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">shouldShowSpinner</span><span style="--0:#D9F5DD;--1:#111111">(</span><span style="--1:#403F53"><span style="--0:#D7DBE0">fsm</span><span style="--0:#D6DEEB">, </span><span style="--0:#D7DBE0">listNode</span></span><span style="--0:#D9F5DD;--1:#111111">)</span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">  </span><span style="--0:#C792EA;--1:#8D46B4">return</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#097174">fsm</span><span style="--0:#C792EA;--1:#8D46B4">.</span><span style="--0:#7FDBCA;--1:#097174">state</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">===</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#9B504E">fetching</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8D46B4">&#x26;&#x26;</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3C63B3">isEmpty</span><span style="--1:#403F53"><span style="--0:#D6DEEB">(</span><span style="--0:#D7DBE0">listNode</span><span style="--0:#D6DEEB">);</span></span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">}</span></div><div class="ec-line">
</div><div class="ec-line"><span style="--0:#C792EA;--1:#8D46B4">if</span><span style="--0:#D6DEEB;--1:#403F53"> (</span><span style="--0:#82AAFF;--1:#3C63B3">shouldShowSpinner</span><span style="--1:#403F53"><span style="--0:#D6DEEB">(</span><span style="--0:#D7DBE0">fsmInstance</span><span style="--0:#D6DEEB">, </span><span style="--0:#D7DBE0">listNodeInstance</span><span style="--0:#D6DEEB">)) {</span></span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">  </span><span style="--0:#809191;--1:#5E6578">// ...</span></div><div class="ec-line"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="function shouldShowSpinner(fsm, listNode) {  return fsm.state === &#x22;fetching&#x22; &#x26;&#x26; isEmpty(listNode);}if (shouldShowSpinner(fsmInstance, listNodeInstance)) {  // ...}"><div></div></button></div></figure></div>
<ul>
<li>decrease if/else by polymorphism and single responsibility</li>
<li>avoid typechecking by using TS + polymorphism</li>
<li>don’t over optimize if it is already handled under hood</li>
<li>remove dead code</li>
</ul>
<h4 id="objects-and-data-structures">Objects and Data structures</h4>
<ul>
<li>prefer get/set
<ul>
<li>adds possibility to process/validate data + possibility to error handling and logging</li>
<li>encapsulation</li>
</ul>
</li>
<li>it is good practice to add chaining to class</li>
<li>composition better then inheritance
<ul>
<li>it is still good to use inheritance when:
<ul>
<li>object1 “is-a” object2 (Human is an Animal)</li>
<li>object1 reuses code from object2 (Human moves like Animal)</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="solid"><a href="Architecture.md#Solid">Solid</a></h4>
<h4 id="testing">Testing</h4>
<p>More important that shipping. Ideally cover 100% of codebase with tests</p>
<ul>
<li>one test - one task</li>
<li>async/await >> Promise >> callback</li>
</ul>
<h4 id="error-handling">Error handling</h4>
<ul>
<li>throw - good</li>
<li>it is bad to add catch but left error unhandled
<ul>
<li>console.log is better, but still not preferable</li>
</ul>
</li>
</ul>
<h4 id="formatting">Formatting</h4>
<ul>
<li>use auto-formatting tools</li>
<li>good rule to name classes from capital and const capsed</li>
<li>keep caller and callee close</li>
<li>comments are good, but even better when code documents itself
<ul>
<li>remove commented code</li>
</ul>
</li>
</ul> </div> <footer class="astro-3yyafb3n"> <div class="meta sl-flex astro-3yyafb3n">   </div> <div class="pagination-links astro-u2l5gyhi" dir="ltr"> <a href="/it_docs/all/it/" rel="prev" class="astro-u2l5gyhi"> <svg aria-hidden="true" class="astro-u2l5gyhi astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.5rem;"><path d="M17 11H9.41l3.3-3.29a1.004 1.004 0 1 0-1.42-1.42l-5 5a1 1 0 0 0-.21.33 1 1 0 0 0 0 .76 1 1 0 0 0 .21.33l5 5a1.002 1.002 0 0 0 1.639-.325 1 1 0 0 0-.219-1.095L9.41 13H17a1 1 0 0 0 0-2Z"/></svg>  <span class="astro-u2l5gyhi"> Previous <br class="astro-u2l5gyhi"> <span class="link-title astro-u2l5gyhi">IT</span> </span> </a> <a href="/it_docs/all/optimization/" rel="next" class="astro-u2l5gyhi"> <svg aria-hidden="true" class="astro-u2l5gyhi astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.5rem;"><path d="M17.92 11.62a1.001 1.001 0 0 0-.21-.33l-5-5a1.003 1.003 0 1 0-1.42 1.42l3.3 3.29H7a1 1 0 0 0 0 2h7.59l-3.3 3.29a1.002 1.002 0 0 0 .325 1.639 1 1 0 0 0 1.095-.219l5-5a1 1 0 0 0 .21-.33 1 1 0 0 0 0-.76Z"/></svg>  <span class="astro-u2l5gyhi"> Next <br class="astro-u2l5gyhi"> <span class="link-title astro-u2l5gyhi">Optimization</span> </span> </a> </div>  </footer>  </div> </div>   </main> </div> </div>  </div> </div>  </body></html>